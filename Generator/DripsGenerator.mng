<!DOCTYPE MariML>
<Mari FnVersion="3.0" Version="2.1">
 <MriShaderNetwork Type="MriShaderNetwork">
  <objectName Type="QString"/>
  <selected Type="bool">false</selected>
  <uuidString Type="QString">{988daeea-ef3f-4d1a-a069-b083c7ac90eb}</uuidString>
  <viewerNodeUuid Type="QString"/>
  <m_nodes Size="1" attributeLinkString="{ade18408-1df8-4ec0-bf57-9121517b6734},Dried_Stains_Size,{1faa88ad-0361-49cd-b4af-415c7b1285b9},Float_0to1,{ade18408-1df8-4ec0-bf57-9121517b6734},Dried_Stains_Transparency,{d53381aa-ac0e-41cc-96d5-1407f60720b3},InMid,{ade18408-1df8-4ec0-bf57-9121517b6734},Drips_Transparency,{3bf68f30-0542-44b6-9984-6462ad87c7ff},InMid,{ade18408-1df8-4ec0-bf57-9121517b6734},Drips_Scale,{9d994a02-ba6f-4ec0-8b32-6d1a50741933},WorldScale" Type="MriSnBaseNode" ContainerType="QList">
   <MriSnGroupNode Type="MriSnGroupNode">
    <objectName Type="QString">Drips Generator</objectName>
    <selected Type="bool">true</selected>
    <uuidString Type="QString">{ade18408-1df8-4ec0-bf57-9121517b6734}</uuidString>
    <prefferedInput Type="QString">Curvature Map</prefferedInput>
    <preferredInput Type="QString">Curvature Map</preferredInput>
    <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
    <defaultName Type="QString">Group</defaultName>
    <name Type="QString">Drips Generator</name>
    <defaultDescription Type="QString"/>
    <description Type="QString"/>
    <nodeAttributes Type="QStringList">Drips_Scale,Drips_Transparency,Dried_Stains_Size,Dried_Stains_Transparency</nodeAttributes>
    <tags Type="QStringList">_group</tags>
    <enabled Type="int">-1</enabled>
    <locked Type="bool">false</locked>
    <hash Type="QString"/>
    <cachePoints Type="QStringList"/>
    <cost Type="float">0</cost>
    <costDescription Type="QString"/>
    <disabledInputs Type="QStringList"/>
    <cacheEnabled Type="bool">false</cacheEnabled>
    <versionUUID Type="QString"/>
    <versionDate Type="QString"/>
    <versionHashCreated Type="QString"/>
    <containerNodeUUID Type="QString"/>
    <isContainerNode Type="bool">false</isContainerNode>
    <stackContainerNodeUUID Type="QString"/>
    <isStackContainerNode Type="bool">false</isStackContainerNode>
    <adjustmentStackContainerNodeUUID Type="QString"/>
    <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
    <sharedEdges Type="QStringList"/>
    <pathKey Type="QString">Generator/Drips_C</pathKey>
    <Dried_Stains_Size TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Dried_Stains_Size" GroupHints="1" PrettyName="Dried_Stains_Size" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.76900003652554</Dried_Stains_Size>
    <Dried_Stains_Transparency TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Dried_Stains_Transparency" GroupHints="1" PrettyName="Dried_Stains_Transparency" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.0290000013774261</Dried_Stains_Transparency>
    <Drips_Scale TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Drips_Scale" GroupHints="1" PrettyName="Drips_Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">0.1</Drips_Scale>
    <Drips_Transparency TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Drips_Transparency" GroupHints="1" PrettyName="Drips_Transparency" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">1</Drips_Transparency>
    <m_groupNetwork Type="MriShaderNetwork">
     <objectName Type="QString"/>
     <selected Type="bool">false</selected>
     <uuidString Type="QString">{a0429ff3-c72b-4fcc-a31c-1545d76a8576}</uuidString>
     <viewerNodeUuid Type="QString"/>
     <m_nodes Size="37" attributeLinkString="{9d994a02-ba6f-4ec0-8b32-6d1a50741933},WorldScale,{ade18408-1df8-4ec0-bf57-9121517b6734},Drips_Scale,{1faa88ad-0361-49cd-b4af-415c7b1285b9},Float_0to1,{ade18408-1df8-4ec0-bf57-9121517b6734},Dried_Stains_Size,{d53381aa-ac0e-41cc-96d5-1407f60720b3},InMid,{ade18408-1df8-4ec0-bf57-9121517b6734},Dried_Stains_Transparency,{3bf68f30-0542-44b6-9984-6462ad87c7ff},InMid,{ade18408-1df8-4ec0-bf57-9121517b6734},Drips_Transparency" Type="MriSnBaseNode" ContainerType="QList">
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Output</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{2c501826-a6bf-45c9-babe-7524d200e10c}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Output</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_output</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Misc_Output</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">09a1c86a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Output</pathKey>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a1da48d0-90ec-4437-a1ab-94ba29dc98e8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Output</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{136752c4-d47e-4c1a-beb0-359b86d38ff8}</uuidString>
         <position Type="QPointF">1417.71,373.916</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b57d8448-94e8-4cdd-adb1-197454257ccc}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    Output = #Input;
                </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{ae9e44b0-9faa-4126-94fb-782f53a00c7f}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">DriedDrips_Width</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{1faa88ad-0361-49cd-b4af-415c7b1285b9}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">DriedDrips_Width</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.76900003652554</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{68dc9481-2fc1-4d51-b897-3dbc8d7adf21}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">DriedDrips_Width</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{cff1d343-156b-427a-b114-750d59dd4260}</uuidString>
         <position Type="QPointF">1176.34,-42.1538</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b7da51b1-f572-4710-b25c-c8ec09f8b0f8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Histogram Scan</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{9053577a-760a-4c44-aba5-a52e1d6d1957}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Histogram Scan</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.550000026123598</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9d013723-1811-450a-904e-94203a753db4}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Histogram Scan</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{33c0394b-1fe3-4ebf-9f38-8931859ad43c}</uuidString>
         <position Type="QPointF">803.509,33.1321</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ea03a07a-997a-46fb-a0c2-d6bd4abf3add}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{3bf68f30-0542-44b6-9984-6462ad87c7ff}:Output" Type="QString" map1="Position:{dc05d063-0d98-445d-baca-0b888ff2fee4}:Output" map2="Contrast::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Cloud</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{38119fda-6dfb-4635-a787-80138a7cee26}</uuidString>
       <prefferedInput Type="QString">Position</prefferedInput>
       <preferredInput Type="QString">Position</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Cloud</name>
       <defaultDescription Type="QString"/>
       <description Type="QString">Cloud pattern generated from multiple octaves of Perlin Noise</description>
       <nodeAttributes Type="QStringList">/Size,/Roughness,Color/colorA,Color/colorB,Offsets/XOffset,Offsets/YOffset,Offsets/ZOffset</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.1</cost>
       <costDescription Type="QString">Texture reads</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Procedural_Fractal_Cloud</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0575400a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Roughness TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Roughness" GroupHints="1" PrettyName="Roughness" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.546000025933608</Roughness>
       <Size TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Size" GroupHints="1" PrettyName="Size" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.577000027406029</Size>
       <XOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="XOffset" GroupHints="1" PrettyName="X Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100000">0</XOffset>
       <YOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="YOffset" GroupHints="1" PrettyName="Y Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100000">0</YOffset>
       <ZOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="ZOffset" GroupHints="1" PrettyName="Z Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100000">0</ZOffset>
       <colorA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="colorA" GroupHints="1" PrettyName="Color A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(1,1,1,1)" Max="">(1,1,1,1)</colorA>
       <colorB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(0,0,0,1)" AttribName="colorB" GroupHints="1" PrettyName="Color B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(0,0,0,1)" Max="">(0,0,0,1)</colorB>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{de0ea8fa-9832-4346-b7f8-0fe3251608c1}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Cloud</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{6c36cf5e-b12c-4e89-8c9f-a4207bafcc9b}</uuidString>
         <position Type="QPointF">476.409,-96.4422</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{e73614b7-29ea-443d-9d69-6286856e16cb}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float size = $Size;
    float roughness = $Roughness;
    vec3 seed = #Position.xyz + vec3($XOffset,$YOffset,$ZOffset);
    float noise_val = 0.0;
    float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;
    float sharpness = log2(1.0+99.0*roughness)/log2(100.0);
    for(int i=0;i&lt;10;i++)
    {
        vec3 scaled_seed = pow(2.0,float(i)) * seed.rgb / size_pow;
        noise_val += noise(scaled_seed)/pow(5.0-4.0*sharpness,float(i));
    }
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8087edf6-8bf2-4cad-afd6-6b8b6ef503d2}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float size = $Size;
    float roughness = $Roughness;
    vec3 seed = #Position.xyz + vec3($XOffset,$YOffset,$ZOffset);
    float noise_val = 0.0;
    float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;
    float sharpness = log2(1.0+99.0*roughness)/log2(100.0);
    for(int i=0;i&lt;10;i++)
    {
        vec3 scaled_seed = pow(2.0,float(i)) * seed.rgb / size_pow;
        noise_val += noise(scaled_seed)/pow(5.0-4.0*sharpness,float(i));
    }
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a6211be4-a704-46b7-9713-4ef1339d9c96}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float size = $Size;
    float roughness = $Roughness;
    vec3 seed = #Position.xyz + vec3($XOffset,$YOffset,$ZOffset);
    float noise_val = 0.0;
    float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;
    float sharpness = log2(1.0+99.0*roughness)/log2(100.0);
    for(int i=0;i&lt;10;i++)
    {
        vec3 scaled_seed = pow(2.0,float(i)) * seed.rgb / size_pow;
        noise_val += noise(scaled_seed)/pow(5.0-4.0*sharpness,float(i));
    }
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Position:{a9cbd3e7-8517-41b1-9824-f393ba4c7311}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{dc05d063-0d98-445d-baca-0b888ff2fee4}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{14700a35-7bba-4a40-92ca-5377d73c0aec}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{db76370e-70de-4f33-9f95-3e3da512c7e6}</uuidString>
         <position Type="QPointF">541.959,38.3161</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{41814651-7ae9-4368-b661-06a8a2d444d9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{d5984675-c5ca-4042-87e2-4a52e84f3723}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Manifold 3D</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{a9cbd3e7-8517-41b1-9824-f393ba4c7311}</uuidString>
       <prefferedInput Type="QString">Coordinates</prefferedInput>
       <preferredInput Type="QString">Coordinates</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Manifold 3D</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Transform Scale/WorldScale,Transform Scale/scaleX,Transform Scale/scaleY,Transform Scale/scaleZ,Transform Rotate/rotateX,Transform Rotate/rotateY,Transform Rotate/rotateZ,Transform Translate/transX,Transform Translate/transY,Transform Translate/transZ</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Transform3D</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0fabaaca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <WorldScale TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="WorldScale" GroupHints="1" PrettyName="WorldScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</WorldScale>
       <rotateX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateX>
       <rotateY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateY>
       <rotateZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateZ>
       <scaleX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleX" GroupHints="1" PrettyName="Scale X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">2.72384</scaleX>
       <scaleY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleY" GroupHints="1" PrettyName="Scale Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">21.4778</scaleY>
       <scaleZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleZ" GroupHints="1" PrettyName="Scale Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">9.60403</scaleZ>
       <transX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transX" GroupHints="1" PrettyName="Translate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transX>
       <transY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transY" GroupHints="1" PrettyName="Translate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transY>
       <transZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transZ" GroupHints="1" PrettyName="Translate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transZ>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8de8c9cd-7bd8-48e6-918c-9b7194bd425c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Manifold 3D</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{2c60bc2d-c244-4c8a-9ea3-14427af9227f}</uuidString>
         <position Type="QPointF">477.769,-156.178</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Scale:0,0,-100,30" Type="QString" map1="Coordinates:0,0,0,-50" map2="Rotate:0,0,-100,0" map3="Translate:0,0,-100,-30" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{eefed5d9-1f7b-4fb1-9b8b-e427d037f46b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{6cac1bf5-65d6-410e-bdaa-acec04e532f4}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{648aeb56-3390-4b26-afd2-86f008ba7997}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <m_input2node Size="4" map0="Coordinates::Output" Type="QString" map1="Scale:{47a6efe8-b713-44e1-977b-e48a25c37079}:Output" map2="Rotate::Output" map3="Translate::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Type="QString" ContainerType="QHash" Coordinates="3D Coordinates"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Perlin</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{47a6efe8-b713-44e1-977b-e48a25c37079}</uuidString>
       <prefferedInput Type="QString">Position</prefferedInput>
       <preferredInput Type="QString">Position</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Perlin</name>
       <defaultDescription Type="QString"/>
       <description Type="QString">Basic Perlin Noise</description>
       <nodeAttributes Type="QStringList">/Size,Color/colorA,Color/colorB</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.05</cost>
       <costDescription Type="QString">Texture reads</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Procedural_Noise_Perlin</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0e2c11ca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Size TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Size" GroupHints="1" PrettyName="Size" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.763000036240555</Size>
       <colorA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="colorA" GroupHints="1" PrettyName="Color A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(1,1,1,1)" Max="">(0.0414356,1.30859,0,1)</colorA>
       <colorB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(0,0,0,1)" AttribName="colorB" GroupHints="1" PrettyName="Color B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(0,0,0,1)" Max="">(0.447989,0.872024,0.692071,1)</colorB>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{46bd598d-28f5-4568-ac6d-85935000a0e4}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Perlin</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{c0e79971-5a29-4455-823b-038ee3aec8f3}</uuidString>
         <position Type="QPointF">236.769,-158.087</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f8a09847-0287-4f2f-a269-e3bc933b8f54}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    vec3 seed = #Position.xyz;
    float size_pow = (pow(10000.0,$Size*$Size)-1.0) + 0.0001;
    vec3 scaled_seed = seed / size_pow;
    float noise_val = noise(scaled_seed);
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{367ab55a-32a3-4649-819e-e9a9603f99f5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    vec3 seed = #Position.xyz;
    float size_pow = (pow(10000.0,$Size*$Size)-1.0) + 0.0001;
    vec3 scaled_seed = seed / size_pow;
    float noise_val = noise(scaled_seed);
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{1333fff0-861d-4c6b-ae9c-61b96475e78f}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    vec3 seed = #Position.xyz;
    float size_pow = (pow(10000.0,$Size*$Size)-1.0) + 0.0001;
    vec3 scaled_seed = seed / size_pow;
    float noise_val = noise(scaled_seed);
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Position:{62157173-9b82-4ef7-9376-0400e92aad2b}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Manifold 3D 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{62157173-9b82-4ef7-9376-0400e92aad2b}</uuidString>
       <prefferedInput Type="QString">Coordinates</prefferedInput>
       <preferredInput Type="QString">Coordinates</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Manifold 3D 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Transform Scale/WorldScale,Transform Scale/scaleX,Transform Scale/scaleY,Transform Scale/scaleZ,Transform Rotate/rotateX,Transform Rotate/rotateY,Transform Rotate/rotateZ,Transform Translate/transX,Transform Translate/transY,Transform Translate/transZ</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Transform3D</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0fabaaca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <WorldScale TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="WorldScale" GroupHints="1" PrettyName="WorldScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</WorldScale>
       <rotateX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateX>
       <rotateY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateY>
       <rotateZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateZ>
       <scaleX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleX" GroupHints="1" PrettyName="Scale X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">11.8621</scaleX>
       <scaleY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleY" GroupHints="1" PrettyName="Scale Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">7.81939</scaleY>
       <scaleZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleZ" GroupHints="1" PrettyName="Scale Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">83.8552</scaleZ>
       <transX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transX" GroupHints="1" PrettyName="Translate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transX>
       <transY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transY" GroupHints="1" PrettyName="Translate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transY>
       <transZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transZ" GroupHints="1" PrettyName="Translate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transZ>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{298db69e-e2f3-4512-a074-2fa663514e53}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Manifold 3D 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{6611157d-67ea-41e7-8127-27c5120c07cc}</uuidString>
         <position Type="QPointF">240.889,-255.355</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Scale:0,0,-100,30" Type="QString" map1="Coordinates:0,0,0,-50" map2="Rotate:0,0,-100,0" map3="Translate:0,0,-100,-30" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d5e2eab7-21bf-407e-87d4-ae09ffa8e6fe}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{03acc13d-3efc-42cd-ada4-0f4c99e48dfd}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{46ddf4b1-7f65-4c0c-80f3-e0f32a93f854}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <m_input2node Size="4" map0="Coordinates:{fcf5f09b-bc08-4d49-80a0-b867223d623b}:Output" Type="QString" map1="Scale::Output" map2="Rotate::Output" map3="Translate::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Type="QString" ContainerType="QHash" Coordinates="3D Coordinates"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Transition</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{52193284-5793-43af-bb08-9b282040c184}</uuidString>
       <prefferedInput Type="QString">A</prefferedInput>
       <preferredInput Type="QString">A</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Transition</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Trans_Type,/BlendMode,/Contrast</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Transition</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0397768a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <BlendMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" AttribName="BlendMode" GroupHints="1" PrettyName="Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" Max="">Comp_PinLight,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps</BlendMode>
       <Contrast TypeFlags="0" Enabled="true" Visible="true" Min="1" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="3" AttribName="Contrast" GroupHints="1" PrettyName="Contrast B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="3" Max="10">1.81800003885292</Contrast>
       <Trans_Type TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriStringList" Reset="B over A by (PatternToBlack by Transition),B over A by (Transition),B over A by (Pattern),B over A by (Transition*Pattern),B over A by (WhiteToBlack),B over A by (PatternToBlack by Transition),B over A by (WhiteToPattern by Transition)" AttribName="Trans_Type" GroupHints="1" PrettyName="Transition" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="B over A by (PatternToBlack by Transition),B over A by (Transition),B over A by (Pattern),B over A by (Transition*Pattern),B over A by (WhiteToBlack),B over A by (PatternToBlack by Transition),B over A by (WhiteToPattern by Transition)" Max="">B over A by (Pattern),B over A by (Transition),B over A by (Pattern),B over A by (Transition*Pattern),B over A by (WhiteToBlack),B over A by (PatternToBlack by Transition),B over A by (WhiteToPattern by Transition)</Trans_Type>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5b965740-8c67-4f07-90b6-5248856ddceb}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Transition</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{9720da81-df43-4491-983a-9e42bde675f6}</uuidString>
         <position Type="QPointF">1419.23,178.524</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Transition:0,0,100,-50" Type="QString" map1="Pattern:0,0,-100,-50" map2="A:0,0,-30,-50" map3="B:0,0,30,-50" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d5ddfc5a-770f-4941-a80f-8ea24212f0f9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    float alpha = 0;
    vec4 A_B_unmapped = (#A-vec4(0.5))*$Contrast+vec4(0.5);
    vec4 B_Handle = ( #B == vec4(9999.0) ) ? A_B_unmapped : #B ;



    if($Trans_Type==0)
    {
      alpha = #Transition.r;
    }
    else if($Trans_Type==1)
    {
      alpha = #Pattern.r;
    }
    else if($Trans_Type==2)
    {
      alpha = #Transition.r * #Pattern.r;
    }
    else if($Trans_Type==3)
    {
      alpha = clamp(#Pattern.r + (2.0*(#Transition.r-0.5)), 0.0, 1.0);
    }
    else if($Trans_Type==4)
    {
      alpha = Comp_Default( vec4(0.0,0.0,0.0,1.0), #Pattern, #Transition.r).r;
    }
    else if($Trans_Type==5)
    {
      alpha = Comp_Default( #Pattern, vec4(1.0,1.0,1.0,1.0), #Transition.r).r;
    }



    Output = clamp( $BlendMode(#A, B_Handle, alpha),vec4(0.0),vec4(1.0) );

                </Expression>
        <m_defaultInputMap Size="8" map0="A:35632:vec4(9999.0)" Type="QString" map1="B:35632:vec4(9999.0)" map2="Pattern:35632:vec4(0.5)" map3="Transition:35632:vec4(0.5)" ContainerType="QHash" map4="A:36487:vec4(9999.0)" map5="B:36487:vec4(9999.0)" map6="Pattern:36487:vec4(0.5)" map7="Transition:36487:vec4(0.5)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{696572ff-7a76-4834-b842-bff659161bcf}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    float alpha = 0;
    vec4 A_B_unmapped = (#A-vec4(0.5))*$Contrast+vec4(0.5);
    vec4 B_Handle = ( #B == vec4(9999.0) ) ? A_B_unmapped : #B ;



    if($Trans_Type==0)
    {
      alpha = #Transition.r;
    }
    else if($Trans_Type==1)
    {
      alpha = #Pattern.r;
    }
    else if($Trans_Type==2)
    {
      alpha = #Transition.r * #Pattern.r;
    }
    else if($Trans_Type==3)
    {
      alpha = clamp(#Pattern.r + (2.0*(#Transition.r-0.5)), 0.0, 1.0);
    }
    else if($Trans_Type==4)
    {
      alpha = Comp_Default( vec4(0.0,0.0,0.0,1.0), #Pattern, #Transition.r).r;
    }
    else if($Trans_Type==5)
    {
      alpha = Comp_Default( #Pattern, vec4(1.0,1.0,1.0,1.0), #Transition.r).r;
    }



    Output = clamp( $BlendMode(#A, B_Handle, alpha),vec4(0.0),vec4(1.0) );

                </Expression>
        <m_defaultInputMap Size="8" map0="A:35632:vec4(9999.0)" Type="QString" map1="B:35632:vec4(9999.0)" map2="Pattern:35632:vec4(0.5)" map3="Transition:35632:vec4(0.5)" ContainerType="QHash" map4="A:36487:vec4(9999.0)" map5="B:36487:vec4(9999.0)" map6="Pattern:36487:vec4(0.5)" map7="Transition:36487:vec4(0.5)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a77998ba-cfb9-4d63-b468-a1344335a439}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    float alpha = 0;
    vec4 A_B_unmapped = (#A-vec4(0.5))*$Contrast+vec4(0.5);
    vec4 B_Handle = ( #B == vec4(9999.0) ) ? A_B_unmapped : #B ;



    if($Trans_Type==0)
    {
      alpha = #Transition.r;
    }
    else if($Trans_Type==1)
    {
      alpha = #Pattern.r;
    }
    else if($Trans_Type==2)
    {
      alpha = #Transition.r * #Pattern.r;
    }
    else if($Trans_Type==3)
    {
      alpha = clamp(#Pattern.r + (2.0*(#Transition.r-0.5)), 0.0, 1.0);
    }
    else if($Trans_Type==4)
    {
      alpha = Comp_Default( vec4(0.0,0.0,0.0,1.0), #Pattern, #Transition.r).r;
    }
    else if($Trans_Type==5)
    {
      alpha = Comp_Default( #Pattern, vec4(1.0,1.0,1.0,1.0), #Transition.r).r;
    }



    Output = clamp( $BlendMode(#A, B_Handle, alpha),vec4(0.0),vec4(1.0) );

                </Expression>
        <m_defaultInputMap Size="8" map0="A:35632:vec4(9999.0)" Type="QString" map1="B:35632:vec4(9999.0)" map2="Pattern:35632:vec4(0.5)" map3="Transition:35632:vec4(0.5)" ContainerType="QHash" map4="A:36487:vec4(9999.0)" map5="B:36487:vec4(9999.0)" map6="Pattern:36487:vec4(0.5)" map7="Transition:36487:vec4(0.5)"/>
       </GLSL>
       <m_input2node Size="4" map0="A:{7a97f23d-44d6-4bbe-af63-54362916fce5}:Output" Type="QString" map1="B:{8bcda77a-7e52-465a-b290-361161baee5b}:Output" map2="Pattern:{d53381aa-ac0e-41cc-96d5-1407f60720b3}:Output" map3="Transition::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Cloud 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{fec48ee2-f7ff-4af6-a70f-0691bb29e7d5}</uuidString>
       <prefferedInput Type="QString">Position</prefferedInput>
       <preferredInput Type="QString">Position</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Cloud 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString">Cloud pattern generated from multiple octaves of Perlin Noise</description>
       <nodeAttributes Type="QStringList">/Size,/Roughness,Color/colorA,Color/colorB,Offsets/XOffset,Offsets/YOffset,Offsets/ZOffset</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.1</cost>
       <costDescription Type="QString">Texture reads</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Procedural_Fractal_Cloud</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0575400a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Roughness TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Roughness" GroupHints="1" PrettyName="Roughness" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.546000025933608</Roughness>
       <Size TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Size" GroupHints="1" PrettyName="Size" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.577000027406029</Size>
       <XOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="XOffset" GroupHints="1" PrettyName="X Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100000">0</XOffset>
       <YOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="YOffset" GroupHints="1" PrettyName="Y Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100000">0</YOffset>
       <ZOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="ZOffset" GroupHints="1" PrettyName="Z Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100000">0</ZOffset>
       <colorA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="colorA" GroupHints="1" PrettyName="Color A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(1,1,1,1)" Max="">(1,1,1,1)</colorA>
       <colorB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(0,0,0,1)" AttribName="colorB" GroupHints="1" PrettyName="Color B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(0,0,0,1)" Max="">(0,0,0,1)</colorB>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b035b17e-b0a7-4fc0-a89c-5ec674b20da4}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Cloud 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{de015a13-9492-46e3-87f5-73314d9b8b9c}</uuidString>
         <position Type="QPointF">274.559,125.243</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{27303133-3294-4647-b2dd-1aac5ade0b48}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float size = $Size;
    float roughness = $Roughness;
    vec3 seed = #Position.xyz + vec3($XOffset,$YOffset,$ZOffset);
    float noise_val = 0.0;
    float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;
    float sharpness = log2(1.0+99.0*roughness)/log2(100.0);
    for(int i=0;i&lt;10;i++)
    {
        vec3 scaled_seed = pow(2.0,float(i)) * seed.rgb / size_pow;
        noise_val += noise(scaled_seed)/pow(5.0-4.0*sharpness,float(i));
    }
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{1df04dc2-aa18-4393-926e-a86d7acab585}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float size = $Size;
    float roughness = $Roughness;
    vec3 seed = #Position.xyz + vec3($XOffset,$YOffset,$ZOffset);
    float noise_val = 0.0;
    float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;
    float sharpness = log2(1.0+99.0*roughness)/log2(100.0);
    for(int i=0;i&lt;10;i++)
    {
        vec3 scaled_seed = pow(2.0,float(i)) * seed.rgb / size_pow;
        noise_val += noise(scaled_seed)/pow(5.0-4.0*sharpness,float(i));
    }
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{40fbdd45-80f8-4a51-b153-917e1a28c478}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float size = $Size;
    float roughness = $Roughness;
    vec3 seed = #Position.xyz + vec3($XOffset,$YOffset,$ZOffset);
    float noise_val = 0.0;
    float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;
    float sharpness = log2(1.0+99.0*roughness)/log2(100.0);
    for(int i=0;i&lt;10;i++)
    {
        vec3 scaled_seed = pow(2.0,float(i)) * seed.rgb / size_pow;
        noise_val += noise(scaled_seed)/pow(5.0-4.0*sharpness,float(i));
    }
    noise_val = noise_val*0.5 + 0.5;
    Output = mix($colorB,$colorA,noise_val);
                </Expression>
        <m_defaultInputMap Size="2" map0="Position:35632:State.Position" Type="QString" map1="Position:36487:State.Position" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Position:{81ca0979-b27b-44fb-9a77-2ddf586778fc}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Manifold 3D 3</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{81ca0979-b27b-44fb-9a77-2ddf586778fc}</uuidString>
       <prefferedInput Type="QString">Coordinates</prefferedInput>
       <preferredInput Type="QString">Coordinates</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Manifold 3D 3</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Transform Scale/WorldScale,Transform Scale/scaleX,Transform Scale/scaleY,Transform Scale/scaleZ,Transform Rotate/rotateX,Transform Rotate/rotateY,Transform Rotate/rotateZ,Transform Translate/transX,Transform Translate/transY,Transform Translate/transZ</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Transform3D</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0fabaaca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <WorldScale TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="WorldScale" GroupHints="1" PrettyName="WorldScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</WorldScale>
       <rotateX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateX>
       <rotateY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateY>
       <rotateZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateZ>
       <scaleX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleX" GroupHints="1" PrettyName="Scale X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">2.72384</scaleX>
       <scaleY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleY" GroupHints="1" PrettyName="Scale Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">18.6113</scaleY>
       <scaleZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleZ" GroupHints="1" PrettyName="Scale Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">3.33404</scaleZ>
       <transX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transX" GroupHints="1" PrettyName="Translate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transX>
       <transY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transY" GroupHints="1" PrettyName="Translate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transY>
       <transZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transZ" GroupHints="1" PrettyName="Translate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transZ>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{56d48d13-2ec6-4a5c-9e85-35ae79e1c9d6}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Manifold 3D 3</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{39cd303d-aca9-4210-bc2d-49608da6fcbd}</uuidString>
         <position Type="QPointF">274.969,46.5522</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Scale:0,0,-100,30" Type="QString" map1="Coordinates:0,0,0,-50" map2="Rotate:0,0,-100,0" map3="Translate:0,0,-100,-30" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a3ae357f-064f-4b6f-9589-b47925cdc4be}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{e820d7d1-ffd1-4f3b-abed-be61b1806ef5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{baa698d2-38de-4323-84ab-a67c6741fe78}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <m_input2node Size="4" map0="Coordinates:{9d994a02-ba6f-4ec0-8b32-6d1a50741933}:Output" Type="QString" map1="Scale::Output" map2="Rotate::Output" map3="Translate::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Type="QString" ContainerType="QHash" Coordinates="3D Coordinates"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Histogram Scan 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{9e1d5a47-505c-48a6-a5f6-e801129675a6}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Histogram Scan 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.0940000044647604</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.77300003671553</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8b35b911-a702-44e0-8c34-db2d30daab93}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Histogram Scan 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{1148973a-508d-4faa-829d-1c4b42b3bc48}</uuidString>
         <position Type="QPointF">798.429,185.629</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{4f5cd5de-66fa-451f-93dd-60949d5b74bf}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{3bf68f30-0542-44b6-9984-6462ad87c7ff}:Output" Type="QString" map1="Position:{05ff2293-061e-4f0f-b034-1569c04665f3}:Output" map2="Contrast:{fbac6b79-5293-4133-854b-906d5a5c7b80}:Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Merge</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{dbf50971-6438-47d0-96c4-c1f161e119d6}</uuidString>
       <prefferedInput Type="QString">Base</prefferedInput>
       <preferredInput Type="QString">Base</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">true</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Merge</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/BlendMode,/Amount,Advanced/AmountEnabled,Advanced/AdvancedEnabled,Advanced/Component,Advanced/BlendIfThis,Advanced/BlendIfBelow,Swizzle/SwizzleR,Swizzle/SwizzleG,Swizzle/SwizzleB,Swizzle/SwizzleA</nodeAttributes>
       <tags Type="QStringList">_blend</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.03</cost>
       <costDescription Type="QString">Some calculations</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Layer_Merge</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">053ff12a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <AdvancedEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Basic,Advanced" AttribName="AdvancedEnabled" GroupHints="1" PrettyName="Blending" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Basic,Advanced" Max="">0,0,1,Basic,Advanced</AdvancedEnabled>
       <Amount TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Amount" GroupHints="1" PrettyName="Amount" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</Amount>
       <AmountEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="1,0,1,Disable,Enable" AttribName="AmountEnabled" GroupHints="1" PrettyName="Amount Enabled" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1,0,1,Disable,Enable" Max="">1,0,1,Disable,Enable</AmountEnabled>
       <BlendIfBelow TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfBelow" GroupHints="1" PrettyName="Below Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfBelow>
       <BlendIfThis TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfThis" GroupHints="1" PrettyName="This Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfThis>
       <BlendMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" AttribName="BlendMode" GroupHints="1" PrettyName="Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" Max="">Comp_Multiply,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps</BlendMode>
       <Component TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" AttribName="Component" GroupHints="1" PrettyName="Component" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" Max="">0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance</Component>
       <SwizzleA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleA" GroupHints="1" PrettyName="Swizzle Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleA>
       <SwizzleB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleB" GroupHints="1" PrettyName="Swizzle Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleB>
       <SwizzleG TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleG" GroupHints="1" PrettyName="Swizzle Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleG>
       <SwizzleR TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleR" GroupHints="1" PrettyName="Swizzle Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleR>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{073e3dc1-32aa-4d24-bcdd-27168b413ed5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Merge</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{64aa04b2-761d-4680-a817-bcfd80ca7988}</uuidString>
         <position Type="QPointF">950.199,328.382</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <ModoRender Type="MriSnStandardContext">
        <objectName Type="QString">ModoRender</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f98800a2-b3ce-4d39-abe7-bf5a754b5ff4}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <supportedAttributes Type="QStringList"/>
        <MriNodeContextPropertyVisible TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="MriNodeContextPropertyVisible" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</MriNodeContextPropertyVisible>
        <PythonCommands TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="QString" Reset="" AttribName="PythonCommands" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">
blendAmount = node.metadata("Amount")

# Create BlendAmount as input so that we can use it as an input into internal nodes
lx.eval('!channel.create BlendAmount mode:float item:%s username:BlendAmount' % groupId )
lx.eval('!assembly.assignChannel input {%s:BlendAmount}' % groupId )
lx.eval('!item.channel BlendAmount %s' % blendAmount)

# Alpha Blend a+b-ab

# b = Mask.r * BlendAmount * Over.a
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b0 = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b0,groupId,-10,-10) )
lx.eval('!channel.link add {%s:Mask.R} {%s:input1}' % (groupId,b0) )
lx.eval('!channel.link add {%s:BlendAmount} {%s:input2}' % (groupId,b0) )

lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b,groupId,0,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (b0,b) )
lx.eval('!channel.link add {%s:Over.A} {%s:input2}' % (groupId,b) )

# a+b
lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
apb = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (apb,groupId,10,-10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,apb) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,apb) )

# ab
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
ab = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (ab,groupId,10,10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,ab) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,ab) )

# (a+b)-(ab)
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
alphaBlend = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlend,groupId,20,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (apb,alphaBlend) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,alphaBlend) )

# Check if the alphaBlend alpha value is 0
lx.eval('!channelModifier.create "cmLogic:notEqual" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmLogic.N ?')
alphaBlendCheck = lx.eval1('!query sceneservice cmLogic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlendCheck,groupId,40,0) )

lx.eval('!shaderNode.create constant')
lx.eval('!item.channel constant$value %s' % 0.0 )
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
zero = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (zero,groupId,20,10) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (zero, alphaBlendCheck ) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend, alphaBlendCheck ) )

# Create constant 1.0 for inverting mask
lx.eval('!shaderNode.create constant')
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
one = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (one,groupId,20,20) )

# Inverted AlphaBlendCheck
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
invertedAlphaBlendCheck = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (invertedAlphaBlendCheck,groupId,50,20) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (one,invertedAlphaBlendCheck) )
lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,invertedAlphaBlendCheck) )


# (a - ab) * Base.rgb + Over.a * Over.rgb
# a - ab
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
baseScalar = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseScalar,groupId,20,-20) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,baseScalar) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,baseScalar) )

components = ["R","G","B"]
componentOuts = []

for i in range(3):
    component = components[i]

    #(a - ab) * Base.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseMultiplied,groupId,40,-60+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseScalar,baseMultiplied) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input2}' % (groupId,component,baseMultiplied) )

    # b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overMultiplied,groupId,40,-50+20*i) )
    lx.eval('!channel.link add {%s:Over.%s} {%s:input1}' % (groupId,component,overMultiplied) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,overMultiplied) )

    # (a - ab) * Base.rgb + b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    colorAdded = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (colorAdded,groupId,50,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseMultiplied,colorAdded) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (overMultiplied,colorAdded) )

    # ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab)

    lx.eval('!channelModifier.create "cmMathBasic:div" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    divided = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (divided,groupId,60,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (colorAdded,divided) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend,divided) )

    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * AlphaBlendCheck
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overTimesMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overTimesMask,groupId,70,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (divided,overTimesMask) )
    lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,overTimesMask) )

    # Base.rgb * (1 - AlphaBlendCheck)
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseTimesInvertedMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseTimesInvertedMask,groupId,70,-45+20*i) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input1}' % (groupId,component,baseTimesInvertedMask) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (invertedAlphaBlendCheck,baseTimesInvertedMask) )

    # If the new alpha is 0, return Base otherwise the blended color
    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * Mask
    #       +
    # Base.rgb * (1 - Mask)
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    finalAdd = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (finalAdd,groupId,80,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (overTimesMask,finalAdd) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (baseTimesInvertedMask,finalAdd) )

    componentOuts.append(finalAdd)

# Connect to assembly output
lx.eval('!channel.link add {%s:output} {%s:Output.R}' % (componentOuts[0],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.G}' % (componentOuts[1],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.B}' % (componentOuts[2],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.A}' % (alphaBlend,groupId) )

# Set the default values for Mask to be (1,1,1,1)
lx.eval('channel.value 1.0 channel:{%s:Mask.R}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.G}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.B}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.A}' % groupId)
</PythonCommands>
       </ModoRender>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d9652b17-772c-4e6d-a535-c9751ad17428}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    if( 0 != $AdvancedEnabled)
    {
        // this is used to control what component we are pulling the key from
        vec3 Mult[5];

        Mult[0] = vec3(1.0/3.0,1.0/3.0,1.0/3.0);
        Mult[1] = vec3(1,0,0);
        Mult[2] = vec3(0,1,0);
        Mult[3] = vec3(0,0,1);
        Mult[4] = vec3(0.2126,0.7152,0.0722);


        // Calculate the amount from the component
        // a Mult value of (1,0,0) will isolate the red value
        // A mult value of (1,1,1) will give a gray scale

        float ThisAmount = dot(#Over.rgb , Mult[$Component]);
        float BelowAmount = dot(#Base.rgb , Mult[$Component]);

        // now that we've pulled the component out of above and below
        // we lookup into the lut to find out the amount to scale the alpha values by

        float ThisAlpha  = mriCurveLookup($BlendIfThis,ThisAmount);
        float BelowAlpha = mriCurveLookup($BlendIfBelow,BelowAmount);

        // now we multiply the base alpha value by both values

        float AdvancedBlendAmount = ThisAlpha * BelowAlpha;
        if( 0 != $AmountEnabled)
        {
            AdvancedBlendAmount *= $Amount;
        }

        Output = $BlendMode(#Base, #Over, #Mask.r * AdvancedBlendAmount);
    }
    else
    {
        float BlendAmount = 1;
        if( 0 != $AmountEnabled)
        {
            BlendAmount *= $Amount;
        }
        Output = $BlendMode(#Base, #Over, BlendAmount * #Mask.r);
    }

    Output = vec4( $SwizzleR, $SwizzleG, $SwizzleB, $SwizzleA);

                </Expression>
        <m_defaultInputMap Size="1" map0="Mask:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Base:{9515164c-5961-470e-a7c1-cbed20d89106}:Output" Type="QString" map1="Over:{359e57db-3491-48a1-963d-1d16c53476bf}:Output" map2="Mask::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 4</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{359e57db-3491-48a1-963d-1d16c53476bf}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 4</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{68dc0251-e0fb-4647-8645-5ba037ad9ea5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{dc5ffcd0-08e5-474d-ac7f-269536a3606a}</uuidString>
         <position Type="QPointF">1065.66,46.1241</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{404cdd97-dce8-4407-b548-c6ebcb2e005c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{9053577a-760a-4c44-aba5-a52e1d6d1957}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 5</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{9515164c-5961-470e-a7c1-cbed20d89106}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 5</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{c8eefb74-5b08-4aa8-83c5-7938fb45a25a}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{21cea082-861f-4e47-b40c-e042460b566a}</uuidString>
         <position Type="QPointF">866.879,329.721</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{c3da06ac-e4ff-4719-81bf-205fa27c118d}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{9e1d5a47-505c-48a6-a5f6-e801129675a6}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 6</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{6905b3bf-1218-46a3-853f-4fd0c17ee7cf}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 6</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{2471df2f-1f16-440a-84a8-0abb9ce23b8e}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{4978a1ca-5712-47ac-9dfe-e288b5002b5f}</uuidString>
         <position Type="QPointF">1240.13,335.861</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{43cedcfc-f8dd-4e4e-841d-51a4453a16b3}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{dbf50971-6438-47d0-96c4-c1f161e119d6}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 7</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{7a97f23d-44d6-4bbe-af63-54362916fce5}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 7</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a2847857-9c24-4cac-8655-1aaabaf03e53}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{e9f8c02b-cf7d-45fc-9dbd-e370b4ad4d27}</uuidString>
         <position Type="QPointF">1243.04,180.281</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{943f68fa-2d0f-4f38-8829-84a53240a818}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{6905b3bf-1218-46a3-853f-4fd0c17ee7cf}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Central Size Control</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{9d994a02-ba6f-4ec0-8b32-6d1a50741933}</uuidString>
       <prefferedInput Type="QString">Coordinates</prefferedInput>
       <preferredInput Type="QString">Coordinates</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Central Size Control</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Transform Scale/WorldScale,Transform Scale/scaleX,Transform Scale/scaleY,Transform Scale/scaleZ,Transform Rotate/rotateX,Transform Rotate/rotateY,Transform Rotate/rotateZ,Transform Translate/transX,Transform Translate/transY,Transform Translate/transZ</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Transform3D</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0fabaaca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <WorldScale TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="WorldScale" GroupHints="1" PrettyName="WorldScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">0.1</WorldScale>
       <rotateX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateX>
       <rotateY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateY>
       <rotateZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="rotateZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rotateZ>
       <scaleX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleX" GroupHints="1" PrettyName="Scale X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">1.009</scaleX>
       <scaleY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleY" GroupHints="1" PrettyName="Scale Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">1.62727</scaleY>
       <scaleZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="scaleZ" GroupHints="1" PrettyName="Scale Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">0.495536</scaleZ>
       <transX TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transX" GroupHints="1" PrettyName="Translate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transX>
       <transY TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transY" GroupHints="1" PrettyName="Translate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transY>
       <transZ TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="transZ" GroupHints="1" PrettyName="Translate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</transZ>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5def544f-e5b0-4f1a-be0d-8756222192a8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Central Size Control</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{ac6ea757-544c-42d8-a44b-e6e6b2b0d910}</uuidString>
         <position Type="QPointF">-33.2311,-86.3288</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Scale:0,0,-100,30" Type="QString" map1="Coordinates:0,0,0,-50" map2="Rotate:0,0,-100,0" map3="Translate:0,0,-100,-30" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{897cc629-9f49-4435-8f71-d580bd87099d}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{61bc756e-d1d7-4164-897c-37f507ad6c56}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{01009a1c-83b1-4bfd-8939-356b9dadd0e6}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Initialize Sliders
    float INIT = $scaleX; INIT = $scaleY; INIT = $scaleZ; INIT = $WorldScale;
    INIT = $rotateX; INIT = $rotateY; INIT = $rotateZ;
    INIT = $transX; INIT = $transY; INIT = $transZ;


    Output =  vec4( positionTransform(#Coordinates.xyz,#Translate.xyz,#Rotate.xyz,vec3(1.0)/#Scale.xyz),1.0);

                </Expression>
        <m_defaultInputMap Size="8" map0="Coordinates:35632:vec4(State.Position,1.0)" Type="QString" map1="Rotate:35632:vec4($rotateX,$rotateY,$rotateZ,1.0)" map2="Scale:35632:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map3="Translate:35632:vec4($transX,$transY,$transZ,1.0)" ContainerType="QHash" map4="Coordinates:36487:vec4(State.Position,1.0)" map5="Rotate:36487:vec4($rotateX,$rotateY,$rotateZ,1.0)" map6="Scale:36487:vec4( vec3($scaleX,$scaleY,$scaleZ) * vec3($WorldScale),1.0)" map7="Translate:36487:vec4($transX,$transY,$transZ,1.0)"/>
       </GLSL>
       <m_input2node Size="4" map0="Coordinates::Output" Type="QString" map1="Scale::Output" map2="Rotate::Output" map3="Translate::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Type="QString" ContainerType="QHash" Coordinates="3D Coordinates"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Histogram Scan 3</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{32323150-34cd-4f1d-89bf-4b2b450877cd}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Histogram Scan 3</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.395000018761493</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.847000040230341</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{eff1421a-3969-4637-9255-2ef705028125}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Histogram Scan 3</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{2a05851b-dfe3-4239-a9f5-a2732be9cf50}</uuidString>
         <position Type="QPointF">1174.93,69.7371</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{cc673812-adaa-48c2-9a3a-445212ec44ce}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{7a97f23d-44d6-4bbe-af63-54362916fce5}:Output" Type="QString" map1="Position:{1faa88ad-0361-49cd-b4af-415c7b1285b9}:Output" map2="Contrast::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 8</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{5976595d-ad31-4385-b212-895f53e306d0}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 8</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ed9d3b1d-b1dd-4666-8479-eb41a7ee73f7}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{b7e6e5cf-079f-49fb-b00c-2263bd570d4d}</uuidString>
         <position Type="QPointF">1421.12,74.4181</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ce5758b4-3f37-43f7-a725-770ed71fd53b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{32323150-34cd-4f1d-89bf-4b2b450877cd}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Multi FBM</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{817790e0-d5b9-430b-95a5-d9fc5c811d4a}</uuidString>
       <prefferedInput Type="QString">Transform</prefferedInput>
       <preferredInput Type="QString">Transform</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Multi FBM</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Color/colorA,Color/colorB,Base/Size,Base/octaves,Base/lacunarity,Base/Amp,Base/FreqOffset,Base/SeedBase,Base/gain,Base/Threshold,Base/Clip,Base/Absolut,Base/clamp,Base/Invert,Handle A/PreviewA,Handle A/HandleA,Handle A/ASize,Handle A/AOctaves,Handle A/ALacunarity,Handle A/Aamp,Handle A/AFreqOffset,Handle A/AGain,Handle A/SeedA,Handle A/nMinA,Handle A/nMaxA,Handle A/ClipA,Handle A/EnforceA,Handle B/PreviewB,Handle B/HandleB,Handle B/BSize,Handle B/BOctaves,Handle B/BLacunarity,Handle B/Bamp,Handle B/BFreqOffset,Handle B/BGain,Handle B/SeedB,Handle B/nMinB,Handle B/nMaxB,Handle B/ClipB,Handle B/EnforceB,Transform Space/uv,Transform Space/trB,Transform Space/trhA,Transform Space/trhB,Transform Scale/XScale,Transform Scale/YScale,Transform Scale/ZScale,Transform Rotate/rX,Transform Rotate/rY,Transform Rotate/rZ,Transform Translate/XOffset,Transform Translate/YOffset,Transform Translate/ZOffset</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Multi fBm</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">08934bca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <AFreqOffset TypeFlags="0" Enabled="true" Visible="true" Min="0.0001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="AFreqOffset" GroupHints="1" PrettyName="Offset" ItemList="" Step="" Description="Frequency Offset for HandleA" Flags="31" Removeable="true" Default="0.5" Max="1">0.372100017666526</AFreqOffset>
       <AGain TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="AGain" GroupHints="1" PrettyName="AGain" ItemList="" Step="" Description="Each successive octave gets multiplied gain*amplitude, smaller values result in less contrast for the overal result" Flags="31" Removeable="true" Default="1" Max="1">1</AGain>
       <ALacunarity TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="4" AttribName="ALacunarity" GroupHints="1" PrettyName="ALacunarity" ItemList="" Step="" Description="Frequency spacing between successive octaves" Flags="31" Removeable="true" Default="4" Max="8">3.17400015075691</ALacunarity>
       <AOctaves TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="3" AttribName="AOctaves" GroupHints="1" PrettyName="AOctaves" ItemList="" Step="" Description="Visual complexitity of noise" Flags="31" Removeable="true" Default="3" Max="8">5.62</AOctaves>
       <ASize TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="ASize" GroupHints="1" PrettyName="ASize" ItemList="" Step="" Description="The general feature size for HandleA" Flags="31" Removeable="true" Default="0.5" Max="1">0.231000010971911</ASize>
       <Aamp TypeFlags="0" Enabled="true" Visible="true" Min="0.0001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Aamp" GroupHints="1" PrettyName="Aamplitude" ItemList="" Step="" Description="Each successive octave gets multiplied gain*amplitude, smaller values result in less contrast between frequencies" Flags="31" Removeable="true" Default="0.5" Max="1">0.711100033768162</Aamp>
       <Absolut TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Absolut" GroupHints="1" PrettyName="Absolute Values" ItemList="" Step="" Description="By default positive and negative noise values will all be treated as positive making for a denser noise. This will remove any negative noise values" Flags="31" Removeable="true" Default="false" Max="true">false</Absolut>
       <Amp TypeFlags="0" Enabled="true" Visible="true" Min="0.0001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Amp" GroupHints="1" PrettyName="amplitude" ItemList="" Step="" Description="Each successive octave gets multiplied gain*amplitude, smaller values result in less contrast between frequencies" Flags="31" Removeable="true" Default="0.5" Max="1">0.438100020801357</Amp>
       <BFreqOffset TypeFlags="0" Enabled="true" Visible="true" Min="0.0001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="BFreqOffset" GroupHints="1" PrettyName="Offset" ItemList="" Step="" Description="Frequency Offset HandleB" Flags="31" Removeable="true" Default="0.5" Max="1">0.5</BFreqOffset>
       <BGain TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="BGain" GroupHints="1" PrettyName="BGain" ItemList="" Step="" Description="Each successive octave gets multiplied gain*amplitude, smaller values result in less contrast for the overal result" Flags="31" Removeable="true" Default="1" Max="1">1</BGain>
       <BLacunarity TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="4" AttribName="BLacunarity" GroupHints="1" PrettyName="BLacunarity" ItemList="" Step="" Description="Frequency spacing between successive octaves" Flags="31" Removeable="true" Default="4" Max="8">4</BLacunarity>
       <BOctaves TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="3" AttribName="BOctaves" GroupHints="1" PrettyName="BOctaves" ItemList="" Step="" Description="Visual complexitity of noise" Flags="31" Removeable="true" Default="3" Max="8">3</BOctaves>
       <BSize TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="BSize" GroupHints="1" PrettyName="BSize" ItemList="" Step="" Description="The general feature size for HandleB" Flags="31" Removeable="true" Default="0.5" Max="1">0.331000015721656</BSize>
       <Bamp TypeFlags="0" Enabled="true" Visible="true" Min="0.0001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Bamp" GroupHints="1" PrettyName="Bamplitude" ItemList="" Step="" Description="Each successive octave gets multiplied gain*amplitude, smaller values result in less contrast between frequencies" Flags="31" Removeable="true" Default="0.5" Max="1">0.5</Bamp>
       <Clip TypeFlags="0" Enabled="true" Visible="true" Min="0.001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.6" AttribName="Clip" GroupHints="1" PrettyName="Soft Clip Result" ItemList="" Step="" Description="extends the threshold box by a fixed value up and down" Flags="31" Removeable="true" Default="0.6" Max="1">0.45500002161134</Clip>
       <ClipA TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="ClipA" GroupHints="1" PrettyName="Negative as black" ItemList="" Step="" Description="By default positive and negative noise values will all be treated as positive making for a denser noise. This will remove any negative noise values" Flags="31" Removeable="true" Default="false" Max="true">false</ClipA>
       <ClipB TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="ClipB" GroupHints="1" PrettyName="Negative as black" ItemList="" Step="" Description="By default positive and negative noise values will all be treated as positive making for a denser noise. This will remove any negative noise values" Flags="31" Removeable="true" Default="false" Max="true">false</ClipB>
       <EnforceA TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="EnforceA" GroupHints="1" PrettyName="Negative as transparent" ItemList="" Step="" Description="When Clip Negative is turned on, this will enforce the clipped areas trhoughout the entire fractal, so any further modification only affects the existing shapes" Flags="31" Removeable="true" Default="false" Max="true">false</EnforceA>
       <EnforceB TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="EnforceB" GroupHints="1" PrettyName="Negative as transparent" ItemList="" Step="" Description="When Clip Negative is turned on, this will enforce the clipped areas trhoughout the entire fractal, so any further modification only affects the existing shapes. This can work in combination with Propagate Additive" Flags="31" Removeable="true" Default="false" Max="true">false</EnforceB>
       <FreqOffset TypeFlags="0" Enabled="true" Visible="true" Min="0.0001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="FreqOffset" GroupHints="1" PrettyName="Offset" ItemList="" Step="" Description="Frequency Offset" Flags="31" Removeable="true" Default="0.5" Max="1">0.769100036523014</FreqOffset>
       <HandleA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriStringList" Reset="Octave,None,Size,Octave,Lacunarity,amplitude,Offset,Gain" AttribName="HandleA" GroupHints="1" PrettyName="HandleA" ItemList="" Step="" Description="Which feature from Base Noise to be driven by secondary noise" Flags="31" Removeable="true" Default="Octave,None,Size,Octave,Lacunarity,amplitude,Offset,Gain" Max="">Octave,None,Size,Octave,Lacunarity,amplitude,Offset,Gain</HandleA>
       <HandleB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriStringList" Reset="None,None,Size,Octave,Lacunarity,amplitude,Offset,Gain" AttribName="HandleB" GroupHints="1" PrettyName="HandleB" ItemList="" Step="" Description="Which feature from Base Noise to be driven by tertiary noise" Flags="31" Removeable="true" Default="None,None,Size,Octave,Lacunarity,amplitude,Offset,Gain" Max="">None,None,Size,Octave,Lacunarity,amplitude,Offset,Gain</HandleB>
       <Invert TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Invert" GroupHints="1" PrettyName="Invert" ItemList="" Step="" Description="Inverts the Noise result before ColorA+B are applied" Flags="31" Removeable="true" Default="false" Max="true">false</Invert>
       <PreviewA TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="PreviewA" GroupHints="1" PrettyName="Preview Handle A" ItemList="" Step="" Description="Shows you the Result from the Fractal in Handle A" Flags="31" Removeable="true" Default="false" Max="true">false</PreviewA>
       <PreviewB TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="PreviewB" GroupHints="1" PrettyName="Preview Handle B" ItemList="" Step="" Description="Shows you the Result from the Fractal in Handle B" Flags="31" Removeable="true" Default="false" Max="true">false</PreviewB>
       <SeedA TypeFlags="1" Enabled="true" Visible="true" Min="1" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="SeedA" GroupHints="1" PrettyName="Seed A" ItemList="" Step="" Description="Randomize position" Flags="31" Removeable="true" Default="1" Max="100000">1</SeedA>
       <SeedB TypeFlags="1" Enabled="true" Visible="true" Min="1" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="SeedB" GroupHints="1" PrettyName="Seed B" ItemList="" Step="" Description="Randomize position" Flags="31" Removeable="true" Default="1" Max="100000">1</SeedB>
       <SeedBase TypeFlags="1" Enabled="true" Visible="true" Min="1" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="SeedBase" GroupHints="1" PrettyName="Seed" ItemList="" Step="" Description="frequency" Flags="31" Removeable="true" Default="1" Max="100000">1</SeedBase>
       <Size TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.4" AttribName="Size" GroupHints="1" PrettyName="Size" ItemList="" Step="" Description="The general feature size" Flags="31" Removeable="true" Default="0.4" Max="1">0.835000039660372</Size>
       <Threshold TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.1" AttribName="Threshold" GroupHints="1" PrettyName="Threshold" ItemList="" Step="" Description="Threshold of final result" Flags="31" Removeable="true" Default="0.1" Max="1">0.521000024746172</Threshold>
       <XOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="XOffset" GroupHints="1" PrettyName="Translate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</XOffset>
       <XScale TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="XScale" GroupHints="1" PrettyName="Scale X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">1.36945110488263</XScale>
       <YOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="YOffset" GroupHints="1" PrettyName="Translate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</YOffset>
       <YScale TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="YScale" GroupHints="1" PrettyName="Scale Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">0.751963471674891</YScale>
       <ZOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="ZOffset" GroupHints="1" PrettyName="Translate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</ZOffset>
       <ZScale TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="ZScale" GroupHints="1" PrettyName="Scale Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">1</ZScale>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="clamp" GroupHints="1" PrettyName="Clamp Output" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</clamp>
       <colorA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="colorA" GroupHints="1" PrettyName="Color A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(1,1,1,1)" Max="">(1,1,1,1)</colorA>
       <colorB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(0,0,0,1)" AttribName="colorB" GroupHints="1" PrettyName="Color B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(0,0,0,1)" Max="">(0,0,0,1)</colorB>
       <gain TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="gain" GroupHints="1" PrettyName="gain" ItemList="" Step="" Description="Each successive octave gets multiplied gain*amplitude, smaller values result in less contrast for the overal result" Flags="31" Removeable="true" Default="1" Max="1">1</gain>
       <lacunarity TypeFlags="0" Enabled="true" Visible="true" Min="0.001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="4" AttribName="lacunarity" GroupHints="1" PrettyName="lacunarity" ItemList="" Step="" Description="Frequency spacing between successive octaves" Flags="31" Removeable="true" Default="4" Max="8">7.07400033599697</lacunarity>
       <nMaxA TypeFlags="0" Enabled="true" Visible="true" Min="0.001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1.2" AttribName="nMaxA" GroupHints="1" PrettyName="New Max A" ItemList="" Step="" Description="New maximum Value for Handle A" Flags="31" Removeable="true" Default="1.2" Max="8">5.42200025753118</nMaxA>
       <nMaxB TypeFlags="0" Enabled="true" Visible="true" Min="0.001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="3.05" AttribName="nMaxB" GroupHints="1" PrettyName="New Max B" ItemList="" Step="" Description="New maximum Value for Handle B" Flags="31" Removeable="true" Default="3.05" Max="8">4.56200021668337</nMaxB>
       <nMinA TypeFlags="0" Enabled="true" Visible="true" Min="0.001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="nMinA" GroupHints="1" PrettyName="New Min A" ItemList="" Step="" Description="New minumum Value for Handle A" Flags="31" Removeable="true" Default="1" Max="8">2.38100011309143</nMinA>
       <nMinB TypeFlags="0" Enabled="true" Visible="true" Min="0.001" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="3" AttribName="nMinB" GroupHints="1" PrettyName="New Min B" ItemList="" Step="" Description="New minumum Value for Handle B" Flags="31" Removeable="true" Default="3" Max="8">4.6290002198657</nMinB>
       <octaves TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="3" AttribName="octaves" GroupHints="1" PrettyName="octaves" ItemList="" Step="" Description="Visual complexitity of noise" Flags="31" Removeable="true" Default="3" Max="8">2.248</octaves>
       <rX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rX>
       <rY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rY>
       <rZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rZ>
       <trB TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="trB" GroupHints="1" PrettyName="Base" ItemList="" Step="" Description="Applies the transformation to the base fractal" Flags="31" Removeable="true" Default="true" Max="true">true</trB>
       <trhA TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="trhA" GroupHints="1" PrettyName="Handle A" ItemList="" Step="" Description="Applies the transformation to the fractal in Handel A" Flags="31" Removeable="true" Default="true" Max="true">true</trhA>
       <trhB TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="trhB" GroupHints="1" PrettyName="Handle B" ItemList="" Step="" Description="Applies the transformation to the fractal in Handel B" Flags="31" Removeable="true" Default="true" Max="true">true</trhB>
       <uv TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="uv" GroupHints="1" PrettyName="UV Space" ItemList="" Step="" Description="Runs the noise 2d uv based, use offset/scale x/y and rotate z" Flags="31" Removeable="true" Default="false" Max="true">false</uv>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{4faaba77-2404-40e8-bc37-2735b9138e29}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Multi FBM</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{9a4a1fb1-2ae7-4f70-966f-274569349296}</uuidString>
         <position Type="QPointF">1427.49,-96.8258</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="1" map0="Transform:0,0,0,-50" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f36b6fc5-f955-4ff6-b38d-259536dddb81}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // compensate for scene size by applying eponential growth
                float size_pow = (pow(10000.0,$Size*$Size)-1.0) + 0.0001;

                // 3d space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec3 trans = (vec3($XOffset,$YOffset,$ZOffset)*size_pow);
                vec3 rotate = vec3($rX,$rY,$rZ);
                vec3 scale = vec3(1.0) / vec3($XScale,$YScale,$ZScale);

                // transform the position to translate,rotate,scale the position
                vec3 InputScaleBase3d = positionTransform(#Transform.rgb,trans,rotate,scale) / size_pow;

                // 2d uv space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec2 UVOffset = vec2($XOffset,$YOffset);
                vec2 UVScale = vec2($XScale,$YScale);

                // transform the position to translate,rotate,scale the position
                vec2 InputScaleUV = relUVTransform(State.UV,$rZ,UVOffset,UVScale,0.5,0.5)/ normalize(size_pow);

                // blend between 2d and 3d space position
                vec3 InputScaleBase = mix(InputScaleBase3d,vec3(InputScaleUV,1.0),float($uv));
                vec3 _Input = mix(State.Position,vec3(State.UV,1.0),float($uv));

                // transform base noise
                vec3 seedBaseA = InputScaleBase +vec3($SeedBase);
                vec3 seedBaseB = _Input.rgb + vec3($SeedBase);
                vec3 seedBase = mix(seedBaseB,seedBaseA,float($trB));

                // transform handle a
                vec3 seedAa = InputScaleBase + vec3($SeedA);
                vec3 seedAb = _Input.rgb + vec3($SeedA);
                vec3 seedA = mix(seedAb,seedAa,float($trhA));

                // transform handle b
                vec3 seedBa = InputScaleBase + vec3($SeedB);
                vec3 seedBb = _Input.rgb + vec3($SeedB);
                vec3 seedB = mix(seedBb,seedBa,float($trhB));

                // size for handle a
                float ASize_pow = (pow(10000.0,$ASize*$ASize)-1.0) + 0.0001;
                vec3 AScaled_seed = seedA / ASize_pow;

                // size for handle b
                float BSize_pow = (pow(10000.0,$BSize*$BSize)-1.0) + 0.0001;
                vec3 BScaled_seed = seedB / BSize_pow;

                // for propagation of negativeasblack+negativeastransparent. marking variable as 0 if handle is set to none
                int AInUse = 1;
                int BInUse = 1;

                switch($HandleA)
                {
                    case 0:
                        AInUse = 0;
                    break;
                }

                switch($HandleB)
                {
                    case 0:
                        BInUse = 0;
                    break;
                }

                // noise result from handle a
                float AOctaves = $AOctaves;
                float ALacunarity = $ALacunarity;
                float AGain = $AGain;
                float Aamp = $Aamp;
                float AFreqOffset = $AFreqOffset;
                float ANoise = rmfBm(AScaled_seed,AOctaves,ALacunarity,AGain,Aamp,AFreqOffset);

                // noise result from handle b
                float BOctaves = $BOctaves;
                float BLacunarity = $BLacunarity;
                float BGain = $BGain;
                float Bamp = $Bamp;
                float BFreqOffset = $BFreqOffset;
                float BNoise = rmfBm(BScaled_seed,BOctaves,BLacunarity,BGain,Bamp,BFreqOffset);

                // remapping noise result from handle b. adding small differential in calse newmin and new max are the same
                float nMinB = $nMinB;
                float nMaxB = $nMaxB;

                if (nMinB==nMaxB)
                {
                    nMaxB = nMaxB+0.01;
                }

                float BNew = remap(BNoise,0.0,1.0,nMinB,nMaxB,1.0);
                float BNoise_Val = BNew;

                // remapping noise result from handle a. adding small differential in calse newmin and new max are the same
                float nMinA = $nMinA;
                float nMaxA = $nMaxA;

                if (nMinA==nMaxA)
                {
                    nMaxA = nMaxA+0.01;
                }

                float ANew = remap(ANoise,0.0,1.0,nMinA,nMaxA,1.0);
                float ANoise_Val = ANew;

                // size for main noise
                vec3 scaled_seed = seedBase  / size_pow;

                // noise eval variables
                float noise_val = 0.0;
                vec3 final_seed = scaled_seed;
                float final_octaves = $octaves;
                float final_lac = $lacunarity;
                float final_gain = $gain;
                float final_amp = $Amp;
                float final_offset = $FreqOffset;

                bool black_enforceA = false;
                bool black_enforceB = false;

                // variables for marking which slots are in use, this is to allow multiplication of values. for example if handle a is mapped with octave and handle b is mapped with octave, the results will get multiplied.
                float ASizeInUse = 0.0;
                float AOctavesInUse = 0.0;
                float AGainInUse = 0.0;
                float ALacInUse = 0.0;
                float AAmpInUse = 0.0;
                float AOffsetInUse = 0.0;

                switch($HandleA)
                {
                    //NONE
                    case 0:
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = false;
                    break;

                    //SIZE
                    case 1:
                        final_seed = scaled_seed*ANoise_Val;
                        ASizeInUse = 1.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //OCTAVE
                    case 2:
                        final_octaves = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 1.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //LACUNARITY
                    case 3:
                        final_lac = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 1.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //amplitude
                    case 4:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_amp = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 1.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //OFFSET
                    case 5:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_offset = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 1.0;
                        black_enforceA = $EnforceA;
                    break;

                    //GAIN
                    case 6:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_gain = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 1.0;
                        ALacInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;
                }

                switch($HandleB)
                {
                    //NONE
                    case 0:
                        black_enforceB = false;
                    break;

                    //SIZE
                    case 1:
                        final_seed = scaled_seed*(BNoise_Val*mix(1.0,ANoise_Val,ASizeInUse));
                        black_enforceB = $EnforceB;
                    break;

                    //OCTAVES
                    case 2:
                        float tmpANoiseVal = mix(1.0,ANoise_Val,AOctavesInUse);
                        final_octaves = BNoise_Val * tmpANoiseVal;
                        black_enforceB = $EnforceB;
                    break;

                    //LACUNARITY
                    case 3:
                        final_lac = BNoise_Val*mix(1.0,ANoise_Val,ALacInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //amplitude
                    case 4:
                        final_amp = BNoise_Val*mix(1.0,ANoise_Val,AAmpInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //OFFSET
                    case 5:
                        final_offset = BNoise_Val*mix(1.0,ANoise_Val,AOffsetInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //GAIN
                    case 6:
                        final_gain = BNoise_Val*mix(1.0,ANoise_Val,AGainInUse);
                        black_enforceB = $EnforceB;
                    break;
                }

                // final noise value with inputs from noise a and noise b if mapped.
                noise_val = smoothfBm(final_seed,final_octaves,final_lac,final_gain,final_amp,final_offset);
                noise_val = mix(noise_val,abs(noise_val),float($Absolut));

                // returning 1 if noise is over 0, and 0 if noise is under 0 for negativeasblack and negativeastransparent
                float ANoiseNeg = 1.0;
                float BNoiseNeg = 1.0;

                if (black_enforceA==true || $ClipA==true)
                {
                    if (ANoise > 0.0)
                    {
                        ANoiseNeg = 1.0;
                    }else{
                        ANoiseNeg=0.0;
                    }
                }

                if (black_enforceB==true || $ClipB==true)
                {
                    if (BNoise > 0.0)
                    {
                        BNoiseNeg = 1.0;
                    }else{
                        BNoiseNeg=0.0;
                    }
                }

                //////////////////////////////////////////////////////////////////////////////////////////////////
                // to do: allow for combination of negativeastransparent and negativeasblack on both handles
                //////////////////////////////////////////////////////////////////////////////////////////////////

                // taking minumum value of two noises to determine where areas are transparent
                // when negativeasblack is on for both handles the common max value is showing
                // when negativeastransparent is on for both handles the common min value is used for transparency
                // a combination of negativeasblack on one handle and negativeastransparent on another is currently not supported
                // since that would require even more if statements. currently the used values anoiseneg and bnoiseneg get set when either negativeasblack
                // or negativeastransparent is on. there is no differentiation between the values.

                float _propagateTransparent = min(ANoiseNeg,BNoiseNeg);
                float A_B_PropagateBlackMix = max(float($ClipA),float($ClipB));
                float A_B_PropagateTransparentMix = max(float($EnforceA),float($EnforceB));
                vec4 propagateTransparent = mix(vec4(_propagateTransparent,_propagateTransparent,_propagateTransparent,1.0),vec4(_propagateTransparent),A_B_PropagateTransparentMix);

                // thresholding of result
                float finalValueA= mix(0.0,1.0,noise_val);
                float resultA = softThreshold($Threshold, $Clip*2, finalValueA);
                resultA = mix(resultA,clamp(resultA,0.0,1.0),float($clamp));

                float _invertResult = float($Invert);

                vec4 fractal = mix(mix($colorB,$colorA,resultA),mix($colorA,$colorB,resultA),_invertResult)*propagateTransparent;

                // if preview is active show pure result from handlea noise or handleb noise
                if ($PreviewA==true)
                {
                    fractal = mix(vec4(0,0,0,1),vec4(1,1,1,1),ANoise);
                }

                if ($PreviewB==true)
                {
                    fractal = mix(vec4(0,0,0,1),vec4(1,1,1,1),BNoise);
                }

                // output
                Output =  fractal;


                </Expression>
        <m_defaultInputMap Size="2" map0="Transform:35632:vec4(State.Position,1.0)" Type="QString" map1="Transform:36487:vec4(State.Position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a6ba499e-e810-4b93-afae-859f9fb670c6}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // compensate for scene size by applying eponential growth
                float size_pow = (pow(10000.0,$Size*$Size)-1.0) + 0.0001;

                // 3d space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec3 trans = (vec3($XOffset,$YOffset,$ZOffset)*size_pow);
                vec3 rotate = vec3($rX,$rY,$rZ);
                vec3 scale = vec3(1.0) / vec3($XScale,$YScale,$ZScale);

                // transform the position to translate,rotate,scale the position
                vec3 InputScaleBase3d = positionTransform(#Transform.rgb,trans,rotate,scale) / size_pow;

                // 2d uv space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec2 UVOffset = vec2($XOffset,$YOffset);
                vec2 UVScale = vec2($XScale,$YScale);

                // transform the position to translate,rotate,scale the position
                vec2 InputScaleUV = relUVTransform(State.UV,$rZ,UVOffset,UVScale,0.5,0.5)/ normalize(size_pow);

                // blend between 2d and 3d space position
                vec3 InputScaleBase = mix(InputScaleBase3d,vec3(InputScaleUV,1.0),float($uv));
                vec3 _Input = mix(State.Position,vec3(State.UV,1.0),float($uv));

                // transform base noise
                vec3 seedBaseA = InputScaleBase +vec3($SeedBase);
                vec3 seedBaseB = _Input.rgb + vec3($SeedBase);
                vec3 seedBase = mix(seedBaseB,seedBaseA,float($trB));

                // transform handle a
                vec3 seedAa = InputScaleBase + vec3($SeedA);
                vec3 seedAb = _Input.rgb + vec3($SeedA);
                vec3 seedA = mix(seedAb,seedAa,float($trhA));

                // transform handle b
                vec3 seedBa = InputScaleBase + vec3($SeedB);
                vec3 seedBb = _Input.rgb + vec3($SeedB);
                vec3 seedB = mix(seedBb,seedBa,float($trhB));

                // size for handle a
                float ASize_pow = (pow(10000.0,$ASize*$ASize)-1.0) + 0.0001;
                vec3 AScaled_seed = seedA / ASize_pow;

                // size for handle b
                float BSize_pow = (pow(10000.0,$BSize*$BSize)-1.0) + 0.0001;
                vec3 BScaled_seed = seedB / BSize_pow;

                // for propagation of negativeasblack+negativeastransparent. marking variable as 0 if handle is set to none
                int AInUse = 1;
                int BInUse = 1;

                switch($HandleA)
                {
                    case 0:
                        AInUse = 0;
                    break;
                }

                switch($HandleB)
                {
                    case 0:
                        BInUse = 0;
                    break;
                }

                // noise result from handle a
                float AOctaves = $AOctaves;
                float ALacunarity = $ALacunarity;
                float AGain = $AGain;
                float Aamp = $Aamp;
                float AFreqOffset = $AFreqOffset;
                float ANoise = rmfBm(AScaled_seed,AOctaves,ALacunarity,AGain,Aamp,AFreqOffset);

                // noise result from handle b
                float BOctaves = $BOctaves;
                float BLacunarity = $BLacunarity;
                float BGain = $BGain;
                float Bamp = $Bamp;
                float BFreqOffset = $BFreqOffset;
                float BNoise = rmfBm(BScaled_seed,BOctaves,BLacunarity,BGain,Bamp,BFreqOffset);

                // remapping noise result from handle b. adding small differential in calse newmin and new max are the same
                float nMinB = $nMinB;
                float nMaxB = $nMaxB;

                if (nMinB==nMaxB)
                {
                    nMaxB = nMaxB+0.01;
                }

                float BNew = remap(BNoise,0.0,1.0,nMinB,nMaxB,1.0);
                float BNoise_Val = BNew;

                // remapping noise result from handle a. adding small differential in calse newmin and new max are the same
                float nMinA = $nMinA;
                float nMaxA = $nMaxA;

                if (nMinA==nMaxA)
                {
                    nMaxA = nMaxA+0.01;
                }

                float ANew = remap(ANoise,0.0,1.0,nMinA,nMaxA,1.0);
                float ANoise_Val = ANew;

                // size for main noise
                vec3 scaled_seed = seedBase  / size_pow;

                // noise eval variables
                float noise_val = 0.0;
                vec3 final_seed = scaled_seed;
                float final_octaves = $octaves;
                float final_lac = $lacunarity;
                float final_gain = $gain;
                float final_amp = $Amp;
                float final_offset = $FreqOffset;

                bool black_enforceA = false;
                bool black_enforceB = false;

                // variables for marking which slots are in use, this is to allow multiplication of values. for example if handle a is mapped with octave and handle b is mapped with octave, the results will get multiplied.
                float ASizeInUse = 0.0;
                float AOctavesInUse = 0.0;
                float AGainInUse = 0.0;
                float ALacInUse = 0.0;
                float AAmpInUse = 0.0;
                float AOffsetInUse = 0.0;

                switch($HandleA)
                {
                    //NONE
                    case 0:
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = false;
                    break;

                    //SIZE
                    case 1:
                        final_seed = scaled_seed*ANoise_Val;
                        ASizeInUse = 1.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //OCTAVE
                    case 2:
                        final_octaves = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 1.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //LACUNARITY
                    case 3:
                        final_lac = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 1.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //amplitude
                    case 4:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_amp = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 1.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //OFFSET
                    case 5:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_offset = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 1.0;
                        black_enforceA = $EnforceA;
                    break;

                    //GAIN
                    case 6:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_gain = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 1.0;
                        ALacInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;
                }

                switch($HandleB)
                {
                    //NONE
                    case 0:
                        black_enforceB = false;
                    break;

                    //SIZE
                    case 1:
                        final_seed = scaled_seed*(BNoise_Val*mix(1.0,ANoise_Val,ASizeInUse));
                        black_enforceB = $EnforceB;
                    break;

                    //OCTAVES
                    case 2:
                        float tmpANoiseVal = mix(1.0,ANoise_Val,AOctavesInUse);
                        final_octaves = BNoise_Val * tmpANoiseVal;
                        black_enforceB = $EnforceB;
                    break;

                    //LACUNARITY
                    case 3:
                        final_lac = BNoise_Val*mix(1.0,ANoise_Val,ALacInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //amplitude
                    case 4:
                        final_amp = BNoise_Val*mix(1.0,ANoise_Val,AAmpInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //OFFSET
                    case 5:
                        final_offset = BNoise_Val*mix(1.0,ANoise_Val,AOffsetInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //GAIN
                    case 6:
                        final_gain = BNoise_Val*mix(1.0,ANoise_Val,AGainInUse);
                        black_enforceB = $EnforceB;
                    break;
                }

                // final noise value with inputs from noise a and noise b if mapped.
                noise_val = smoothfBm(final_seed,final_octaves,final_lac,final_gain,final_amp,final_offset);
                noise_val = mix(noise_val,abs(noise_val),float($Absolut));

                // returning 1 if noise is over 0, and 0 if noise is under 0 for negativeasblack and negativeastransparent
                float ANoiseNeg = 1.0;
                float BNoiseNeg = 1.0;

                if (black_enforceA==true || $ClipA==true)
                {
                    if (ANoise > 0.0)
                    {
                        ANoiseNeg = 1.0;
                    }else{
                        ANoiseNeg=0.0;
                    }
                }

                if (black_enforceB==true || $ClipB==true)
                {
                    if (BNoise > 0.0)
                    {
                        BNoiseNeg = 1.0;
                    }else{
                        BNoiseNeg=0.0;
                    }
                }

                //////////////////////////////////////////////////////////////////////////////////////////////////
                // to do: allow for combination of negativeastransparent and negativeasblack on both handles
                //////////////////////////////////////////////////////////////////////////////////////////////////

                // taking minumum value of two noises to determine where areas are transparent
                // when negativeasblack is on for both handles the common max value is showing
                // when negativeastransparent is on for both handles the common min value is used for transparency
                // a combination of negativeasblack on one handle and negativeastransparent on another is currently not supported
                // since that would require even more if statements. currently the used values anoiseneg and bnoiseneg get set when either negativeasblack
                // or negativeastransparent is on. there is no differentiation between the values.

                float _propagateTransparent = min(ANoiseNeg,BNoiseNeg);
                float A_B_PropagateBlackMix = max(float($ClipA),float($ClipB));
                float A_B_PropagateTransparentMix = max(float($EnforceA),float($EnforceB));
                vec4 propagateTransparent = mix(vec4(_propagateTransparent,_propagateTransparent,_propagateTransparent,1.0),vec4(_propagateTransparent),A_B_PropagateTransparentMix);

                // thresholding of result
                float finalValueA= mix(0.0,1.0,noise_val);
                float resultA = softThreshold($Threshold, $Clip*2, finalValueA);
                resultA = mix(resultA,clamp(resultA,0.0,1.0),float($clamp));

                float _invertResult = float($Invert);

                vec4 fractal = mix(mix($colorB,$colorA,resultA),mix($colorA,$colorB,resultA),_invertResult)*propagateTransparent;

                // if preview is active show pure result from handlea noise or handleb noise
                if ($PreviewA==true)
                {
                    fractal = mix(vec4(0,0,0,1),vec4(1,1,1,1),ANoise);
                }

                if ($PreviewB==true)
                {
                    fractal = mix(vec4(0,0,0,1),vec4(1,1,1,1),BNoise);
                }

                // output
                Output =  fractal;


                </Expression>
        <m_defaultInputMap Size="2" map0="Transform:35632:vec4(State.Position,1.0)" Type="QString" map1="Transform:36487:vec4(State.Position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{92807f53-58fe-4139-9676-cb01ea1c9e83}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // compensate for scene size by applying eponential growth
                float size_pow = (pow(10000.0,$Size*$Size)-1.0) + 0.0001;

                // 3d space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec3 trans = (vec3($XOffset,$YOffset,$ZOffset)*size_pow);
                vec3 rotate = vec3($rX,$rY,$rZ);
                vec3 scale = vec3(1.0) / vec3($XScale,$YScale,$ZScale);

                // transform the position to translate,rotate,scale the position
                vec3 InputScaleBase3d = positionTransform(#Transform.rgb,trans,rotate,scale) / size_pow;

                // 2d uv space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec2 UVOffset = vec2($XOffset,$YOffset);
                vec2 UVScale = vec2($XScale,$YScale);

                // transform the position to translate,rotate,scale the position
                vec2 InputScaleUV = relUVTransform(State.UV,$rZ,UVOffset,UVScale,0.5,0.5)/ normalize(size_pow);

                // blend between 2d and 3d space position
                vec3 InputScaleBase = mix(InputScaleBase3d,vec3(InputScaleUV,1.0),float($uv));
                vec3 _Input = mix(State.Position,vec3(State.UV,1.0),float($uv));

                // transform base noise
                vec3 seedBaseA = InputScaleBase +vec3($SeedBase);
                vec3 seedBaseB = _Input.rgb + vec3($SeedBase);
                vec3 seedBase = mix(seedBaseB,seedBaseA,float($trB));

                // transform handle a
                vec3 seedAa = InputScaleBase + vec3($SeedA);
                vec3 seedAb = _Input.rgb + vec3($SeedA);
                vec3 seedA = mix(seedAb,seedAa,float($trhA));

                // transform handle b
                vec3 seedBa = InputScaleBase + vec3($SeedB);
                vec3 seedBb = _Input.rgb + vec3($SeedB);
                vec3 seedB = mix(seedBb,seedBa,float($trhB));

                // size for handle a
                float ASize_pow = (pow(10000.0,$ASize*$ASize)-1.0) + 0.0001;
                vec3 AScaled_seed = seedA / ASize_pow;

                // size for handle b
                float BSize_pow = (pow(10000.0,$BSize*$BSize)-1.0) + 0.0001;
                vec3 BScaled_seed = seedB / BSize_pow;

                // for propagation of negativeasblack+negativeastransparent. marking variable as 0 if handle is set to none
                int AInUse = 1;
                int BInUse = 1;

                switch($HandleA)
                {
                    case 0:
                        AInUse = 0;
                    break;
                }

                switch($HandleB)
                {
                    case 0:
                        BInUse = 0;
                    break;
                }

                // noise result from handle a
                float AOctaves = $AOctaves;
                float ALacunarity = $ALacunarity;
                float AGain = $AGain;
                float Aamp = $Aamp;
                float AFreqOffset = $AFreqOffset;
                float ANoise = rmfBm(AScaled_seed,AOctaves,ALacunarity,AGain,Aamp,AFreqOffset);

                // noise result from handle b
                float BOctaves = $BOctaves;
                float BLacunarity = $BLacunarity;
                float BGain = $BGain;
                float Bamp = $Bamp;
                float BFreqOffset = $BFreqOffset;
                float BNoise = rmfBm(BScaled_seed,BOctaves,BLacunarity,BGain,Bamp,BFreqOffset);

                // remapping noise result from handle b. adding small differential in calse newmin and new max are the same
                float nMinB = $nMinB;
                float nMaxB = $nMaxB;

                if (nMinB==nMaxB)
                {
                    nMaxB = nMaxB+0.01;
                }

                float BNew = remap(BNoise,0.0,1.0,nMinB,nMaxB,1.0);
                float BNoise_Val = BNew;

                // remapping noise result from handle a. adding small differential in calse newmin and new max are the same
                float nMinA = $nMinA;
                float nMaxA = $nMaxA;

                if (nMinA==nMaxA)
                {
                    nMaxA = nMaxA+0.01;
                }

                float ANew = remap(ANoise,0.0,1.0,nMinA,nMaxA,1.0);
                float ANoise_Val = ANew;

                // size for main noise
                vec3 scaled_seed = seedBase  / size_pow;

                // noise eval variables
                float noise_val = 0.0;
                vec3 final_seed = scaled_seed;
                float final_octaves = $octaves;
                float final_lac = $lacunarity;
                float final_gain = $gain;
                float final_amp = $Amp;
                float final_offset = $FreqOffset;

                bool black_enforceA = false;
                bool black_enforceB = false;

                // variables for marking which slots are in use, this is to allow multiplication of values. for example if handle a is mapped with octave and handle b is mapped with octave, the results will get multiplied.
                float ASizeInUse = 0.0;
                float AOctavesInUse = 0.0;
                float AGainInUse = 0.0;
                float ALacInUse = 0.0;
                float AAmpInUse = 0.0;
                float AOffsetInUse = 0.0;

                switch($HandleA)
                {
                    //NONE
                    case 0:
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = false;
                    break;

                    //SIZE
                    case 1:
                        final_seed = scaled_seed*ANoise_Val;
                        ASizeInUse = 1.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //OCTAVE
                    case 2:
                        final_octaves = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 1.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //LACUNARITY
                    case 3:
                        final_lac = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 1.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //amplitude
                    case 4:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_amp = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 1.0;
                        AOffsetInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;

                    //OFFSET
                    case 5:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_offset = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 0.0;
                        ALacInUse = 0.0;
                        AAmpInUse = 0.0;
                        AOffsetInUse = 1.0;
                        black_enforceA = $EnforceA;
                    break;

                    //GAIN
                    case 6:
                        ANoise_Val = (0.9999* ANew) + 0.0001 ;
                        final_gain = ANoise_Val;
                        ASizeInUse = 0.0;
                        AOctavesInUse = 0.0;
                        AGainInUse = 1.0;
                        ALacInUse = 0.0;
                        black_enforceA = $EnforceA;
                    break;
                }

                switch($HandleB)
                {
                    //NONE
                    case 0:
                        black_enforceB = false;
                    break;

                    //SIZE
                    case 1:
                        final_seed = scaled_seed*(BNoise_Val*mix(1.0,ANoise_Val,ASizeInUse));
                        black_enforceB = $EnforceB;
                    break;

                    //OCTAVES
                    case 2:
                        float tmpANoiseVal = mix(1.0,ANoise_Val,AOctavesInUse);
                        final_octaves = BNoise_Val * tmpANoiseVal;
                        black_enforceB = $EnforceB;
                    break;

                    //LACUNARITY
                    case 3:
                        final_lac = BNoise_Val*mix(1.0,ANoise_Val,ALacInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //amplitude
                    case 4:
                        final_amp = BNoise_Val*mix(1.0,ANoise_Val,AAmpInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //OFFSET
                    case 5:
                        final_offset = BNoise_Val*mix(1.0,ANoise_Val,AOffsetInUse);
                        black_enforceB = $EnforceB;
                    break;

                    //GAIN
                    case 6:
                        final_gain = BNoise_Val*mix(1.0,ANoise_Val,AGainInUse);
                        black_enforceB = $EnforceB;
                    break;
                }

                // final noise value with inputs from noise a and noise b if mapped.
                noise_val = smoothfBm(final_seed,final_octaves,final_lac,final_gain,final_amp,final_offset);
                noise_val = mix(noise_val,abs(noise_val),float($Absolut));

                // returning 1 if noise is over 0, and 0 if noise is under 0 for negativeasblack and negativeastransparent
                float ANoiseNeg = 1.0;
                float BNoiseNeg = 1.0;

                if (black_enforceA==true || $ClipA==true)
                {
                    if (ANoise > 0.0)
                    {
                        ANoiseNeg = 1.0;
                    }else{
                        ANoiseNeg=0.0;
                    }
                }

                if (black_enforceB==true || $ClipB==true)
                {
                    if (BNoise > 0.0)
                    {
                        BNoiseNeg = 1.0;
                    }else{
                        BNoiseNeg=0.0;
                    }
                }

                //////////////////////////////////////////////////////////////////////////////////////////////////
                // to do: allow for combination of negativeastransparent and negativeasblack on both handles
                //////////////////////////////////////////////////////////////////////////////////////////////////

                // taking minumum value of two noises to determine where areas are transparent
                // when negativeasblack is on for both handles the common max value is showing
                // when negativeastransparent is on for both handles the common min value is used for transparency
                // a combination of negativeasblack on one handle and negativeastransparent on another is currently not supported
                // since that would require even more if statements. currently the used values anoiseneg and bnoiseneg get set when either negativeasblack
                // or negativeastransparent is on. there is no differentiation between the values.

                float _propagateTransparent = min(ANoiseNeg,BNoiseNeg);
                float A_B_PropagateBlackMix = max(float($ClipA),float($ClipB));
                float A_B_PropagateTransparentMix = max(float($EnforceA),float($EnforceB));
                vec4 propagateTransparent = mix(vec4(_propagateTransparent,_propagateTransparent,_propagateTransparent,1.0),vec4(_propagateTransparent),A_B_PropagateTransparentMix);

                // thresholding of result
                float finalValueA= mix(0.0,1.0,noise_val);
                float resultA = softThreshold($Threshold, $Clip*2, finalValueA);
                resultA = mix(resultA,clamp(resultA,0.0,1.0),float($clamp));

                float _invertResult = float($Invert);

                vec4 fractal = mix(mix($colorB,$colorA,resultA),mix($colorA,$colorB,resultA),_invertResult)*propagateTransparent;

                // if preview is active show pure result from handlea noise or handleb noise
                if ($PreviewA==true)
                {
                    fractal = mix(vec4(0,0,0,1),vec4(1,1,1,1),ANoise);
                }

                if ($PreviewB==true)
                {
                    fractal = mix(vec4(0,0,0,1),vec4(1,1,1,1),BNoise);
                }

                // output
                Output =  fractal;


                </Expression>
        <m_defaultInputMap Size="2" map0="Transform:35632:vec4(State.Position,1.0)" Type="QString" map1="Transform:36487:vec4(State.Position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Transform:{b397d258-2977-452c-897a-bcc1e8c05a35}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Type="QString" ContainerType="QHash" Transform="Manifold"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Handle B">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{e7c50b4f-2d5b-4afc-9622-a3b80e0759a2}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Rotate">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{27396b2c-080c-449f-ab99-28164888a1c7}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Scale">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{35b574f8-4c3c-47a5-95f2-0b1c44d24d56}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Space">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5ce72045-944a-432d-b2ba-0e36d313ab95}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Translate">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{7413a6be-93a6-48af-94f0-7d4772a371d3}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 9</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{fcf5f09b-bc08-4d49-80a0-b867223d623b}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 9</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d8de9fe3-a25e-4a8e-8931-dbef19479e0e}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{172494c8-5cdd-4e00-af32-ddeac242b59b}</uuidString>
         <position Type="QPointF">39.4788,-252.74</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{522883b3-2784-4083-b5a8-d3ec798ef8b6}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{9d994a02-ba6f-4ec0-8b32-6d1a50741933}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 10</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{8bcda77a-7e52-465a-b290-361161baee5b}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 10</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{43f850b4-c20e-4688-9921-4e657d495fdb}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{5d82ba85-1da3-474c-ab6b-050f3195e1bc}</uuidString>
         <position Type="QPointF">1420.55,111.817</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{60d21dfa-5bc7-4ee9-a4e8-7645dfe21dfd}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{5976595d-ad31-4385-b212-895f53e306d0}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Float</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{5622183f-d888-40dd-8d42-87e0464f3ae7}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Float</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0.1</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3f6ba9e0-7e8f-4524-ae76-6565d4d3bec2}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Float</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{8dd50cca-1822-44ed-8236-82a86e05bf71}</uuidString>
         <position Type="QPointF">922.599,123.437</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{4efecb26-c701-46de-80f2-4bcf4c5c52fd}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 13</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{fbac6b79-5293-4133-854b-906d5a5c7b80}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 13</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5c5b9b0e-6fd1-4d3e-9a2c-688a16bfd40f}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{bba84e77-f8b1-4845-9acb-d434fa49e781}</uuidString>
         <position Type="QPointF">991.189,193.549</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9d188765-1390-4111-8766-8da2912761b5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{5622183f-d888-40dd-8d42-87e0464f3ae7}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">CurvatureMap_Transp</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{3bf68f30-0542-44b6-9984-6462ad87c7ff}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">CurvatureMap_Transp</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Clamp,/Red,/Green,/Blue,Output Level/OutWhite,Output Level/OutBlack,Input Level/InMidMode,Input Level/InWhite,Input Level/InMid,Input Level/InBlack</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.002</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Levels</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">01a31b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Clamp TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" AttribName="Clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" Max="">0,0,1,2,Disable,Clamp Output Levels,Clamp LDR</Clamp>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <InBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="InBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</InBlack>
       <InMid TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="InMid" GroupHints="1" PrettyName="Mid" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">1</InMid>
       <InMidMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Absolute,Relative" AttribName="InMidMode" GroupHints="1" PrettyName="Mid Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Absolute,Relative" Max="">0,0,1,Absolute,Relative</InMidMode>
       <InWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="InWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</InWhite>
       <OutBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="OutBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.529000025126152</OutBlack>
       <OutWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="OutWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</OutWhite>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{4e6b40f9-30d5-4bc0-8678-6d394190a328}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">CurvatureMap_Transp</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{100a0c66-1dac-4492-ab5b-3dc999f9c260}</uuidString>
         <position Type="QPointF">802.509,-126.502</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3b2a56ee-797b-47a8-9fc9-7574985b6249}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float outWhite = $OutWhite;
    float outBlack = $OutBlack;
    float grad = (outWhite - outBlack) / ($InWhite - $InBlack);
    float inMid = $InMid;
    if( 1 == $InMidMode)
    {
        inMid = mix( $InBlack, $InWhite, inMid);
    }
    float ratio = (inMid - $InBlack) / ($InWhite - $InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - $InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( 0 != $Clamp)
    {
        if( 1 == $Clamp)
        {
            // Clamp to Output Level range
            levelled.rgb = clamp( levelled.rgb, vec3( outBlack), vec3( outWhite));
        }
        else
        {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3( 0), vec3( 1));
        }
    }
    Output.r = $Red   ? levelled.r : #Input.r;
    Output.g = $Green ? levelled.g : #Input.g;
    Output.b = $Blue  ? levelled.b : #Input.b;
    Output.a = #Input.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{69a36d13-0937-4560-9a88-3f0fddc669ff}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 14</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{69a36d13-0937-4560-9a88-3f0fddc669ff}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 14</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{6999c133-fbf8-4f12-9a8e-a3d1d79f85e9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{19a4b7cc-48cb-4a5a-9373-2d24bef89b7b}</uuidString>
         <position Type="QPointF">869.029,-254.623</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{55faf86e-a942-4b9a-b581-1c02c39f1dd9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{31ad8820-376c-4824-ab9f-60330d51ed7e}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 15</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{ae9e44b0-9faa-4126-94fb-782f53a00c7f}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 15</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8f453ac6-cc78-4d74-8755-f89b38166cf9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{80f87da4-e78a-457d-8851-04d263dff123}</uuidString>
         <position Type="QPointF">1488.27,283.021</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{27221e2e-b746-472f-b085-6c13291cf7da}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{4d54b813-2d35-4475-b0e7-7247bcb8fc9f}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">GrungeControl</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{d53381aa-ac0e-41cc-96d5-1407f60720b3}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">GrungeControl</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Clamp,/Red,/Green,/Blue,Output Level/OutWhite,Output Level/OutBlack,Input Level/InMidMode,Input Level/InWhite,Input Level/InMid,Input Level/InBlack</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.002</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Levels</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">01a31b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Clamp TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" AttribName="Clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" Max="">0,0,1,2,Disable,Clamp Output Levels,Clamp LDR</Clamp>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <InBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="InBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</InBlack>
       <InMid TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="InMid" GroupHints="1" PrettyName="Mid" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.0290000013774261</InMid>
       <InMidMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Absolute,Relative" AttribName="InMidMode" GroupHints="1" PrettyName="Mid Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Absolute,Relative" Max="">0,0,1,Absolute,Relative</InMidMode>
       <InWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="InWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</InWhite>
       <OutBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="OutBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</OutBlack>
       <OutWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="OutWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</OutWhite>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9912e0ed-4a67-4aba-9937-e049c7b3e991}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">GrungeControl</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{573c8e21-1ab5-43c5-be5a-10366b8bbd1f}</uuidString>
         <position Type="QPointF">1425.21,-1.2649</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ff02c9fa-0af3-4f96-9013-d2376e62437e}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float outWhite = $OutWhite;
    float outBlack = $OutBlack;
    float grad = (outWhite - outBlack) / ($InWhite - $InBlack);
    float inMid = $InMid;
    if( 1 == $InMidMode)
    {
        inMid = mix( $InBlack, $InWhite, inMid);
    }
    float ratio = (inMid - $InBlack) / ($InWhite - $InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - $InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( 0 != $Clamp)
    {
        if( 1 == $Clamp)
        {
            // Clamp to Output Level range
            levelled.rgb = clamp( levelled.rgb, vec3( outBlack), vec3( outWhite));
        }
        else
        {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3( 0), vec3( 1));
        }
    }
    Output.r = $Red   ? levelled.r : #Input.r;
    Output.g = $Green ? levelled.g : #Input.g;
    Output.b = $Blue  ? levelled.b : #Input.b;
    Output.a = #Input.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{817790e0-d5b9-430b-95a5-d9fc5c811d4a}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Curvature Map</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{31ad8820-376c-4824-ab9f-60330d51ed7e}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Curvature Map</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_input</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Misc_Input</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b40bfca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Input</pathKey>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{568f2bc7-7c49-4a5e-acc9-8a289c18a240}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Curvature Map</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{2f0e89b0-3b9b-4b62-a387-f33187b4b0e9}</uuidString>
         <position Type="QPointF">800.509,-354.855</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{528b7ce4-47cf-43f1-8a3a-b0a8e03f8a08}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    Output = vec4(0,0,0,0);
                </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Legacy Cloud</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{683d6d08-474f-4bc3-9fcc-65cb4a55194b}</uuidString>
       <prefferedInput Type="QString">Transform</prefferedInput>
       <preferredInput Type="QString">Transform</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Legacy Cloud</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Color/colorA,Color/colorB,Size/Size,Size/Seed,Size/Roughness,Size/clamp,Size/Invert,Space/uv,Transform Scale/XScale,Transform Scale/YScale,Transform Scale/ZScale,Transform Rotate/rX,Transform Rotate/rY,Transform Rotate/rZ,Transform Translate/XOffset,Transform Translate/YOffset,Transform Translate/ZOffset</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Legacy Cloud</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">04957dca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Procedural/Extension Pack/Noise/Legacy Cloud</pathKey>
       <Invert TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Invert" GroupHints="1" PrettyName="Invert" ItemList="" Step="" Description="Inverts the Noise result before ColorA+B are applied" Flags="31" Removeable="true" Default="false" Max="true">false</Invert>
       <Roughness TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Roughness" GroupHints="1" PrettyName="Roughness" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.486000023083761</Roughness>
       <Seed TypeFlags="1" Enabled="true" Visible="true" Min="1" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="Seed" GroupHints="1" PrettyName="Seed" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100000">18.5402653094148</Seed>
       <Size TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Size" GroupHints="1" PrettyName="Size" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="2">0.532000025268644</Size>
       <XOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="XOffset" GroupHints="1" PrettyName="Translate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</XOffset>
       <XScale TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="XScale" GroupHints="1" PrettyName="Scale X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">1.6061349540778</XScale>
       <YOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="YOffset" GroupHints="1" PrettyName="Translate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</YOffset>
       <YScale TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="YScale" GroupHints="1" PrettyName="Scale Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">11.1366085519536</YScale>
       <ZOffset TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="ZOffset" GroupHints="1" PrettyName="Translate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</ZOffset>
       <ZScale TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="ZScale" GroupHints="1" PrettyName="Scale Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="100">3.2687325177719</ZScale>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="clamp" GroupHints="1" PrettyName="Clamp Output" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</clamp>
       <colorA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="colorA" GroupHints="1" PrettyName="Color A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(1,1,1,1)" Max="">(1,1,1,1)</colorA>
       <colorB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(0,0,0,1)" AttribName="colorB" GroupHints="1" PrettyName="Color B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(0,0,0,1)" Max="">(0.702128,0.702128,0.702128,1)</colorB>
       <rX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rX>
       <rY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rY>
       <rZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rZ>
       <uv TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="uv" GroupHints="1" PrettyName="UV Space" ItemList="" Step="" Description="Runs the noise 2d uv based, use offset/scale x/y and rotate z" Flags="31" Removeable="true" Default="false" Max="true">false</uv>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{7ab07c68-515b-44c2-acca-9586ecb97a7b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Legacy Cloud</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{8ca197a3-44aa-4095-8309-73d02ed5c0df}</uuidString>
         <position Type="QPointF">-31.5587,193.423</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Size:0,0,-100,0" Type="QString" map1="Roughness:0,0,120,0" map2="Transform:0,0,0,-50" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{2edd0a54-0667-4d77-9110-edcc90ac1394}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float INIT = $Size; INIT = $Roughness;

                float size = #Size.r;
                // compensate for scene size by applying eponential growth
                float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;

                // 3d space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec3 trans = (vec3($XOffset,$YOffset,$ZOffset)*size_pow) + vec3($Seed);
                vec3 rotate = vec3($rX,$rY,$rZ);
                vec3 scale = vec3(1.0) / vec3($XScale,$YScale,$ZScale);

                // transform the position to translate,rotate,scale the position
                vec3 P = positionTransform(#Transform.rgb,trans,rotate,scale);

                // 2d uv space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec2 UVOffset = vec2($XOffset,$YOffset) + vec2($Seed);
                vec2 UVScale = vec2($XScale,$YScale);

                // transform the position to translate,rotate,scale the position
                vec2 InputScaleUV = relUVTransform(State.UV,$rZ,UVOffset,UVScale,0.5,0.5)/ (size_pow);

                // blend between 2d and 3d space position
                P = mix(P,vec3(InputScaleUV,1.0),float($uv));

                // noise variables
                float noise_val = 0.0;
                float sharpness = log2(1.0+99.0*#Roughness.r)/log2(100.0);

                // noise multi loop
                for(int i=0;i&lt;10;i++)
                {
                   vec3 scaled_seed = pow(2.0,float(i)) * P / size_pow;
                   noise_val += noise(scaled_seed) / pow(5.0 - 4.0 * sharpness,float(i));
                }

                // noise values
                noise_val = noise_val * 0.5 + 0.5;
                noise_val = mix(noise_val,clamp(noise_val,0.0,1.0),float($clamp));


                //invert result
                float _invertResult = float($Invert);

                // cloud noise
                Output = mix(mix($colorB,$colorA,noise_val),mix($colorA,$colorB,noise_val),_invertResult);


                </Expression>
        <m_defaultInputMap Size="6" map0="Roughness:35632:vec4($Roughness)" Type="QString" map1="Size:35632:vec4($Size)" map2="Transform:35632:vec4(State.Position,1.0)" map3="Roughness:36487:vec4($Roughness)" ContainerType="QHash" map4="Size:36487:vec4($Size)" map5="Transform:36487:vec4(State.Position,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{bba4a981-ede2-4690-9503-f84361d4eb92}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float INIT = $Size; INIT = $Roughness;

                float size = #Size.r;
                // compensate for scene size by applying eponential growth
                float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;

                // 3d space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec3 trans = (vec3($XOffset,$YOffset,$ZOffset)*size_pow) + vec3($Seed);
                vec3 rotate = vec3($rX,$rY,$rZ);
                vec3 scale = vec3(1.0) / vec3($XScale,$YScale,$ZScale);

                // transform the position to translate,rotate,scale the position
                vec3 P = positionTransform(#Transform.rgb,trans,rotate,scale);

                // 2d uv space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec2 UVOffset = vec2($XOffset,$YOffset) + vec2($Seed);
                vec2 UVScale = vec2($XScale,$YScale);

                // transform the position to translate,rotate,scale the position
                vec2 InputScaleUV = relUVTransform(State.UV,$rZ,UVOffset,UVScale,0.5,0.5)/ (size_pow);

                // blend between 2d and 3d space position
                P = mix(P,vec3(InputScaleUV,1.0),float($uv));

                // noise variables
                float noise_val = 0.0;
                float sharpness = log2(1.0+99.0*#Roughness.r)/log2(100.0);

                // noise multi loop
                for(int i=0;i&lt;10;i++)
                {
                   vec3 scaled_seed = pow(2.0,float(i)) * P / size_pow;
                   noise_val += noise(scaled_seed) / pow(5.0 - 4.0 * sharpness,float(i));
                }

                // noise values
                noise_val = noise_val * 0.5 + 0.5;
                noise_val = mix(noise_val,clamp(noise_val,0.0,1.0),float($clamp));


                //invert result
                float _invertResult = float($Invert);

                // cloud noise
                Output = mix(mix($colorB,$colorA,noise_val),mix($colorA,$colorB,noise_val),_invertResult);


                </Expression>
        <m_defaultInputMap Size="6" map0="Roughness:35632:vec4($Roughness)" Type="QString" map1="Size:35632:vec4($Size)" map2="Transform:35632:vec4(State.Position,1.0)" map3="Roughness:36487:vec4($Roughness)" ContainerType="QHash" map4="Size:36487:vec4($Size)" map5="Transform:36487:vec4(State.Position,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5e0a742e-9fb8-496c-9f84-728b0af3fe5d}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float INIT = $Size; INIT = $Roughness;

                float size = #Size.r;
                // compensate for scene size by applying eponential growth
                float size_pow = (pow(10000.0,size*size)-1.0) + 0.0001;

                // 3d space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec3 trans = (vec3($XOffset,$YOffset,$ZOffset)*size_pow) + vec3($Seed);
                vec3 rotate = vec3($rX,$rY,$rZ);
                vec3 scale = vec3(1.0) / vec3($XScale,$YScale,$ZScale);

                // transform the position to translate,rotate,scale the position
                vec3 P = positionTransform(#Transform.rgb,trans,rotate,scale);

                // 2d uv space surface position
                // build the needed vector attributes for position transform, offset max growths exponentially
                vec2 UVOffset = vec2($XOffset,$YOffset) + vec2($Seed);
                vec2 UVScale = vec2($XScale,$YScale);

                // transform the position to translate,rotate,scale the position
                vec2 InputScaleUV = relUVTransform(State.UV,$rZ,UVOffset,UVScale,0.5,0.5)/ (size_pow);

                // blend between 2d and 3d space position
                P = mix(P,vec3(InputScaleUV,1.0),float($uv));

                // noise variables
                float noise_val = 0.0;
                float sharpness = log2(1.0+99.0*#Roughness.r)/log2(100.0);

                // noise multi loop
                for(int i=0;i&lt;10;i++)
                {
                   vec3 scaled_seed = pow(2.0,float(i)) * P / size_pow;
                   noise_val += noise(scaled_seed) / pow(5.0 - 4.0 * sharpness,float(i));
                }

                // noise values
                noise_val = noise_val * 0.5 + 0.5;
                noise_val = mix(noise_val,clamp(noise_val,0.0,1.0),float($clamp));


                //invert result
                float _invertResult = float($Invert);

                // cloud noise
                Output = mix(mix($colorB,$colorA,noise_val),mix($colorA,$colorB,noise_val),_invertResult);


                </Expression>
        <m_defaultInputMap Size="6" map0="Roughness:35632:vec4($Roughness)" Type="QString" map1="Size:35632:vec4($Size)" map2="Transform:35632:vec4(State.Position,1.0)" map3="Roughness:36487:vec4($Roughness)" ContainerType="QHash" map4="Size:36487:vec4($Size)" map5="Transform:36487:vec4(State.Position,1.0)"/>
       </GLSL>
       <m_input2node Size="3" map0="Transform:{9d994a02-ba6f-4ec0-8b32-6d1a50741933}:Output" Type="QString" map1="Size::Output" map2="Roughness::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Type="QString" ContainerType="QHash" Transform="Manifold"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
       <Space Type="MriSerializableObject">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9178ddfe-53c4-4f7d-b416-9d925fce672e}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </Space>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Rotate">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{37f5d597-e954-486d-b57f-3cc25768e7e2}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Scale">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ddab2ed6-c0c0-4a91-811a-ddbfd2ad4037}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Transform Translate">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{748251cf-b497-4733-9064-ae4267ec4648}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Set Range 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{05ff2293-061e-4f0f-b034-1569c04665f3}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Set Range 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">02610b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Extension Pack/Histogram/Set Range</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b2b62c55-1cf8-470f-aef4-8945ca7194e8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Set Range 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{86f62de2-a1ff-4b76-b0e2-d8a5b9102ca9}</uuidString>
         <position Type="QPointF">277.432,196.825</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="6" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20" map5="Mult:0,0,30,-30"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{041bb67c-128f-4f13-82d5-09fa5f8ffc89}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4(#Mult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="6" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="Mult:0:vec4($sMult,$sMult,$sMult,1.0)" map2="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map3="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" ContainerType="QHash" map4="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" map5="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="6" map0="Input:{fec48ee2-f7ff-4af6-a70f-0691bb29e7d5}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax:{683d6d08-474f-4bc3-9fcc-65cb4a55194b}:Output" map5="Mult::Output"/>
       <m_PrettyInputNameMap Size="8" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash" Mult="Scale"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Set Range 3</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{d5984675-c5ca-4042-87e2-4a52e84f3723}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Set Range 3</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">02610b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Extension Pack/Histogram/Set Range</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">-0.7</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{2b7f3881-065f-46a1-95b3-18fa3d6cae14}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Set Range 3</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{c3f77598-9e4e-4f03-a631-d989cfbd5f28}</uuidString>
         <position Type="QPointF">474.196,-8.27784</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="6" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20" map5="Mult:0,0,30,-30"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f6199f00-e8f1-4010-aace-6d358e9a8460}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4(#Mult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="6" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="Mult:0:vec4($sMult,$sMult,$sMult,1.0)" map2="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map3="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" ContainerType="QHash" map4="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" map5="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="6" map0="Input:{38119fda-6dfb-4635-a787-80138a7cee26}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax::Output" map5="Mult::Output"/>
       <m_PrettyInputNameMap Size="8" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash" Mult="Scale"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Levels</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{76a34c78-cb2c-4e13-a35c-737772138f90}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Levels</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Clamp,/Red,/Green,/Blue,Output Level/OutWhite,Output Level/OutBlack,Input Level/InMidMode,Input Level/InWhite,Input Level/InMid,Input Level/InBlack</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.002</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Levels</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">01a31b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Levels</pathKey>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Clamp TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" AttribName="Clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" Max="">0,0,1,2,Disable,Clamp Output Levels,Clamp LDR</Clamp>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <InBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="InBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</InBlack>
       <InMid TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="InMid" GroupHints="1" PrettyName="Mid" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.30600001453422</InMid>
       <InMidMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Absolute,Relative" AttribName="InMidMode" GroupHints="1" PrettyName="Mid Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Absolute,Relative" Max="">1,0,1,Absolute,Relative</InMidMode>
       <InWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="InWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</InWhite>
       <OutBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="OutBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</OutBlack>
       <OutWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="OutWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</OutWhite>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{c3bc78b4-9ebb-48b0-9dd2-63d7569a76ce}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Levels</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{6aaf2b88-26c7-4bee-868f-b4510af2bc90}</uuidString>
         <position Type="QPointF">1419.23,250.524</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3079ca5a-5a41-4f72-b01b-7acf417a8c34}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float outWhite = $OutWhite;
    float outBlack = $OutBlack;
    float grad = (outWhite - outBlack) / ($InWhite - $InBlack);
    float inMid = $InMid;
    if( 1 == $InMidMode)
    {
        inMid = mix( $InBlack, $InWhite, inMid);
    }
    float ratio = (inMid - $InBlack) / ($InWhite - $InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - $InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( 0 != $Clamp)
    {
        if( 1 == $Clamp)
        {
            // Clamp to Output Level range
            levelled.rgb = clamp( levelled.rgb, vec3( outBlack), vec3( outWhite));
        }
        else
        {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3( 0), vec3( 1));
        }
    }
    Output.r = $Red   ? levelled.r : #Input.r;
    Output.g = $Green ? levelled.g : #Input.g;
    Output.b = $Blue  ? levelled.b : #Input.b;
    Output.a = #Input.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{52193284-5793-43af-bb08-9b282040c184}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 16</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{4d54b813-2d35-4475-b0e7-7247bcb8fc9f}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 16</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{c2ba06cb-ab0d-4c03-ab9a-e44aa61bfe6c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{b0b7fb83-91e6-4f7d-b348-615edb0e9f16}</uuidString>
         <position Type="QPointF">1488.23,323.024</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{809ef1c1-ef5e-4db4-a9c9-57a5a186b6ee}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{76a34c78-cb2c-4e13-a35c-737772138f90}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 17</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{619c87cb-e1e9-4fe2-956c-e5e8be554ade}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 17</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{c73c1ca2-408e-4295-8711-f0baaeaf0ed8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{15c565b3-e1d6-4b80-acc6-ff4d3b3bd11c}</uuidString>
         <position Type="QPointF">43.7718,-419.355</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f9e3f8e2-8a16-48f8-aec4-81b27d2ef715}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{9d994a02-ba6f-4ec0-8b32-6d1a50741933}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 18</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{b397d258-2977-452c-897a-bcc1e8c05a35}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 18</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{514e87e8-e8ea-4fcd-861f-6570a1fbe49c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{dab8ad38-3013-4d11-95f4-4b0146a631b6}</uuidString>
         <position Type="QPointF">1504.76,-410.231</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{50b2f803-3c36-4449-81b5-ae79a010ba3b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{619c87cb-e1e9-4fe2-956c-e5e8be554ade}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
     </m_nodes>
     <m_CustomHeaderHistory Size="10" Type="QString" ContainerType="QHash">
      <JK_TexScatterUV Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslh</JK_TexScatterUV>
      <ID_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslh</ID_ProceduralLib>
      <NB_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslh</NB_ProceduralLib>
      <JK_ColorRangeToMask Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslh</JK_ColorRangeToMask>
      <JK_VoronoiSuite Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslh</JK_VoronoiSuite>
      <BS_GpuNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslh</BS_GpuNoiseLib>
      <AL_GaborNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslh</AL_GaborNoiseLib>
      <DT3D_CellularNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslh</DT3D_CellularNoiseLib>
      <DT3D_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslh</DT3D_ProceduralLib>
      <NB_BrdfLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslh</NB_BrdfLib>
     </m_CustomHeaderHistory>
     <m_CustomCodeHistory Size="10" Type="QString" ContainerType="QHash">
      <JK_TexScatterUV Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslc</JK_TexScatterUV>
      <NB_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslc</NB_ProceduralLib>
      <ID_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslc</ID_ProceduralLib>
      <JK_VoronoiSuite Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslc</JK_VoronoiSuite>
      <JK_ColorRangeToMask Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslc</JK_ColorRangeToMask>
      <BS_GpuNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslc</BS_GpuNoiseLib>
      <AL_GaborNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslc</AL_GaborNoiseLib>
      <DT3D_CellularNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslc</DT3D_CellularNoiseLib>
      <DT3D_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslc</DT3D_ProceduralLib>
      <NB_BrdfLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslc</NB_BrdfLib>
     </m_CustomCodeHistory>
    </m_groupNetwork>
    <NodeGraphView Type="MriSnGroupNodeGraphViewContext">
     <objectName Type="QString">NodeGraphView</objectName>
     <selected Type="bool">false</selected>
     <uuidString Type="QString">{f5945bd0-d9d3-4f3c-8307-a35a2d9f2f98}</uuidString>
     <tags Type="QStringList"/>
     <inputTags Type="QStringList"/>
     <shapeType Type="int">4</shapeType>
     <nodeColorTop Type="QString"/>
     <nodeColorBottom Type="QString"/>
     <m_GuiNode Type="MriNgTextNode">
      <objectName Type="QString">Drips Generator</objectName>
      <selected Type="bool">true</selected>
      <uuidString Type="QString">{ca99f7dc-7792-4587-8836-97b7ed496d40}</uuidString>
      <position Type="QPointF">1.72494e+06,-1303</position>
     </m_GuiNode>
     <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
     <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
    </NodeGraphView>
    <GLSL Type="MriSnGroupGlslContext">
     <objectName Type="QString">GLSL</objectName>
     <selected Type="bool">false</selected>
     <uuidString Type="QString">{e98f6119-bfaf-4d78-bc6e-38ae6c9a31fa}</uuidString>
     <tags Type="QStringList"/>
     <inputTags Type="QStringList"/>
     <shaderType Type="uint">35632</shaderType>
     <Expression TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="false" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="19" Removeable="false" Default="" Max="0"/>
     <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
    </GLSL>
    <m_input2node Size="1" map0="Curvature Map::Output" Type="QString" ContainerType="QHash"/>
    <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
    <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
    <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
    <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
   </MriSnGroupNode>
  </m_nodes>
  <m_CustomHeaderHistory Size="10" Type="QString" ContainerType="QHash">
   <JK_TexScatterUV Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslh</JK_TexScatterUV>
   <ID_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslh</ID_ProceduralLib>
   <NB_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslh</NB_ProceduralLib>
   <JK_ColorRangeToMask Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslh</JK_ColorRangeToMask>
   <JK_VoronoiSuite Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslh</JK_VoronoiSuite>
   <BS_GpuNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslh</BS_GpuNoiseLib>
   <AL_GaborNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslh</AL_GaborNoiseLib>
   <DT3D_CellularNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslh</DT3D_CellularNoiseLib>
   <DT3D_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslh</DT3D_ProceduralLib>
   <NB_BrdfLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslh</NB_BrdfLib>
  </m_CustomHeaderHistory>
  <m_CustomCodeHistory Size="10" Type="QString" ContainerType="QHash">
   <JK_TexScatterUV Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslc</JK_TexScatterUV>
   <NB_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslc</NB_ProceduralLib>
   <ID_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslc</ID_ProceduralLib>
   <JK_VoronoiSuite Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslc</JK_VoronoiSuite>
   <JK_ColorRangeToMask Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslc</JK_ColorRangeToMask>
   <BS_GpuNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslc</BS_GpuNoiseLib>
   <AL_GaborNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslc</AL_GaborNoiseLib>
   <DT3D_CellularNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslc</DT3D_CellularNoiseLib>
   <DT3D_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslc</DT3D_ProceduralLib>
   <NB_BrdfLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslc</NB_BrdfLib>
  </m_CustomCodeHistory>
 </MriShaderNetwork>
</Mari>
