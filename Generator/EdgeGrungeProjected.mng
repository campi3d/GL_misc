<!DOCTYPE MariML>
<Mari FnVersion="3.0" Version="2.1">
 <MriShaderNetwork Type="MriShaderNetwork">
  <objectName Type="QString"/>
  <selected Type="bool">false</selected>
  <uuidString Type="QString">{f0ffb8c1-1432-41a8-9a22-e355bd71a0fa}</uuidString>
  <viewerNodeUuid Type="QString"/>
  <m_nodes Size="1" attributeLinkString="{909601c6-3998-414d-abc2-e90a529874e8},Scratches_Tex,{8aff0b88-3a75-43cb-b1b0-d891064c028e},Image,{909601c6-3998-414d-abc2-e90a529874e8},FineDetail_Tex,{2d4a5689-57a0-4e32-bba3-537e09bf601b},Image,{909601c6-3998-414d-abc2-e90a529874e8},GrungeMap_B,{30ac5fb3-28cb-45a2-bc2c-32a9e4fd3430},Image,{909601c6-3998-414d-abc2-e90a529874e8},Scratches,{7c194181-fa98-4a63-ab3e-984fbd5c36a8},Float_0to1,{909601c6-3998-414d-abc2-e90a529874e8},Contrast,{5cb0e39f-a95b-4fdb-bd43-8dff490e0f7e},InWhite,{909601c6-3998-414d-abc2-e90a529874e8},Softness,{5cb0e39f-a95b-4fdb-bd43-8dff490e0f7e},InMid,{909601c6-3998-414d-abc2-e90a529874e8},CornerAccumulation,{8eb2b7e2-bd8a-47d4-990b-60d83c6cc7c6},Float_0to1,{909601c6-3998-414d-abc2-e90a529874e8},Grunge_Map_A,{023145da-a594-4033-8bb5-b84a463b69b5},Image,{909601c6-3998-414d-abc2-e90a529874e8},GrungeMap_A,{023145da-a594-4033-8bb5-b84a463b69b5},Image,{909601c6-3998-414d-abc2-e90a529874e8},FineDetail,{6d7b4f70-87ff-4647-a04f-11b2f976127a},Float_0to1,{909601c6-3998-414d-abc2-e90a529874e8},Drips_Transparency,{cad4a0c1-aedc-4955-ab91-7fa46ef059e2},InMid,{909601c6-3998-414d-abc2-e90a529874e8},Grunge_WorldScale,{a2f53318-df90-4c04-9db4-223736014241},Float_Field" Type="MriSnBaseNode" ContainerType="QList">
   <MriSnGroupNode Type="MriSnGroupNode">
    <objectName Type="QString">EdgeGrunge_Projections</objectName>
    <selected Type="bool">true</selected>
    <uuidString Type="QString">{909601c6-3998-414d-abc2-e90a529874e8}</uuidString>
    <prefferedInput Type="QString">Curvature Map</prefferedInput>
    <preferredInput Type="QString">Curvature Map</preferredInput>
    <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
    <defaultName Type="QString">Group</defaultName>
    <name Type="QString">EdgeGrunge_Projections</name>
    <defaultDescription Type="QString"/>
    <description Type="QString"/>
    <nodeAttributes Type="QStringList">Grunge_WorldScale,GrungeMap_A,Scratches,Occlusion Contribution,CornerAccumulation,/Cache_1155081152_2435770842_849238303_4063468297Output,Softness,Contrast,Grunge Image A,Grunge Map A,GrungeMap_B,Scratches_Tex,FineDetail_Tex,FineDetail</nodeAttributes>
    <tags Type="QStringList">_group,_gizmo</tags>
    <enabled Type="int">-1</enabled>
    <locked Type="bool">false</locked>
    <hash Type="QString">1155081152_2435770842_849238303_4063468297</hash>
    <cachePoints Type="QStringList"/>
    <cost Type="float">0</cost>
    <costDescription Type="QString"/>
    <disabledInputs Type="QStringList"/>
    <cacheEnabled Type="bool">false</cacheEnabled>
    <versionUUID Type="QString"/>
    <versionDate Type="QString"/>
    <versionHashCreated Type="QString"/>
    <containerNodeUUID Type="QString"/>
    <isContainerNode Type="bool">false</isContainerNode>
    <stackContainerNodeUUID Type="QString"/>
    <isStackContainerNode Type="bool">false</isStackContainerNode>
    <adjustmentStackContainerNodeUUID Type="QString"/>
    <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
    <sharedEdges Type="QStringList"/>
    <pathKey Type="QString">Generator/DripsGenerator</pathKey>
    <Contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="Contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">0.941000044695102</Contrast>
    <CornerAccumulation TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="CornerAccumulation" GroupHints="1" PrettyName="CornerAccumulation" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.784000037238002</CornerAccumulation>
    <FineDetail TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="FineDetail" GroupHints="1" PrettyName="FineDetail" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.629000029875897</FineDetail>
    <FineDetail_Tex TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" AttribName="FineDetail_Tex" GroupHints="1" PrettyName="FineDetail_Tex" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/Grunge_fullFrame_RandomDistribution/bridge_specRefl_7006.exr(Hash)576364208-2128225991-1904396474-1750738526-3484985518-645879694-469499037-4255007568-3116202536-654200532-2528327950-406013279-3610825613-1459848358-1652451610-2006095003(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|2|2|0|0|||</FineDetail_Tex>
    <GrungeMap_A TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" AttribName="GrungeMap_A" GroupHints="1" PrettyName="GrungeMap_A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/Grunge (spattered surfaces,non-continuous)/grunge_grayscale_v001.0134.tif(Hash)457999844-1723764766-1113069244-2430011540-1407785036-1367510360-4059802508-1199406834-4249887831-1725054285-4200431870-875718634-661888832-859061384-4213248617-3037760321(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|0|0|0|0|||</GrungeMap_A>
    <GrungeMap_B TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" AttribName="GrungeMap_B" GroupHints="1" PrettyName="GrungeMap_B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/Grunge_fullFrame_RandomDistribution/bridge_specRefl_7006.exr(Hash)576364208-2128225991-1904396474-1750738526-3484985518-645879694-469499037-4255007568-3116202536-654200532-2528327950-406013279-3610825613-1459848358-1652451610-2006095003(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|2|2|0|0|||</GrungeMap_B>
    <Grunge_WorldScale TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Grunge_WorldScale" GroupHints="1" PrettyName="Grunge_WorldScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">10</Grunge_WorldScale>
    <Scratches TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Scratches" GroupHints="1" PrettyName="Scratches" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.884000041987747</Scratches>
    <Scratches_Tex TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" AttribName="Scratches_Tex" GroupHints="1" PrettyName="Scratches_Tex" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|3|3|0|0|||" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/d_Scratches/Kolbenanlage_Kolben_stosskanten_kratzerdetail_bump1Invert5(Hash)1477654392-3654412251-684113587-83062616-3870990886-4243577867-1568113248-1511140193-3057085608-1999788493-3391499784-1063538241-3468458880-1479591967-3027474717-1428892805(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|0|0|0|0|||</Scratches_Tex>
    <Softness TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="Softness" GroupHints="1" PrettyName="Softness" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.652000030968338</Softness>
    <m_groupNetwork Type="MriShaderNetwork">
     <objectName Type="QString"/>
     <selected Type="bool">false</selected>
     <uuidString Type="QString">{61654abf-4d67-46f6-aec0-c0842b74f372}</uuidString>
     <viewerNodeUuid Type="QString"/>
     <m_nodes Size="51" attributeLinkString="{a2f53318-df90-4c04-9db4-223736014241},Float_Field,{909601c6-3998-414d-abc2-e90a529874e8},Grunge_WorldScale,{8eb2b7e2-bd8a-47d4-990b-60d83c6cc7c6},Float_0to1,{909601c6-3998-414d-abc2-e90a529874e8},CornerAccumulation,{2d4a5689-57a0-4e32-bba3-537e09bf601b},Image,{909601c6-3998-414d-abc2-e90a529874e8},FineDetail_Tex,{30ac5fb3-28cb-45a2-bc2c-32a9e4fd3430},Image,{909601c6-3998-414d-abc2-e90a529874e8},GrungeMap_B,{7c194181-fa98-4a63-ab3e-984fbd5c36a8},Float_0to1,{909601c6-3998-414d-abc2-e90a529874e8},Scratches,{cad4a0c1-aedc-4955-ab91-7fa46ef059e2},InMid,{909601c6-3998-414d-abc2-e90a529874e8},Drips_Transparency,{8aff0b88-3a75-43cb-b1b0-d891064c028e},Image,{909601c6-3998-414d-abc2-e90a529874e8},Scratches_Tex,{5cb0e39f-a95b-4fdb-bd43-8dff490e0f7e},InWhite,{909601c6-3998-414d-abc2-e90a529874e8},Contrast,{5cb0e39f-a95b-4fdb-bd43-8dff490e0f7e},InMid,{909601c6-3998-414d-abc2-e90a529874e8},Softness,{023145da-a594-4033-8bb5-b84a463b69b5},Image,{909601c6-3998-414d-abc2-e90a529874e8},Grunge_Map_A,{023145da-a594-4033-8bb5-b84a463b69b5},Image,{909601c6-3998-414d-abc2-e90a529874e8},GrungeMap_A,{6d7b4f70-87ff-4647-a04f-11b2f976127a},Float_0to1,{909601c6-3998-414d-abc2-e90a529874e8},FineDetail" Type="MriSnBaseNode" ContainerType="QList">
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Output</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{b1e9b03a-219b-4b48-900c-22411c5a48f6}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Output</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_output</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Misc_Output</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">09a1c86a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Output</pathKey>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3120c496-bcab-4858-8ee1-ddc829483771}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Output</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{fcf9c2ea-2666-47fe-a20f-0b011cb834a4}</uuidString>
         <position Type="QPointF">-1520.87,-241.506</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{7c167e0c-7f81-47a6-98fc-8f7e2dcfae99}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    Output = #Input;
                </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{5cb0e39f-a95b-4fdb-bd43-8dff490e0f7e}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Histogram Scan</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{daadad69-a9c8-49f3-b3a0-5660982a47e2}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Histogram Scan</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.144000006839633</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.603000028640963</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{024df9ea-b840-46c0-82e2-f238d52cf7ad}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Histogram Scan</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{49bacd7e-5fb5-4488-a435-1b83bec8d26c}</uuidString>
         <position Type="QPointF">-2358.66,-749.765</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{edfbaea3-632a-413a-8b02-c763c4f1ab5c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{94aa650c-eb02-4e93-be38-a2450817f98e}:Output" Type="QString" map1="Position:{6b30429f-a61a-4df3-b7d2-697569804e8c}:Output" map2="Contrast::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{6b30429f-a61a-4df3-b7d2-697569804e8c}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9290c488-0e41-4b87-8bd6-16f0cc794132}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{a4905655-bc4e-4dac-abd4-2ce5a3058598}</uuidString>
         <position Type="QPointF">-2722.13,-740.475</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{7ac80d08-cf39-4830-8447-5cdae107f00f}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{3397d5c0-fd5a-4c8d-85ae-d77fd24e83c5}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">CurvatureMap_Transp</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{94aa650c-eb02-4e93-be38-a2450817f98e}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">CurvatureMap_Transp</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Clamp,/Red,/Green,/Blue,Output Level/OutWhite,Output Level/OutBlack,Input Level/InMidMode,Input Level/InWhite,Input Level/InMid,Input Level/InBlack</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.002</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Levels</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">01a31b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Clamp TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" AttribName="Clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" Max="">0,0,1,2,Disable,Clamp Output Levels,Clamp LDR</Clamp>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <InBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="InBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</InBlack>
       <InMid TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="InMid" GroupHints="1" PrettyName="Mid" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.858000040752813</InMid>
       <InMidMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Absolute,Relative" AttribName="InMidMode" GroupHints="1" PrettyName="Mid Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Absolute,Relative" Max="">0,0,1,Absolute,Relative</InMidMode>
       <InWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="InWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</InWhite>
       <OutBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="OutBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</OutBlack>
       <OutWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="OutWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</OutWhite>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{fb5c1690-0814-4f32-9295-ce8f5203dc78}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">CurvatureMap_Transp</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{e5d00c65-370b-4b0c-bc29-0ac5e4697e99}</uuidString>
         <position Type="QPointF">-2172.13,-889.629</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5451115d-4de0-463f-8cd3-38eed29f6055}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float outWhite = $OutWhite;
    float outBlack = $OutBlack;
    float grad = (outWhite - outBlack) / ($InWhite - $InBlack);
    float inMid = $InMid;
    if( 1 == $InMidMode)
    {
        inMid = mix( $InBlack, $InWhite, inMid);
    }
    float ratio = (inMid - $InBlack) / ($InWhite - $InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - $InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( 0 != $Clamp)
    {
        if( 1 == $Clamp)
        {
            // Clamp to Output Level range
            levelled.rgb = clamp( levelled.rgb, vec3( outBlack), vec3( outWhite));
        }
        else
        {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3( 0), vec3( 1));
        }
    }
    Output.r = $Red   ? levelled.r : #Input.r;
    Output.g = $Green ? levelled.g : #Input.g;
    Output.b = $Blue  ? levelled.b : #Input.b;
    Output.a = #Input.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{e33a9fe6-77c1-4a8a-9728-ed84a85de140}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 14</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{e33a9fe6-77c1-4a8a-9728-ed84a85de140}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 14</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{362deaa3-53ac-4a9c-9cf3-bace5d41bdfd}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{11b0d436-12a9-480a-b9ea-766310da1569}</uuidString>
         <position Type="QPointF">-2104.16,-1005.68</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{86f8d958-93aa-400b-8d60-e102dc70b6f8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{fff3d598-3056-4271-b56a-e14b737a8f7a}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Curvature Map</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{39e46f64-97a0-4e4e-8cad-2f433f5661d6}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Curvature Map</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_input</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Misc_Input</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b40bfca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Input</pathKey>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9f0807f6-1501-4305-93c3-43d7b6b1453f}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Curvature Map</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{5006df5a-aabd-461b-b9e0-f778678ada44}</uuidString>
         <position Type="QPointF">-1012.94,-1824.26</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{6ccd01f3-55a0-434e-95b5-46db35878236}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    Output = vec4(0,0,0,0);
                </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Axis Projection</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{023145da-a594-4033-8bb5-b84a463b69b5}</uuidString>
       <prefferedInput Type="QString">WorldScale</prefferedInput>
       <preferredInput Type="QString">WorldScale</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Axis Projection</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Image/worldScale,Image/Image,Image/Alpha,Image/Inv,Image/Repeat,Image/Angle,Image/UOffset,Image/VOffset,Image/UScale,Image/VScale,Axis/sX,Axis/ExpandX,Axis/sminX,Axis/ExpandMinX,Axis/sY,Axis/ExpandY,Axis/sminY,Axis/ExpandMinY,Axis/sZ,Axis/ExpandZ,Axis/sminZ,Axis/ExpandMinZ,Softness Falloff/jitter,Softness/FO,Global Axis Rotation/rX,Global Axis Rotation/rY,Global Axis Rotation/rZ,Tangent Space Normal Map/FlipN</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.7</cost>
       <costDescription Type="QString">Some calculations and some texture lookup</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Axis Projection</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">04e1eb2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Environment/Extension Pack/Axis Projection</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Suppress Image Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Alpha>
       <Angle TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Angle" GroupHints="1" PrettyName="Angle" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">120</Angle>
       <ExpandMinX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinX>
       <ExpandMinY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinY>
       <ExpandMinZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinZ>
       <ExpandX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">0.973</ExpandX>
       <ExpandY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandY>
       <ExpandZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandZ>
       <FO TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," AttribName="FO" GroupHints="1" PrettyName="Softness Falloff" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," Max="">0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4,</FO>
       <FlipN TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="FlipN" GroupHints="1" PrettyName="Flip Red/Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</FlipN>
       <Image TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" AttribName="Image" GroupHints="1" PrettyName="Image" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/Grunge (spattered surfaces,non-continuous)/grunge_grayscale_v001.0134.tif(Hash)457999844-1723764766-1113069244-2430011540-1407785036-1367510360-4059802508-1199406834-4249887831-1725054285-4200431870-875718634-661888832-859061384-4213248617-3037760321(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|0|0|0|0|||</Image>
       <Inv TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Inv" GroupHints="1" PrettyName="Invert" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Inv>
       <Repeat TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Repeat" GroupHints="1" PrettyName="Repeat" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="50">0.20373</Repeat>
       <UOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="UOffset" GroupHints="1" PrettyName="U Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</UOffset>
       <UScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="UScale" GroupHints="1" PrettyName="U Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</UScale>
       <VOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="VOffset" GroupHints="1" PrettyName="V Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</VOffset>
       <VScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="VScale" GroupHints="1" PrettyName="V Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</VScale>
       <jitter TypeFlags="0" Enabled="true" Visible="true" Min="1e-14" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1e-14" AttribName="jitter" GroupHints="1" PrettyName="Jitter" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1e-14" Max="1">1e-14</jitter>
       <rX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rX>
       <rY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rY>
       <rZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rZ>
       <sX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sX" GroupHints="1" PrettyName="X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sX>
       <sY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sY" GroupHints="1" PrettyName="Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sY>
       <sZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sZ" GroupHints="1" PrettyName="Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sZ>
       <sminX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminX" GroupHints="1" PrettyName="-X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminX>
       <sminY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminY" GroupHints="1" PrettyName="-Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminY>
       <sminZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminZ" GroupHints="1" PrettyName="-Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminZ>
       <worldScale TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="100" AttribName="worldScale" GroupHints="1" PrettyName="World Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="100" Max="">100</worldScale>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{0b15e3c1-dcf2-4ecb-98ee-d87d4f87a0e3}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Axis Projection</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{f202aa5e-c4e2-48c4-9c73-f55d88744a45}</uuidString>
         <position Type="QPointF">-2771.67,-998.787</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Angle:0,0,-120,0" Type="QString" map1="UVOffset:0,0,70,-50" map2="UVScale:0,0,-70,-50" map3="WorldScale:0,0,140,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f6aca3ae-bc5a-4e1f-b315-aa8b816e3fbf}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{34901bfd-7781-49cb-bba7-adf7e512eeb5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{30acd72b-3f33-47a2-a8f6-e7043bcc6d8d}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="WorldScale:{e60684df-b8bc-440a-a20b-9d6af2f2f610}:Output" Type="QString" map1="Angle::Output" map2="UVOffset::Output" map3="UVScale::Output" ContainerType="QHash" map4="Normal::Output"/>
       <m_PrettyInputNameMap Size="4" Normal="Tangent Space Normal" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Tangent Space Normal Map">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{fddb2b4a-4fcb-4262-9d1b-c1dd0fc3661c}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Histogram Scan 4</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{cc938a9d-668f-4f69-a2a1-1f9331cff8d6}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Histogram Scan 4</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.826000039232895</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{06dd1592-7e7c-4521-8ed6-3a2052210a38}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Histogram Scan 4</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{76866461-fad8-46f4-b5f0-764547cd9569}</uuidString>
         <position Type="QPointF">-2040.88,-748.05</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{dd4ecc8a-bbc2-4a1e-8f5c-795cecafb026}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{94aa650c-eb02-4e93-be38-a2450817f98e}:Output" Type="QString" map1="Position:{59fbae80-6565-45b5-803b-7c912789f663}:Output" map2="Contrast::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 20</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{59fbae80-6565-45b5-803b-7c912789f663}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 20</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9c1199b7-5ca8-4cfd-92c7-93f00f0d7b78}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{e13a6797-c2a0-4033-b4dc-db855b41c2a9}</uuidString>
         <position Type="QPointF">-1677.53,-743.924</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{446b1807-d6d9-4187-8b9c-2ba87874f6c9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{36f30fb9-82ab-4b5f-9eaa-390fbf1f529a}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Axis Projection 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{30ac5fb3-28cb-45a2-bc2c-32a9e4fd3430}</uuidString>
       <prefferedInput Type="QString">WorldScale</prefferedInput>
       <preferredInput Type="QString">WorldScale</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Axis Projection 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Image/worldScale,Image/Image,Image/Alpha,Image/Inv,Image/Repeat,Image/Angle,Image/UOffset,Image/VOffset,Image/UScale,Image/VScale,Axis/sX,Axis/ExpandX,Axis/sminX,Axis/ExpandMinX,Axis/sY,Axis/ExpandY,Axis/sminY,Axis/ExpandMinY,Axis/sZ,Axis/ExpandZ,Axis/sminZ,Axis/ExpandMinZ,Softness Falloff/jitter,Softness/FO,Global Axis Rotation/rX,Global Axis Rotation/rY,Global Axis Rotation/rZ,Tangent Space Normal Map/FlipN</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.7</cost>
       <costDescription Type="QString">Some calculations and some texture lookup</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Axis Projection</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">04e1eb2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Suppress Image Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Alpha>
       <Angle TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Angle" GroupHints="1" PrettyName="Angle" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">47.273</Angle>
       <ExpandMinX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinX>
       <ExpandMinY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinY>
       <ExpandMinZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinZ>
       <ExpandX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandX>
       <ExpandY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandY>
       <ExpandZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandZ>
       <FO TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," AttribName="FO" GroupHints="1" PrettyName="Softness Falloff" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," Max="">0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4,</FO>
       <FlipN TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="FlipN" GroupHints="1" PrettyName="Flip Red/Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</FlipN>
       <Image TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" AttribName="Image" GroupHints="1" PrettyName="Image" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/Grunge_fullFrame_RandomDistribution/bridge_specRefl_7006.exr(Hash)576364208-2128225991-1904396474-1750738526-3484985518-645879694-469499037-4255007568-3116202536-654200532-2528327950-406013279-3610825613-1459848358-1652451610-2006095003(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|2|2|0|0|||</Image>
       <Inv TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Inv" GroupHints="1" PrettyName="Invert" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Inv>
       <Repeat TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Repeat" GroupHints="1" PrettyName="Repeat" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="50">0.560619</Repeat>
       <UOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="UOffset" GroupHints="1" PrettyName="U Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</UOffset>
       <UScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="UScale" GroupHints="1" PrettyName="U Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</UScale>
       <VOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="VOffset" GroupHints="1" PrettyName="V Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</VOffset>
       <VScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="VScale" GroupHints="1" PrettyName="V Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</VScale>
       <jitter TypeFlags="0" Enabled="true" Visible="true" Min="1e-14" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1e-14" AttribName="jitter" GroupHints="1" PrettyName="Jitter" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1e-14" Max="1">1e-14</jitter>
       <rX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rX>
       <rY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rY>
       <rZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rZ>
       <sX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sX" GroupHints="1" PrettyName="X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sX>
       <sY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sY" GroupHints="1" PrettyName="Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sY>
       <sZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sZ" GroupHints="1" PrettyName="Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sZ>
       <sminX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminX" GroupHints="1" PrettyName="-X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminX>
       <sminY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminY" GroupHints="1" PrettyName="-Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminY>
       <sminZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminZ" GroupHints="1" PrettyName="-Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminZ>
       <worldScale TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="100" AttribName="worldScale" GroupHints="1" PrettyName="World Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="100" Max="">100</worldScale>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{900bb33a-33b0-452e-9f3a-2182447d1a05}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Axis Projection 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{99dd11c6-21d7-41fd-a484-156964da11bd}</uuidString>
         <position Type="QPointF">-1737.85,-993.527</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Angle:0,0,-120,0" Type="QString" map1="UVOffset:0,0,70,-50" map2="UVScale:0,0,-70,-50" map3="WorldScale:0,0,140,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b015db32-279a-4c69-b1b6-604179805c9b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{fa75f684-be60-406d-b341-4dae43dc3c03}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{2a320e5b-de26-4b26-872e-4bebaee19396}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="WorldScale:{ca097f87-cba1-4abb-8a56-b509fd5589c9}:Output" Type="QString" map1="Angle::Output" map2="UVOffset::Output" map3="UVScale::Output" ContainerType="QHash" map4="Normal::Output"/>
       <m_PrettyInputNameMap Size="4" Normal="Tangent Space Normal" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Tangent Space Normal Map">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{43aad1c6-08ae-44fa-aca6-1ff5e6e250ea}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Merge 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{e50a2561-6804-412d-b3ce-9e4ceca83e47}</uuidString>
       <prefferedInput Type="QString">Base</prefferedInput>
       <preferredInput Type="QString">Base</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">true</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Merge 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/BlendMode,/Amount,Advanced/AmountEnabled,Advanced/AdvancedEnabled,Advanced/Component,Advanced/BlendIfThis,Advanced/BlendIfBelow,Swizzle/SwizzleR,Swizzle/SwizzleG,Swizzle/SwizzleB,Swizzle/SwizzleA</nodeAttributes>
       <tags Type="QStringList">_blend</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.03</cost>
       <costDescription Type="QString">Some calculations</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Layer_Merge</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">053ff12a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Layer/Merge</pathKey>
       <AdvancedEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Basic,Advanced" AttribName="AdvancedEnabled" GroupHints="1" PrettyName="Blending" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Basic,Advanced" Max="">0,0,1,Basic,Advanced</AdvancedEnabled>
       <Amount TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Amount" GroupHints="1" PrettyName="Amount" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</Amount>
       <AmountEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="1,0,1,Disable,Enable" AttribName="AmountEnabled" GroupHints="1" PrettyName="Amount Enabled" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1,0,1,Disable,Enable" Max="">1,0,1,Disable,Enable</AmountEnabled>
       <BlendIfBelow TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfBelow" GroupHints="1" PrettyName="Below Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfBelow>
       <BlendIfThis TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfThis" GroupHints="1" PrettyName="This Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfThis>
       <BlendMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" AttribName="BlendMode" GroupHints="1" PrettyName="Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" Max="">Comp_Multiply,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps</BlendMode>
       <Component TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" AttribName="Component" GroupHints="1" PrettyName="Component" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" Max="">0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance</Component>
       <SwizzleA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleA" GroupHints="1" PrettyName="Swizzle Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleA>
       <SwizzleB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleB" GroupHints="1" PrettyName="Swizzle Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleB>
       <SwizzleG TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleG" GroupHints="1" PrettyName="Swizzle Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleG>
       <SwizzleR TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleR" GroupHints="1" PrettyName="Swizzle Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleR>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{371640f5-6f40-4c27-870f-7acb0921257c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Merge 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{3c162d1d-f96b-4d21-a8e2-33487f30c147}</uuidString>
         <position Type="QPointF">-2182.62,-630.113</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <ModoRender Type="MriSnStandardContext">
        <objectName Type="QString">ModoRender</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a51c1b83-52b6-4949-b547-d85501a7c4fb}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <supportedAttributes Type="QStringList"/>
        <MriNodeContextPropertyVisible TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="MriNodeContextPropertyVisible" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</MriNodeContextPropertyVisible>
        <PythonCommands TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="QString" Reset="" AttribName="PythonCommands" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">
blendAmount = node.metadata("Amount")

# Create BlendAmount as input so that we can use it as an input into internal nodes
lx.eval('!channel.create BlendAmount mode:float item:%s username:BlendAmount' % groupId )
lx.eval('!assembly.assignChannel input {%s:BlendAmount}' % groupId )
lx.eval('!item.channel BlendAmount %s' % blendAmount)

# Alpha Blend a+b-ab

# b = Mask.r * BlendAmount * Over.a
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b0 = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b0,groupId,-10,-10) )
lx.eval('!channel.link add {%s:Mask.R} {%s:input1}' % (groupId,b0) )
lx.eval('!channel.link add {%s:BlendAmount} {%s:input2}' % (groupId,b0) )

lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b,groupId,0,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (b0,b) )
lx.eval('!channel.link add {%s:Over.A} {%s:input2}' % (groupId,b) )

# a+b
lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
apb = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (apb,groupId,10,-10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,apb) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,apb) )

# ab
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
ab = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (ab,groupId,10,10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,ab) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,ab) )

# (a+b)-(ab)
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
alphaBlend = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlend,groupId,20,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (apb,alphaBlend) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,alphaBlend) )

# Check if the alphaBlend alpha value is 0
lx.eval('!channelModifier.create "cmLogic:notEqual" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmLogic.N ?')
alphaBlendCheck = lx.eval1('!query sceneservice cmLogic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlendCheck,groupId,40,0) )

lx.eval('!shaderNode.create constant')
lx.eval('!item.channel constant$value %s' % 0.0 )
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
zero = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (zero,groupId,20,10) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (zero, alphaBlendCheck ) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend, alphaBlendCheck ) )

# Create constant 1.0 for inverting mask
lx.eval('!shaderNode.create constant')
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
one = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (one,groupId,20,20) )

# Inverted AlphaBlendCheck
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
invertedAlphaBlendCheck = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (invertedAlphaBlendCheck,groupId,50,20) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (one,invertedAlphaBlendCheck) )
lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,invertedAlphaBlendCheck) )


# (a - ab) * Base.rgb + Over.a * Over.rgb
# a - ab
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
baseScalar = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseScalar,groupId,20,-20) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,baseScalar) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,baseScalar) )

components = ["R","G","B"]
componentOuts = []

for i in range(3):
    component = components[i]

    #(a - ab) * Base.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseMultiplied,groupId,40,-60+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseScalar,baseMultiplied) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input2}' % (groupId,component,baseMultiplied) )

    # b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overMultiplied,groupId,40,-50+20*i) )
    lx.eval('!channel.link add {%s:Over.%s} {%s:input1}' % (groupId,component,overMultiplied) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,overMultiplied) )

    # (a - ab) * Base.rgb + b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    colorAdded = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (colorAdded,groupId,50,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseMultiplied,colorAdded) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (overMultiplied,colorAdded) )

    # ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab)

    lx.eval('!channelModifier.create "cmMathBasic:div" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    divided = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (divided,groupId,60,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (colorAdded,divided) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend,divided) )

    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * AlphaBlendCheck
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overTimesMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overTimesMask,groupId,70,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (divided,overTimesMask) )
    lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,overTimesMask) )

    # Base.rgb * (1 - AlphaBlendCheck)
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseTimesInvertedMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseTimesInvertedMask,groupId,70,-45+20*i) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input1}' % (groupId,component,baseTimesInvertedMask) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (invertedAlphaBlendCheck,baseTimesInvertedMask) )

    # If the new alpha is 0, return Base otherwise the blended color
    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * Mask
    #       +
    # Base.rgb * (1 - Mask)
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    finalAdd = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (finalAdd,groupId,80,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (overTimesMask,finalAdd) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (baseTimesInvertedMask,finalAdd) )

    componentOuts.append(finalAdd)

# Connect to assembly output
lx.eval('!channel.link add {%s:output} {%s:Output.R}' % (componentOuts[0],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.G}' % (componentOuts[1],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.B}' % (componentOuts[2],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.A}' % (alphaBlend,groupId) )

# Set the default values for Mask to be (1,1,1,1)
lx.eval('channel.value 1.0 channel:{%s:Mask.R}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.G}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.B}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.A}' % groupId)
</PythonCommands>
       </ModoRender>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{27955dcf-83b0-4212-a3bc-48bb3fa32400}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    if( 0 != $AdvancedEnabled)
    {
        // this is used to control what component we are pulling the key from
        vec3 Mult[5];

        Mult[0] = vec3(1.0/3.0,1.0/3.0,1.0/3.0);
        Mult[1] = vec3(1,0,0);
        Mult[2] = vec3(0,1,0);
        Mult[3] = vec3(0,0,1);
        Mult[4] = vec3(0.2126,0.7152,0.0722);


        // Calculate the amount from the component
        // a Mult value of (1,0,0) will isolate the red value
        // A mult value of (1,1,1) will give a gray scale

        float ThisAmount = dot(#Over.rgb , Mult[$Component]);
        float BelowAmount = dot(#Base.rgb , Mult[$Component]);

        // now that we've pulled the component out of above and below
        // we lookup into the lut to find out the amount to scale the alpha values by

        float ThisAlpha  = mriCurveLookup($BlendIfThis,ThisAmount);
        float BelowAlpha = mriCurveLookup($BlendIfBelow,BelowAmount);

        // now we multiply the base alpha value by both values

        float AdvancedBlendAmount = ThisAlpha * BelowAlpha;
        if( 0 != $AmountEnabled)
        {
            AdvancedBlendAmount *= $Amount;
        }

        Output = $BlendMode(#Base, #Over, #Mask.r * AdvancedBlendAmount);
    }
    else
    {
        float BlendAmount = 1;
        if( 0 != $AmountEnabled)
        {
            BlendAmount *= $Amount;
        }
        Output = $BlendMode(#Base, #Over, BlendAmount * #Mask.r);
    }

    Output = vec4( $SwizzleR, $SwizzleG, $SwizzleB, $SwizzleA);

                </Expression>
        <m_defaultInputMap Size="1" map0="Mask:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Base:{daadad69-a9c8-49f3-b3a0-5660982a47e2}:Output" Type="QString" map1="Over:{cc938a9d-668f-4f69-a2a1-1f9331cff8d6}:Output" map2="Mask::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Axis Projection World Scale</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{a2f53318-df90-4c04-9db4-223736014241}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Axis Projection World Scale</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Basic/Extension Pack/Float</pathKey>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">10</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{833538c6-2928-4e3a-a545-e7c716435fb5}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Axis Projection World Scale</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{07dd3158-8fe6-4238-b9a5-66032a264178}</uuidString>
         <position Type="QPointF">-2776.76,-1823.89</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5b47db7d-03bc-4d58-bb44-edf36ec346d0}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Set Range</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{3397d5c0-fd5a-4c8d-85ae-d77fd24e83c5}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Set Range</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b34cd2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Extension Pack/Histogram/Set Range</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3174fb45-0b11-4bd7-873f-ca0f78505943}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Set Range</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{188415fa-c208-4703-960a-4a0dd11aaa12}</uuidString>
         <position Type="QPointF">-2778.91,-863.712</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="5" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f290c8cb-591a-454d-8f9d-a0471aa976ec}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4($sMult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="5" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map2="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" map3="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" ContainerType="QHash" map4="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="Input:{023145da-a594-4033-8bb5-b84a463b69b5}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax:{cef4570f-c896-4514-93b8-e0e9c3507ff8}:Output"/>
       <m_PrettyInputNameMap Size="7" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Ambient Occlusion Map</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{ad479817-ab0c-4327-8642-a7cd2dbd614c}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Ambient Occlusion Map</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_input</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Misc_Input</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b40bfca</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Input</pathKey>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{6ec25c43-5b5a-441b-b36b-85300857a453}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Ambient Occlusion Map</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{6f99c3e2-647b-4b42-913c-55cb20434b2f}</uuidString>
         <position Type="QPointF">-2007.17,-1835.52</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{db06ca39-f5bc-4c2c-92d3-46dd6dc1b2f7}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    Output = vec4(0,0,0,0);
                </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Set Range 6</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{36f30fb9-82ab-4b5f-9eaa-390fbf1f529a}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Set Range 6</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b34cd2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Extension Pack/Histogram/Set Range</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0.5</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9b245207-a1c1-4e25-985b-dd33c79a918e}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Set Range 6</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{902981ea-2e7d-4b2e-b68f-0bb1cae27cd5}</uuidString>
         <position Type="QPointF">-1737.85,-921.527</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="5" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{2dc8d031-28ba-4e8a-b701-8b05e3b14898}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4($sMult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="5" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map2="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" map3="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" ContainerType="QHash" map4="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="Input:{30ac5fb3-28cb-45a2-bc2c-32a9e4fd3430}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax::Output"/>
       <m_PrettyInputNameMap Size="7" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 21</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{ca097f87-cba1-4abb-8a56-b509fd5589c9}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 21</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{53af4573-04a0-4aa5-85de-b1c6e6ba9975}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{ea3b4737-db60-45d6-b9b7-c7ccba15113a}</uuidString>
         <position Type="QPointF">-1657.66,-1391.42</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ba9283b9-85ca-4367-a3f1-246a2557a143}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{1465915e-58be-4c43-b1ea-a8146b9c2a73}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 22</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{e60684df-b8bc-440a-a20b-9d6af2f2f610}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 22</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{90953fb6-6bed-45ac-9342-85e67108744e}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{a9f00c87-b633-468e-86e7-55672f5691d9}</uuidString>
         <position Type="QPointF">-2697.4,-1387.82</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{74bbd113-a994-4cd9-ab90-f794dd61e528}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{a2f53318-df90-4c04-9db4-223736014241}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Surface Spill Fine Main</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{33c6b9c3-4458-4f0d-b4d7-afc752e7d87d}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Surface Spill Fine Main</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.399000018951483</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.793000037665479</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5a95ab55-8249-46f2-b9a8-533e5ea80f83}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Surface Spill Fine Main</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{d01c19f0-2cf3-4d3a-b2c7-638fad4adefb}</uuidString>
         <position Type="QPointF">-1085.24,-764.076</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{badd369b-12bc-43f8-ad4d-72c69d09580e}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{cad4a0c1-aedc-4955-ab91-7fa46ef059e2}:Output" Type="QString" map1="Position:{7a04cf01-522b-4ea7-afb5-49200a50856d}:Output" map2="Contrast:{13564147-2e04-4a6a-bf49-bd331592450c}:Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 23</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{7a04cf01-522b-4ea7-afb5-49200a50856d}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 23</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{307a96bf-5e1a-4878-ad77-b0b52f5c4614}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{9b739599-8fa3-4626-a342-9cdc55c7b2cb}</uuidString>
         <position Type="QPointF">-1440.15,-763.35</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ce80d886-db93-421d-8bb6-48293c5dfbea}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{3327d348-5f0b-4ad0-8c3e-8544c96a5ca4}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">CurvatureMap_Transp 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{cad4a0c1-aedc-4955-ab91-7fa46ef059e2}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">CurvatureMap_Transp 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Clamp,/Red,/Green,/Blue,Output Level/OutWhite,Output Level/OutBlack,Input Level/InMidMode,Input Level/InWhite,Input Level/InMid,Input Level/InBlack</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.002</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Levels</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">01a31b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Clamp TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" AttribName="Clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" Max="">0,0,1,2,Disable,Clamp Output Levels,Clamp LDR</Clamp>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <InBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="InBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</InBlack>
       <InMid TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="InMid" GroupHints="1" PrettyName="Mid" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.858000040752813</InMid>
       <InMidMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Absolute,Relative" AttribName="InMidMode" GroupHints="1" PrettyName="Mid Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Absolute,Relative" Max="">0,0,1,Absolute,Relative</InMidMode>
       <InWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="InWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</InWhite>
       <OutBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="OutBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</OutBlack>
       <OutWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="OutWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</OutWhite>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b265680c-012e-4106-bee3-51a095d9fe94}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">CurvatureMap_Transp 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{d07d373f-f8ba-442b-aea5-dbd63f2a2d4d}</uuidString>
         <position Type="QPointF">-898.713,-903.94</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{edbf4694-88ac-4c84-9ebf-7decda62822b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float outWhite = $OutWhite;
    float outBlack = $OutBlack;
    float grad = (outWhite - outBlack) / ($InWhite - $InBlack);
    float inMid = $InMid;
    if( 1 == $InMidMode)
    {
        inMid = mix( $InBlack, $InWhite, inMid);
    }
    float ratio = (inMid - $InBlack) / ($InWhite - $InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - $InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( 0 != $Clamp)
    {
        if( 1 == $Clamp)
        {
            // Clamp to Output Level range
            levelled.rgb = clamp( levelled.rgb, vec3( outBlack), vec3( outWhite));
        }
        else
        {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3( 0), vec3( 1));
        }
    }
    Output.r = $Red   ? levelled.r : #Input.r;
    Output.g = $Green ? levelled.g : #Input.g;
    Output.b = $Blue  ? levelled.b : #Input.b;
    Output.a = #Input.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{0136933c-1a46-409d-b3b3-a7d5777afd0b}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 24</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{0136933c-1a46-409d-b3b3-a7d5777afd0b}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 24</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{26c290a7-ddc0-4614-acf3-0c51713b4cfd}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{4262b7ae-a0f4-43ab-a036-8eae0f5f502a}</uuidString>
         <position Type="QPointF">-805.586,-1816.42</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{267575ba-c1d5-4d31-aeb1-a4406131fd3a}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{39e46f64-97a0-4e4e-8cad-2f433f5661d6}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Axis Projection 3</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{8aff0b88-3a75-43cb-b1b0-d891064c028e}</uuidString>
       <prefferedInput Type="QString">WorldScale</prefferedInput>
       <preferredInput Type="QString">WorldScale</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Axis Projection 3</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Image/worldScale,Image/Image,Image/Alpha,Image/Inv,Image/Repeat,Image/Angle,Image/UOffset,Image/VOffset,Image/UScale,Image/VScale,Axis/sX,Axis/ExpandX,Axis/sminX,Axis/ExpandMinX,Axis/sY,Axis/ExpandY,Axis/sminY,Axis/ExpandMinY,Axis/sZ,Axis/ExpandZ,Axis/sminZ,Axis/ExpandMinZ,Softness Falloff/jitter,Softness/FO,Global Axis Rotation/rX,Global Axis Rotation/rY,Global Axis Rotation/rZ,Tangent Space Normal Map/FlipN</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.7</cost>
       <costDescription Type="QString">Some calculations and some texture lookup</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Axis Projection</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">04e1eb2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Suppress Image Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Alpha>
       <Angle TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Angle" GroupHints="1" PrettyName="Angle" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">120</Angle>
       <ExpandMinX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinX>
       <ExpandMinY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinY>
       <ExpandMinZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinZ>
       <ExpandX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">0.973</ExpandX>
       <ExpandY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandY>
       <ExpandZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandZ>
       <FO TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," AttribName="FO" GroupHints="1" PrettyName="Softness Falloff" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," Max="">0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4,</FO>
       <FlipN TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="FlipN" GroupHints="1" PrettyName="Flip Red/Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</FlipN>
       <Image TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" AttribName="Image" GroupHints="1" PrettyName="Image" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/d_Scratches/Kolbenanlage_Kolben_stosskanten_kratzerdetail_bump1Invert5(Hash)1477654392-3654412251-684113587-83062616-3870990886-4243577867-1568113248-1511140193-3057085608-1999788493-3391499784-1063538241-3468458880-1479591967-3027474717-1428892805(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|0|0|0|0|||</Image>
       <Inv TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Inv" GroupHints="1" PrettyName="Invert" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Inv>
       <Repeat TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Repeat" GroupHints="1" PrettyName="Repeat" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="50">0.986431</Repeat>
       <UOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="UOffset" GroupHints="1" PrettyName="U Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</UOffset>
       <UScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="UScale" GroupHints="1" PrettyName="U Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</UScale>
       <VOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="VOffset" GroupHints="1" PrettyName="V Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</VOffset>
       <VScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="VScale" GroupHints="1" PrettyName="V Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</VScale>
       <jitter TypeFlags="0" Enabled="true" Visible="true" Min="1e-14" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1e-14" AttribName="jitter" GroupHints="1" PrettyName="Jitter" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1e-14" Max="1">1e-14</jitter>
       <rX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rX>
       <rY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rY>
       <rZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rZ>
       <sX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sX" GroupHints="1" PrettyName="X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sX>
       <sY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sY" GroupHints="1" PrettyName="Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sY>
       <sZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sZ" GroupHints="1" PrettyName="Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sZ>
       <sminX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminX" GroupHints="1" PrettyName="-X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminX>
       <sminY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminY" GroupHints="1" PrettyName="-Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminY>
       <sminZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminZ" GroupHints="1" PrettyName="-Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminZ>
       <worldScale TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="100" AttribName="worldScale" GroupHints="1" PrettyName="World Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="100" Max="">98</worldScale>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{50797407-64b9-4744-879f-17707a7272e3}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Axis Projection 3</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{e125d09e-e889-4c59-b382-2d9be86c7925}</uuidString>
         <position Type="QPointF">-1498.25,-1013.1</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Angle:0,0,-120,0" Type="QString" map1="UVOffset:0,0,70,-50" map2="UVScale:0,0,-70,-50" map3="WorldScale:0,0,140,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5acc0ed4-a0a1-4530-86ee-1679a023df95}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{66c74e2e-0ec3-443f-8194-3f503ed8e4e3}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{687af265-7ea8-49f3-a72c-b15206583d32}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="WorldScale:{cb24fa6a-73d4-4562-86fa-666dd827ce5e}:Output" Type="QString" map1="Angle::Output" map2="UVOffset::Output" map3="UVScale::Output" ContainerType="QHash" map4="Normal::Output"/>
       <m_PrettyInputNameMap Size="4" Normal="Tangent Space Normal" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Tangent Space Normal Map">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9fc49730-5384-413e-a2e4-402601b34ccc}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Histogram Scan 6</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{3614bff9-8862-42ab-a54e-c71fe188cf33}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Histogram Scan 6</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/position,/contrast,/invertPosition,/clamp</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_HistogramScan</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">046f6f6a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <clamp TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</clamp>
       <contrast TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="contrast" GroupHints="1" PrettyName="Contrast" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.322000015294179</contrast>
       <invertPosition TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="invertPosition" GroupHints="1" PrettyName="Invert Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</invertPosition>
       <position TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="position" GroupHints="1" PrettyName="Position" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.364000017289072</position>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{acb7ae43-25bf-4600-b634-483156874c54}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Histogram Scan 6</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{416c90a4-106a-4e02-803f-38153d9078da}</uuidString>
         <position Type="QPointF">-767.463,-762.361</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="3" map0="Input:0,0,0,-50" Type="QString" map1="Position:0,0,-120,0" map2="Contrast:0,0,120,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{0bdcc0fb-605c-47b0-a9e7-125f073f62fa}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

    // Do not remove the following comment, used to initialize sliders:
    // $position; $contrast


    // Histogram Scan

    float position = mix(#Position.r,1.0-#Position.r,float($invertPosition));
    float pos_a = ( max(position,0.5) - 0.5) * 2.0;
    float pos_b = min( (position*2.0),1.0);
    float pos_x = min( (#Contrast.r*0.5),1.0);
          pos_x = max(pos_x,0.0);
    float InBlack = mix(pos_a,pos_b,pos_x);
    float InWhite = mix(pos_b,pos_a,pos_x);

    float outWhite = 0.0;
    float outBlack = 1.0;
    float grad = (outWhite - outBlack) / (InWhite - InBlack);
    float inMid = 0.5;
    inMid = mix( InBlack, InWhite, inMid);

    float ratio = (inMid - InBlack) / (InWhite - InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( $clamp)
    {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3(0.0), vec3(1.0));
    }

    Output.rgb = clamp(vec3(1.0)-levelled.rgb,vec3(0.0),vec3(1.0));
    Output.a = #Input.a;

            </Expression>
        <m_defaultInputMap Size="3" map0="Contrast:0:vec4($contrast,$contrast,$contrast,1.0)" Type="QString" map1="Input:0:vec4(1,1,1,1)" map2="Position:0:vec4($position,$position,$position,1.0)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Input:{cad4a0c1-aedc-4955-ab91-7fa46ef059e2}:Output" Type="QString" map1="Position:{f65284b3-a1e3-4e94-933c-21a3a4f8f117}:Output" map2="Contrast::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 25</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{f65284b3-a1e3-4e94-933c-21a3a4f8f117}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 25</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{14d72b40-9742-47b8-9a2f-ee07c8a6a86c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{ecc6c3e6-d3f1-43c2-a46c-113770615cdf}</uuidString>
         <position Type="QPointF">-419.506,-805.377</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{290da253-5c0f-449c-905f-e7367c9d93db}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{94c5e579-b42c-431b-97f7-f26eaf98d288}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Axis Projection 4</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{2d4a5689-57a0-4e32-bba3-537e09bf601b}</uuidString>
       <prefferedInput Type="QString">WorldScale</prefferedInput>
       <preferredInput Type="QString">WorldScale</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Axis Projection 4</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Image/worldScale,Image/Image,Image/Alpha,Image/Inv,Image/Repeat,Image/Angle,Image/UOffset,Image/VOffset,Image/UScale,Image/VScale,Axis/sX,Axis/ExpandX,Axis/sminX,Axis/ExpandMinX,Axis/sY,Axis/ExpandY,Axis/sminY,Axis/ExpandMinY,Axis/sZ,Axis/ExpandZ,Axis/sminZ,Axis/ExpandMinZ,Softness Falloff/jitter,Softness/FO,Global Axis Rotation/rX,Global Axis Rotation/rY,Global Axis Rotation/rZ,Tangent Space Normal Map/FlipN</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.7</cost>
       <costDescription Type="QString">Some calculations and some texture lookup</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Axis Projection</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">04e1eb2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Suppress Image Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Alpha>
       <Angle TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Angle" GroupHints="1" PrettyName="Angle" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">112.727</Angle>
       <ExpandMinX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinX>
       <ExpandMinY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinY>
       <ExpandMinZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandMinZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandMinZ>
       <ExpandX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandX" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1.522</ExpandX>
       <ExpandY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandY" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandY>
       <ExpandZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="ExpandZ" GroupHints="1" PrettyName="Expand" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="2">1</ExpandZ>
       <FO TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," AttribName="FO" GroupHints="1" PrettyName="Softness Falloff" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4," Max="">0,0,0.4025,0,0.47,0.137273,0.52,0.834091,0.575,0.996364,1,1,UseAtlas=true,Type=4,</FO>
       <FlipN TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="FlipN" GroupHints="1" PrettyName="Flip Red/Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</FlipN>
       <Image TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriImageList" Reset="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" AttribName="Image" GroupHints="1" PrettyName="Image" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="(MipMaps)1(Path)(Hash)(ColorSpaceConfig)" Max="">(MipMaps)1(Path)K:/TextureLibrary/Sorted/Grunge (Alphas)/Grunge_fullFrame_RandomDistribution/bridge_specRefl_7006.exr(Hash)576364208-2128225991-1904396474-1750738526-3484985518-645879694-469499037-4255007568-3116202536-654200532-2528327950-406013279-3610825613-1459848358-1652451610-2006095003(ColorSpaceConfig)Automatic|Automatic|Automatic|Automatic|2|2|0|0|||</Image>
       <Inv TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Inv" GroupHints="1" PrettyName="Invert" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">false</Inv>
       <Repeat TypeFlags="1" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Repeat" GroupHints="1" PrettyName="Repeat" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="50">0.449079</Repeat>
       <UOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="UOffset" GroupHints="1" PrettyName="U Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</UOffset>
       <UScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="UScale" GroupHints="1" PrettyName="U Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</UScale>
       <VOffset TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="VOffset" GroupHints="1" PrettyName="V Offset" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</VOffset>
       <VScale TypeFlags="0" Enabled="true" Visible="true" Min="-1" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="VScale" GroupHints="1" PrettyName="V Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</VScale>
       <jitter TypeFlags="0" Enabled="true" Visible="true" Min="1e-14" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1e-14" AttribName="jitter" GroupHints="1" PrettyName="Jitter" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1e-14" Max="1">1e-14</jitter>
       <rX TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rX" GroupHints="1" PrettyName="Rotate X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rX>
       <rY TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rY" GroupHints="1" PrettyName="Rotate Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rY>
       <rZ TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="rZ" GroupHints="1" PrettyName="Rotate Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="360">0</rZ>
       <sX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sX" GroupHints="1" PrettyName="X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sX>
       <sY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sY" GroupHints="1" PrettyName="Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sY>
       <sZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sZ" GroupHints="1" PrettyName="Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sZ>
       <sminX TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminX" GroupHints="1" PrettyName="-X" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminX>
       <sminY TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminY" GroupHints="1" PrettyName="-Y" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminY>
       <sminZ TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="sminZ" GroupHints="1" PrettyName="-Z" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="true">true</sminZ>
       <worldScale TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="100" AttribName="worldScale" GroupHints="1" PrettyName="World Scale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="100" Max="">100</worldScale>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{0fc3fc45-d2f9-49ec-be1b-2188dc41bbc9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Axis Projection 4</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{f31a18d8-af1f-4670-81e0-a0fabd1398bf}</uuidString>
         <position Type="QPointF">-464.433,-1007.84</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="4" map0="Angle:0,0,-120,0" Type="QString" map1="UVOffset:0,0,70,-50" map2="UVScale:0,0,-70,-50" map3="WorldScale:0,0,140,0" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3258e117-15a7-4098-a5e8-3b9a7f2b9306}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">35632</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{550f828a-8b5b-4de4-b277-6d949567d1ad}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">36487</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8908f993-3fab-4875-b1ba-51ac8818e7eb}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    


    //Workaround: Init UV Elements by casting otherwise UI is greyed out because &lt;DEFAULT> Values do not turn them on
    float UI = $worldScale; UI = $Angle; UI = $UOffset; UI = $VOffset; UI = $UScale; UI = $VScale;

    // Checking if anything is attached to Nodegraph Handles
    vec3 tsN = normalize( mix(#Normal.grb,#Normal.rgb,float($FlipN)) * State.Normal * vec3 (0.5) ) ;
    tsN = ( #Normal == vec4(9999.0) ) ? State.Normal : tsN ;



    // build modified state.normal via mari function library call
    vec3 _N = positionTransform(tsN,vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));
    vec3 pos = positionTransform((State.Position - u_MriObjectCenter),vec3(0.0),vec3($rX,$rY,$rZ),vec3(1.0));

    // divisor for p in fbm jitter function
    float pow_J = pow($jitter,length(_N));

    // fbm function for jitter effect.
    float J = vlnoise(_N/vec3(pow_J),$jitter);

    // mix between jittered and unjittered result. mix is never 100percent jittered since values are too high
    vec3 P = mix(_N,_N + vec3(J),$jitter/4);


    // separating positive and negative ps to determine direction
    float X = clamp(P.x,0.000000000,1000000000000000.0);
    float minX = clamp(P.x,0.0000000000,1000000000000000.0) - P.x;
    float Y = clamp(P.y,0.000000000,1000000000000000.0);
    float minY = clamp(P.y,0.000000000,1000000000000000.0) - P.y;
    float Z = clamp(P.z,0.000000000,1000000000000000.0);
    float minZ = clamp(P.z,0.000000000,1000000000000000.0) - P.z;

    // mixing the clamped directions against 0 based on ui selection
    float resA = mix(0.0,X,$sX);
    float resB = mix(0.0,minX,$sminX);
    float resC = mix(0.0,Y,$sY);
    float resD = mix(0.0,minY,$sminY);
    float resE = mix(0.0,Z,$sZ);
    float resF = mix(0.0,minZ,$sminZ);

    // looking up result against falloff curve
    resA = mriCurveLookup($FO,resA*$ExpandX);
    resB = mriCurveLookup($FO,resB*$ExpandMinX);
    resC = mriCurveLookup($FO,resC*$ExpandY);
    resD = mriCurveLookup($FO,resD*$ExpandMinY);
    resE = mriCurveLookup($FO,resE*$ExpandZ);
    resF = mriCurveLookup($FO,resF*$ExpandMinZ);

    // blending all ui selections together
    float _res = max(resA,resB);
    _res = max(_res,resC);
    _res = max(_res,resD);
    _res = max(_res,resE);
    _res = max(_res,resF);


    vec2 FrontUv;
    if ( $sZ || $sminZ)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              FrontUv = vec2(0.0, 0.0);
          }
          else
          {
              FrontUv = (1.0 / #WorldScale.r) * pos.xy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          FrontUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * FrontUv;
          FrontUv *= vec2( $Repeat);
          FrontUv += vec2( -#UVOffset.r, #UVOffset.g);
          FrontUv -= vec2(0.5, 0.5);
      }
    }


    vec2 TopUv;
    if ( $sY || $sminY)
      {
        {
            if (#WorldScale.r &lt;= 0.0)
            {
                TopUv = vec2(0.0, 0.0);
            }
            else
            {
                TopUv = (1.0 / #WorldScale.r) * pos.xz * vec2( -#UVScale.r, -#UVScale.g);
            }
            float angleRads = radians( #Angle.r);
            float cosAngle = cos( angleRads);
            float sinAngle = sin( angleRads);
            TopUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * TopUv;
            TopUv *= vec2( $Repeat);
            TopUv += vec2( -#UVOffset.r, #UVOffset.g);
            TopUv -= vec2(0.5, 0.5);
        }

      }

    vec2 RightUv;
    if ( $sX || $sminX)
    {
      {
          if (#WorldScale.r &lt;= 0.0)
          {
              RightUv = vec2(0.0, 0.0);
          }
          else
          {
              RightUv = (1.0 / #WorldScale.r) * pos.zy * vec2( #UVScale.r, -#UVScale.g);
          }
          float angleRads = radians( #Angle.r);
          float cosAngle = cos( angleRads);
          float sinAngle = sin( angleRads);
          RightUv = mat2( cosAngle, -sinAngle, sinAngle, cosAngle ) * RightUv;
          RightUv *= vec2( $Repeat);
          RightUv += vec2( -#UVOffset.r, #UVOffset.g);
          RightUv -= vec2(0.5, 0.5);
      }
    }

    //Comp Results together.

   // Converting Alpha Checkbox to float to use in mixers.
    float AlphaMix = float($Alpha);
    vec4 result;

    // tempTex is used to write the results of each directional projection into a variable
    // tempTex_AlphaMix is stripping out the Alpha of the projection if AlphaSurpression is on
    vec4 tempTex = texture( $Image, RightUv.xy);
    vec4 tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),float($Alpha));


    // for the first iteration a simple mix against 0.0 is done.
    result = mix(vec4(0.0),tempTex_AlphaMix,resA);
    result = Comp_Default( result, tempTex_AlphaMix, resB);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image  ,TopUv.xy  );
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result,tempTex_AlphaMix, resC);
    result = Comp_Default( result,tempTex_AlphaMix, resD);

    // tempTex then splitting alpha then comping
    tempTex = texture( $Image,FrontUv.xy);
    tempTex_AlphaMix = mix(tempTex,vec4(tempTex.rgb,1.0),AlphaMix);

    result = Comp_Default( result, tempTex_AlphaMix, resE);
    result = Comp_Default( result, tempTex_AlphaMix, resF);

    Output = result;
    //Apply original Image Alpha and Invert
    Output.a = _res * Output.a;
    Output = vec4( mix(Output.r,1.0-Output.r,float($Inv)),
                   mix(Output.g,1.0-Output.g,float($Inv)),
                   mix(Output.b,1.0-Output.b,float($Inv)),
                   Output.a
                  );

    
              </Expression>
        <m_defaultInputMap map8="UVScale:36487:vec4($UScale,$VScale,0.0,1.0)" map9="WorldScale:36487:vec4($worldScale)" Size="10" map0="Angle:35632:vec4($Angle)" Type="QString" map1="Normal:35632:vec4(9999.0)" map2="UVOffset:35632:vec4($UOffset,$VOffset,0.0,1.0)" map3="UVScale:35632:vec4($UScale,$VScale,0.0,1.0)" ContainerType="QHash" map4="WorldScale:35632:vec4($worldScale)" map5="Angle:36487:vec4($Angle)" map6="Normal:36487:vec4(9999.0)" map7="UVOffset:36487:vec4($UOffset,$VOffset,0.0,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="WorldScale:{684575a7-e115-4200-b904-9d740123a871}:Output" Type="QString" map1="Angle::Output" map2="UVOffset::Output" map3="UVScale::Output" ContainerType="QHash" map4="Normal::Output"/>
       <m_PrettyInputNameMap Size="4" Normal="Tangent Space Normal" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
       <MriSerializableObject Type="MriSerializableObject" MriSerializableObject_Class="MriSerializableObject" MriSerializableObject_Name="Tangent Space Normal Map">
        <objectName Type="QString"/>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5be02a85-232a-4527-b46d-aa26554e3229}</uuidString>
        <Expanded TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="Expanded" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</Expanded>
       </MriSerializableObject>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Merge 3</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{137dbf5b-c24c-4c71-ab83-808af6706df9}</uuidString>
       <prefferedInput Type="QString">Base</prefferedInput>
       <preferredInput Type="QString">Base</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">true</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Merge 3</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/BlendMode,/Amount,Advanced/AmountEnabled,Advanced/AdvancedEnabled,Advanced/Component,Advanced/BlendIfThis,Advanced/BlendIfBelow,Swizzle/SwizzleR,Swizzle/SwizzleG,Swizzle/SwizzleB,Swizzle/SwizzleA</nodeAttributes>
       <tags Type="QStringList">_blend</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.03</cost>
       <costDescription Type="QString">Some calculations</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Layer_Merge</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">053ff12a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <AdvancedEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Basic,Advanced" AttribName="AdvancedEnabled" GroupHints="1" PrettyName="Blending" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Basic,Advanced" Max="">0,0,1,Basic,Advanced</AdvancedEnabled>
       <Amount TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Amount" GroupHints="1" PrettyName="Amount" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</Amount>
       <AmountEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="1,0,1,Disable,Enable" AttribName="AmountEnabled" GroupHints="1" PrettyName="Amount Enabled" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1,0,1,Disable,Enable" Max="">1,0,1,Disable,Enable</AmountEnabled>
       <BlendIfBelow TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfBelow" GroupHints="1" PrettyName="Below Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfBelow>
       <BlendIfThis TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfThis" GroupHints="1" PrettyName="This Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfThis>
       <BlendMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" AttribName="BlendMode" GroupHints="1" PrettyName="Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" Max="">Comp_Multiply,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps</BlendMode>
       <Component TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" AttribName="Component" GroupHints="1" PrettyName="Component" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" Max="">0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance</Component>
       <SwizzleA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleA" GroupHints="1" PrettyName="Swizzle Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleA>
       <SwizzleB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleB" GroupHints="1" PrettyName="Swizzle Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleB>
       <SwizzleG TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleG" GroupHints="1" PrettyName="Swizzle Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleG>
       <SwizzleR TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleR" GroupHints="1" PrettyName="Swizzle Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleR>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{09683a57-fa7c-4fed-8945-0fc721d9d142}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Merge 3</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{24f785b9-86b7-4fda-bb39-899595d8f6ee}</uuidString>
         <position Type="QPointF">-904.203,-518.424</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <ModoRender Type="MriSnStandardContext">
        <objectName Type="QString">ModoRender</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ae51cd5d-6c2b-41cd-b3e7-9e78f5c79f78}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <supportedAttributes Type="QStringList"/>
        <MriNodeContextPropertyVisible TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="MriNodeContextPropertyVisible" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</MriNodeContextPropertyVisible>
        <PythonCommands TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="QString" Reset="" AttribName="PythonCommands" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">
blendAmount = node.metadata("Amount")

# Create BlendAmount as input so that we can use it as an input into internal nodes
lx.eval('!channel.create BlendAmount mode:float item:%s username:BlendAmount' % groupId )
lx.eval('!assembly.assignChannel input {%s:BlendAmount}' % groupId )
lx.eval('!item.channel BlendAmount %s' % blendAmount)

# Alpha Blend a+b-ab

# b = Mask.r * BlendAmount * Over.a
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b0 = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b0,groupId,-10,-10) )
lx.eval('!channel.link add {%s:Mask.R} {%s:input1}' % (groupId,b0) )
lx.eval('!channel.link add {%s:BlendAmount} {%s:input2}' % (groupId,b0) )

lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b,groupId,0,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (b0,b) )
lx.eval('!channel.link add {%s:Over.A} {%s:input2}' % (groupId,b) )

# a+b
lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
apb = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (apb,groupId,10,-10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,apb) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,apb) )

# ab
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
ab = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (ab,groupId,10,10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,ab) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,ab) )

# (a+b)-(ab)
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
alphaBlend = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlend,groupId,20,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (apb,alphaBlend) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,alphaBlend) )

# Check if the alphaBlend alpha value is 0
lx.eval('!channelModifier.create "cmLogic:notEqual" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmLogic.N ?')
alphaBlendCheck = lx.eval1('!query sceneservice cmLogic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlendCheck,groupId,40,0) )

lx.eval('!shaderNode.create constant')
lx.eval('!item.channel constant$value %s' % 0.0 )
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
zero = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (zero,groupId,20,10) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (zero, alphaBlendCheck ) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend, alphaBlendCheck ) )

# Create constant 1.0 for inverting mask
lx.eval('!shaderNode.create constant')
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
one = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (one,groupId,20,20) )

# Inverted AlphaBlendCheck
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
invertedAlphaBlendCheck = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (invertedAlphaBlendCheck,groupId,50,20) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (one,invertedAlphaBlendCheck) )
lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,invertedAlphaBlendCheck) )


# (a - ab) * Base.rgb + Over.a * Over.rgb
# a - ab
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
baseScalar = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseScalar,groupId,20,-20) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,baseScalar) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,baseScalar) )

components = ["R","G","B"]
componentOuts = []

for i in range(3):
    component = components[i]

    #(a - ab) * Base.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseMultiplied,groupId,40,-60+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseScalar,baseMultiplied) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input2}' % (groupId,component,baseMultiplied) )

    # b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overMultiplied,groupId,40,-50+20*i) )
    lx.eval('!channel.link add {%s:Over.%s} {%s:input1}' % (groupId,component,overMultiplied) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,overMultiplied) )

    # (a - ab) * Base.rgb + b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    colorAdded = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (colorAdded,groupId,50,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseMultiplied,colorAdded) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (overMultiplied,colorAdded) )

    # ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab)

    lx.eval('!channelModifier.create "cmMathBasic:div" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    divided = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (divided,groupId,60,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (colorAdded,divided) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend,divided) )

    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * AlphaBlendCheck
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overTimesMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overTimesMask,groupId,70,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (divided,overTimesMask) )
    lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,overTimesMask) )

    # Base.rgb * (1 - AlphaBlendCheck)
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseTimesInvertedMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseTimesInvertedMask,groupId,70,-45+20*i) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input1}' % (groupId,component,baseTimesInvertedMask) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (invertedAlphaBlendCheck,baseTimesInvertedMask) )

    # If the new alpha is 0, return Base otherwise the blended color
    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * Mask
    #       +
    # Base.rgb * (1 - Mask)
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    finalAdd = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (finalAdd,groupId,80,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (overTimesMask,finalAdd) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (baseTimesInvertedMask,finalAdd) )

    componentOuts.append(finalAdd)

# Connect to assembly output
lx.eval('!channel.link add {%s:output} {%s:Output.R}' % (componentOuts[0],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.G}' % (componentOuts[1],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.B}' % (componentOuts[2],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.A}' % (alphaBlend,groupId) )

# Set the default values for Mask to be (1,1,1,1)
lx.eval('channel.value 1.0 channel:{%s:Mask.R}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.G}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.B}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.A}' % groupId)
</PythonCommands>
       </ModoRender>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{e5700bdd-6538-4488-a1fc-e0b6c16437d9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    if( 0 != $AdvancedEnabled)
    {
        // this is used to control what component we are pulling the key from
        vec3 Mult[5];

        Mult[0] = vec3(1.0/3.0,1.0/3.0,1.0/3.0);
        Mult[1] = vec3(1,0,0);
        Mult[2] = vec3(0,1,0);
        Mult[3] = vec3(0,0,1);
        Mult[4] = vec3(0.2126,0.7152,0.0722);


        // Calculate the amount from the component
        // a Mult value of (1,0,0) will isolate the red value
        // A mult value of (1,1,1) will give a gray scale

        float ThisAmount = dot(#Over.rgb , Mult[$Component]);
        float BelowAmount = dot(#Base.rgb , Mult[$Component]);

        // now that we've pulled the component out of above and below
        // we lookup into the lut to find out the amount to scale the alpha values by

        float ThisAlpha  = mriCurveLookup($BlendIfThis,ThisAmount);
        float BelowAlpha = mriCurveLookup($BlendIfBelow,BelowAmount);

        // now we multiply the base alpha value by both values

        float AdvancedBlendAmount = ThisAlpha * BelowAlpha;
        if( 0 != $AmountEnabled)
        {
            AdvancedBlendAmount *= $Amount;
        }

        Output = $BlendMode(#Base, #Over, #Mask.r * AdvancedBlendAmount);
    }
    else
    {
        float BlendAmount = 1;
        if( 0 != $AmountEnabled)
        {
            BlendAmount *= $Amount;
        }
        Output = $BlendMode(#Base, #Over, BlendAmount * #Mask.r);
    }

    Output = vec4( $SwizzleR, $SwizzleG, $SwizzleB, $SwizzleA);

                </Expression>
        <m_defaultInputMap Size="1" map0="Mask:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Base:{33c6b9c3-4458-4f0d-b4d7-afc752e7d87d}:Output" Type="QString" map1="Over:{3614bff9-8862-42ab-a54e-c71fe188cf33}:Output" map2="Mask::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Set Range 7</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{3327d348-5f0b-4ad0-8c3e-8544c96a5ca4}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Set Range 7</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b34cd2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">3</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d205dfd6-7cef-431a-bf6d-5b11eba30b98}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Set Range 7</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{9f23e6b6-4382-44ca-9bf1-378d9fcfda46}</uuidString>
         <position Type="QPointF">-1507.12,-878.023</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="5" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d83af7a3-b835-4665-8321-9236079d75ea}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4($sMult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="5" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map2="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" map3="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" ContainerType="QHash" map4="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="Input:{8aff0b88-3a75-43cb-b1b0-d891064c028e}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax:{73b66ad6-a106-4c63-9fa4-481feb60d973}:Output"/>
       <m_PrettyInputNameMap Size="7" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Set Range 8</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{94c5e579-b42c-431b-97f7-f26eaf98d288}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Set Range 8</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b34cd2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">2</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0.4</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{3d3b2883-9d25-4495-b812-31af8305adc1}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Set Range 8</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{79154e34-4679-4cc8-9ac6-9a30ba04c7cc}</uuidString>
         <position Type="QPointF">-464.433,-935.838</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="5" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{687c2209-8c77-4e91-a660-bb07b387c0f9}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4($sMult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="5" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map2="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" map3="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" ContainerType="QHash" map4="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="Input:{2d4a5689-57a0-4e32-bba3-537e09bf601b}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax:{6d7b4f70-87ff-4647-a04f-11b2f976127a}:Output"/>
       <m_PrettyInputNameMap Size="7" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 26</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{53d26a40-3936-457e-959a-d5931a211edc}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 26</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{c3e4341a-6f7f-4b85-94e7-b0c0dc3ca877}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{375b3795-8a3d-412b-a7a7-3ce27eb9c74b}</uuidString>
         <position Type="QPointF">-379.036,-1369.73</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a8176663-8e9c-420d-aa7b-efb4232c62c8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{cb24fa6a-73d4-4562-86fa-666dd827ce5e}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 27</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{cb24fa6a-73d4-4562-86fa-666dd827ce5e}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 27</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{dde91523-5d1f-4a95-9f59-fc80169ed7f3}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{c3ab3954-5c50-43c8-a0f6-2d378ff1bd92}</uuidString>
         <position Type="QPointF">-1423.52,-1388.85</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f268ce47-b8b1-4e98-b162-a7f6f8b5dca1}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{2c5abcc1-fa1e-4eef-b7df-8ccce8c06c3d}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 28</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{2c5abcc1-fa1e-4eef-b7df-8ccce8c06c3d}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 28</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{0d283e95-9a85-4f5c-9826-22337e6b3f24}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{10547bb0-dad4-4eae-bd75-3f95707a6b53}</uuidString>
         <position Type="QPointF">-2107.28,-1391.03</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{99f4897c-07df-4819-bdf3-3d13d6ee3d50}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{f1c24d6f-d37d-4158-a528-ea27c2a07202}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Merge 4</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{7ee067b8-52f7-4914-a38a-0d305ab51687}</uuidString>
       <prefferedInput Type="QString">Base</prefferedInput>
       <preferredInput Type="QString">Base</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">true</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Merge 4</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/BlendMode,/Amount,Advanced/AmountEnabled,Advanced/AdvancedEnabled,Advanced/Component,Advanced/BlendIfThis,Advanced/BlendIfBelow,Swizzle/SwizzleR,Swizzle/SwizzleG,Swizzle/SwizzleB,Swizzle/SwizzleA</nodeAttributes>
       <tags Type="QStringList">_blend</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.03</cost>
       <costDescription Type="QString">Some calculations</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Layer_Merge</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">053ff12a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Layer/Merge</pathKey>
       <AdvancedEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Basic,Advanced" AttribName="AdvancedEnabled" GroupHints="1" PrettyName="Blending" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Basic,Advanced" Max="">0,0,1,Basic,Advanced</AdvancedEnabled>
       <Amount TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="Amount" GroupHints="1" PrettyName="Amount" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">1</Amount>
       <AmountEnabled TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="1,0,1,Disable,Enable" AttribName="AmountEnabled" GroupHints="1" PrettyName="Amount Enabled" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1,0,1,Disable,Enable" Max="">1,0,1,Disable,Enable</AmountEnabled>
       <BlendIfBelow TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfBelow" GroupHints="1" PrettyName="Below Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfBelow>
       <BlendIfThis TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriGradient" Reset="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," AttribName="BlendIfThis" GroupHints="1" PrettyName="This Layer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4," Max="">0,1,0.25,1,0.75,1,1,1,UseAtlas=true,Type=4,</BlendIfThis>
       <BlendMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" AttribName="BlendMode" GroupHints="1" PrettyName="Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Comp_Default,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps" Max="">Comp_Multiply,Comp_Default,Comp_Copy,Comp_CopyRGB,Comp_Clear,Comp_Darken,Comp_Add,Comp_Multiply,Comp_ColorBurn,Comp_Lighten,Comp_Screen,Comp_ColorDodge,Comp_Overlay,Comp_SoftLight,Comp_HardLight,Comp_VividLight,Comp_PinLight,Comp_HardMix,Comp_Difference,Comp_Exclusion,Comp_Contrast,Comp_Decontrast,Comp_Hue,Comp_Saturation,Comp_Color,Comp_Luminance,Comp_BurnHighlights,Comp_BurnMidrange,Comp_BurnShadows,Comp_DodgeHighlights,Comp_DodgeMidrange,Comp_DodgeShadows,Comp_SpongeDesaturate,Comp_Invert,Comp_InverseDifference,Comp_VecDefault2d,Comp_VecAdd2d,Comp_VecDefault3d,Comp_VecAdd3d,Comp_VecScale3d,Comp_AddRGBEncodedNormals,Comp_MixRGBEncodedNormals,Comp_ReorientedNormalMappingRGBEncodedNormals,Normal,Copy,CopyRGB,Clear,Darken,Add,Multiply,Color Burn,Lighten,Screen,Color Dodge,Overlay,Soft Light,Hard Light,Vivid Light,Pin Light,Hard Mix,Difference,Exclusion,Contrast,Decontrast,Hue,Saturation,Color,Luminance,Burn Highlights,Burn Midrange,Burn Shadows,Dodge Highlights,Dodge Midrange,Dodge Shadows,Sponge Desaturate,Invert,Inverse Difference,Paint Flow Vectors,Nudge Flow Vectors,Paint Normal Vectors,Nudge Normal Vectors,Scale Vectors,Add Normal Maps,Mix Normal Maps,Mix Reoriented Normal Maps</BlendMode>
       <Component TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" AttribName="Component" GroupHints="1" PrettyName="Component" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance" Max="">0,0,1,2,3,4,Grayscale,Red,Green,Blue,Luminance</Component>
       <SwizzleA TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleA" GroupHints="1" PrettyName="Swizzle Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.a,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleA>
       <SwizzleB TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleB" GroupHints="1" PrettyName="Swizzle Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.b,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleB>
       <SwizzleG TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleG" GroupHints="1" PrettyName="Swizzle Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.g,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleG>
       <SwizzleR TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" AttribName="SwizzleR" GroupHints="1" PrettyName="Swizzle Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero" Max="">Output.r,Output.r,Output.g,Output.b,Output.a,1.0,0.0,Red,Green,Blue,Alpha,One,Zero</SwizzleR>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a83b24f6-ebc2-4d48-b8ce-294e2ca63062}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Merge 4</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{5c1691e9-a613-46e4-9c6f-2c44af46a800}</uuidString>
         <position Type="QPointF">-1517.1,-500.213</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <ModoRender Type="MriSnStandardContext">
        <objectName Type="QString">ModoRender</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f468a619-2b5f-4f1f-89a1-e9660058dad2}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <supportedAttributes Type="QStringList"/>
        <MriNodeContextPropertyVisible TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="bool" Reset="" AttribName="MriNodeContextPropertyVisible" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">false</MriNodeContextPropertyVisible>
        <PythonCommands TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="false" Type="QString" Reset="" AttribName="PythonCommands" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="23" Removeable="true" Default="" Max="">
blendAmount = node.metadata("Amount")

# Create BlendAmount as input so that we can use it as an input into internal nodes
lx.eval('!channel.create BlendAmount mode:float item:%s username:BlendAmount' % groupId )
lx.eval('!assembly.assignChannel input {%s:BlendAmount}' % groupId )
lx.eval('!item.channel BlendAmount %s' % blendAmount)

# Alpha Blend a+b-ab

# b = Mask.r * BlendAmount * Over.a
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b0 = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b0,groupId,-10,-10) )
lx.eval('!channel.link add {%s:Mask.R} {%s:input1}' % (groupId,b0) )
lx.eval('!channel.link add {%s:BlendAmount} {%s:input2}' % (groupId,b0) )

lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
b = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (b,groupId,0,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (b0,b) )
lx.eval('!channel.link add {%s:Over.A} {%s:input2}' % (groupId,b) )

# a+b
lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
apb = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (apb,groupId,10,-10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,apb) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,apb) )

# ab
lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
ab = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (ab,groupId,10,10) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,ab) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,ab) )

# (a+b)-(ab)
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
alphaBlend = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlend,groupId,20,0) )
lx.eval('!channel.link add {%s:output} {%s:input1}' % (apb,alphaBlend) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,alphaBlend) )

# Check if the alphaBlend alpha value is 0
lx.eval('!channelModifier.create "cmLogic:notEqual" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmLogic.N ?')
alphaBlendCheck = lx.eval1('!query sceneservice cmLogic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (alphaBlendCheck,groupId,40,0) )

lx.eval('!shaderNode.create constant')
lx.eval('!item.channel constant$value %s' % 0.0 )
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
zero = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (zero,groupId,20,10) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (zero, alphaBlendCheck ) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend, alphaBlendCheck ) )

# Create constant 1.0 for inverting mask
lx.eval('!shaderNode.create constant')
modoNodeCount = lx.eval1('!query sceneservice constant.N ?')
one = lx.eval1('!query sceneservice constant.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (one,groupId,20,20) )

# Inverted AlphaBlendCheck
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
invertedAlphaBlendCheck = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (invertedAlphaBlendCheck,groupId,50,20) )
lx.eval('!channel.link add {%s:value} {%s:input1}' % (one,invertedAlphaBlendCheck) )
lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,invertedAlphaBlendCheck) )


# (a - ab) * Base.rgb + Over.a * Over.rgb
# a - ab
lx.eval('!channelModifier.create "cmMathBasic:sub" insert:true')
modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
baseScalar = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseScalar,groupId,20,-20) )
lx.eval('!channel.link add {%s:Base.A} {%s:input1}' % (groupId,baseScalar) )
lx.eval('!channel.link add {%s:output} {%s:input2}' % (ab,baseScalar) )

components = ["R","G","B"]
componentOuts = []

for i in range(3):
    component = components[i]

    #(a - ab) * Base.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseMultiplied,groupId,40,-60+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseScalar,baseMultiplied) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input2}' % (groupId,component,baseMultiplied) )

    # b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overMultiplied = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overMultiplied,groupId,40,-50+20*i) )
    lx.eval('!channel.link add {%s:Over.%s} {%s:input1}' % (groupId,component,overMultiplied) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (b,overMultiplied) )

    # (a - ab) * Base.rgb + b * Over.rgb
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    colorAdded = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (colorAdded,groupId,50,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (baseMultiplied,colorAdded) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (overMultiplied,colorAdded) )

    # ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab)

    lx.eval('!channelModifier.create "cmMathBasic:div" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    divided = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (divided,groupId,60,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (colorAdded,divided) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (alphaBlend,divided) )

    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * AlphaBlendCheck
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    overTimesMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (overTimesMask,groupId,70,-55+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (divided,overTimesMask) )
    lx.eval('!channel.link add {%s:result} {%s:input2}' % (alphaBlendCheck,overTimesMask) )

    # Base.rgb * (1 - AlphaBlendCheck)
    lx.eval('!channelModifier.create "cmMathBasic:mul" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    baseTimesInvertedMask = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (baseTimesInvertedMask,groupId,70,-45+20*i) )
    lx.eval('!channel.link add {%s:Base.%s} {%s:input1}' % (groupId,component,baseTimesInvertedMask) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (invertedAlphaBlendCheck,baseTimesInvertedMask) )

    # If the new alpha is 0, return Base otherwise the blended color
    # ( ( (a - ab) * Base.rgb + b * Over.rgb) / (a+b)-(ab) ) * Mask
    #       +
    # Base.rgb * (1 - Mask)
    lx.eval('!channelModifier.create "cmMathBasic:add" insert:true')
    modoNodeCount = lx.eval1('!query sceneservice cmMathBasic.N ?')
    finalAdd = lx.eval1('!query sceneservice cmMathBasic.id ? %s' % str(int(modoNodeCount)-1) ) 
    lx.eval('!schematic.addItem %s %s posX:%s posY:%s' % (finalAdd,groupId,80,-50+20*i) )
    lx.eval('!channel.link add {%s:output} {%s:input1}' % (overTimesMask,finalAdd) )
    lx.eval('!channel.link add {%s:output} {%s:input2}' % (baseTimesInvertedMask,finalAdd) )

    componentOuts.append(finalAdd)

# Connect to assembly output
lx.eval('!channel.link add {%s:output} {%s:Output.R}' % (componentOuts[0],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.G}' % (componentOuts[1],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.B}' % (componentOuts[2],groupId) )
lx.eval('!channel.link add {%s:output} {%s:Output.A}' % (alphaBlend,groupId) )

# Set the default values for Mask to be (1,1,1,1)
lx.eval('channel.value 1.0 channel:{%s:Mask.R}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.G}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.B}' % groupId)
lx.eval('channel.value 1.0 channel:{%s:Mask.A}' % groupId)
</PythonCommands>
       </ModoRender>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{4f2184b3-bf63-44d8-904f-22a240b60611}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    if( 0 != $AdvancedEnabled)
    {
        // this is used to control what component we are pulling the key from
        vec3 Mult[5];

        Mult[0] = vec3(1.0/3.0,1.0/3.0,1.0/3.0);
        Mult[1] = vec3(1,0,0);
        Mult[2] = vec3(0,1,0);
        Mult[3] = vec3(0,0,1);
        Mult[4] = vec3(0.2126,0.7152,0.0722);


        // Calculate the amount from the component
        // a Mult value of (1,0,0) will isolate the red value
        // A mult value of (1,1,1) will give a gray scale

        float ThisAmount = dot(#Over.rgb , Mult[$Component]);
        float BelowAmount = dot(#Base.rgb , Mult[$Component]);

        // now that we've pulled the component out of above and below
        // we lookup into the lut to find out the amount to scale the alpha values by

        float ThisAlpha  = mriCurveLookup($BlendIfThis,ThisAmount);
        float BelowAlpha = mriCurveLookup($BlendIfBelow,BelowAmount);

        // now we multiply the base alpha value by both values

        float AdvancedBlendAmount = ThisAlpha * BelowAlpha;
        if( 0 != $AmountEnabled)
        {
            AdvancedBlendAmount *= $Amount;
        }

        Output = $BlendMode(#Base, #Over, #Mask.r * AdvancedBlendAmount);
    }
    else
    {
        float BlendAmount = 1;
        if( 0 != $AmountEnabled)
        {
            BlendAmount *= $Amount;
        }
        Output = $BlendMode(#Base, #Over, BlendAmount * #Mask.r);
    }

    Output = vec4( $SwizzleR, $SwizzleG, $SwizzleB, $SwizzleA);

                </Expression>
        <m_defaultInputMap Size="1" map0="Mask:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="3" map0="Base:{e50a2561-6804-412d-b3ce-9e4ceca83e47}:Output" Type="QString" map1="Over:{137dbf5b-c24c-4c71-ab83-808af6706df9}:Output" map2="Mask::Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 29</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{fff3d598-3056-4271-b56a-e14b737a8f7a}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 29</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{98496f5e-8dce-4988-90e6-46a70d6e89dc}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{8da75765-b1c2-4736-bec4-9546f8316435}</uuidString>
         <position Type="QPointF">-2087.4,-1831.97</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{7b33cfa9-ed25-47f0-b442-3db417c2c7c0}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{ad479817-ab0c-4327-8642-a7cd2dbd614c}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnUINode Type="MriSnUINode">
       <objectName Type="QString">Unnamed</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{6fd06cf6-805c-4561-a13c-909c76f194a9}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Unnamed</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/TitleText,/BackgroundColor,/Label</nodeAttributes>
       <tags Type="QStringList">_nop</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Backdrop</pathKey>
       <BackgroundColor TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="BackgroundColor" GroupHints="1" PrettyName="Background Color" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="(1,1,1,1)" Max="">(0.0902,0.132,0.19,1)</BackgroundColor>
       <Label TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Label" GroupHints="1" PrettyName="Label" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max=""/>
       <TitleText TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="TitleText" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="" Max="">Unnamed</TitleText>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d26ead33-79f0-44c0-b45b-e10f5b7ce802}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Backdrop</guiNodeClass>
        <m_GuiNode Type="MriNgBackdropNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{9f18c753-7f64-49c4-89d6-1fc7662480a5}</uuidString>
         <position Type="QPointF">-2102.9,-1877.47</position>
         <boundingRect Type="QRectF">(0,0,1319.81,150)</boundingRect>
         <nodeBackgroundColour Type="QColor">#172130</nodeBackgroundColour>
         <titleText Type="QString">Unnamed</titleText>
         <label Type="QString"/>
         <depthValue Type="float">-10</depthValue>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnUINode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 30</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{3ceff815-eba7-4d89-96a3-6b15e7db974b}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 30</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{459b22a4-0d08-4440-8d2a-dfe644bfb907}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{97c53ebf-ca52-43f1-a5aa-88027c97d48f}</uuidString>
         <position Type="QPointF">-1825.68,-1789.63</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{31c2c720-5835-4e57-8360-af80332f15e0}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{39e46f64-97a0-4e4e-8cad-2f433f5661d6}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Grunge Contrast</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{5cb0e39f-a95b-4fdb-bd43-8dff490e0f7e}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Grunge Contrast</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Clamp,/Red,/Green,/Blue,Output Level/OutWhite,Output Level/OutBlack,Input Level/InMidMode,Input Level/InWhite,Input Level/InMid,Input Level/InBlack</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.002</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Levels</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">01a31b2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Levels</pathKey>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Clamp TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" AttribName="Clamp" GroupHints="1" PrettyName="Clamp" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,2,Disable,Clamp Output Levels,Clamp LDR" Max="">0,0,1,2,Disable,Clamp Output Levels,Clamp LDR</Clamp>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <InBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="InBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</InBlack>
       <InMid TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0.5" AttribName="InMid" GroupHints="1" PrettyName="Mid" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0.5" Max="1">0.652000030968338</InMid>
       <InMidMode TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriUserEnum" Reset="0,0,1,Absolute,Relative" AttribName="InMidMode" GroupHints="1" PrettyName="Mid Mode" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0,0,1,Absolute,Relative" Max="">1,0,1,Absolute,Relative</InMidMode>
       <InWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="InWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">0.941000044695102</InWhite>
       <OutBlack TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="OutBlack" GroupHints="1" PrettyName="Black" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">1</OutBlack>
       <OutWhite TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="1" AttribName="OutWhite" GroupHints="1" PrettyName="White" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="1">0</OutWhite>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{2dbc5177-626e-449b-8d21-d0bc24b836c4}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Grunge Contrast</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{0794de37-9066-43bb-915a-ea744c50ab4b}</uuidString>
         <position Type="QPointF">-1516.03,-391.377</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{5d072fab-70b7-440a-955c-b757da8ec430}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    float outWhite = $OutWhite;
    float outBlack = $OutBlack;
    float grad = (outWhite - outBlack) / ($InWhite - $InBlack);
    float inMid = $InMid;
    if( 1 == $InMidMode)
    {
        inMid = mix( $InBlack, $InWhite, inMid);
    }
    float ratio = (inMid - $InBlack) / ($InWhite - $InBlack);
    float alpha = 1.0 / pow(10.0, 1.0 - 2.0 * ratio);

    alpha = max(alpha, 0.0001);

    vec3 levelled = vec3(0.0);
    for (int i = 0; i != 3; ++i)
    {
        float val = outBlack + (#Input[i] - $InBlack) * grad;
        levelled[i] = pow(
                max( val, 0.0 )
                ,alpha );
    }
    if( 0 != $Clamp)
    {
        if( 1 == $Clamp)
        {
            // Clamp to Output Level range
            levelled.rgb = clamp( levelled.rgb, vec3( outBlack), vec3( outWhite));
        }
        else
        {
            // Clamp to 0-1 range
            levelled.rgb = clamp( levelled.rgb, vec3( 0), vec3( 1));
        }
    }
    Output.r = $Red   ? levelled.r : #Input.r;
    Output.g = $Green ? levelled.g : #Input.g;
    Output.b = $Blue  ? levelled.b : #Input.b;
    Output.a = #Input.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{7ee067b8-52f7-4914-a38a-0d305ab51687}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dirt Occluded  New Max</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{cef4570f-c896-4514-93b8-e0e9c3507ff8}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Dirt Occluded  New Max</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/oMin,/oMax,/nMin,/nMax,Extra Attributes/sMult,Extra Attributes/useClamp,Channels/Red,Channels/Green,Channels/Blue,Channels/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">Set Range</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b34cd2a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Extension Pack/Histogram/Set Range</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <nMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="nMax" GroupHints="1" PrettyName="NewMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">0.1</nMax>
       <nMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="nMin" GroupHints="1" PrettyName="NewMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</nMin>
       <oMax TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="oMax" GroupHints="1" PrettyName="OldMax" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</oMax>
       <oMin TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="oMin" GroupHints="1" PrettyName="OldMin" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</oMin>
       <sMult TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="1" AttribName="sMult" GroupHints="1" PrettyName="MultiplyScale" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="1" Max="">1</sMult>
       <useClamp TypeFlags="0" Enabled="true" Visible="true" Min="false" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="useClamp" GroupHints="1" PrettyName="Clamp Values" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="true">true</useClamp>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{69e60865-badb-4802-ab3e-66095e854b6d}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Dirt Occluded  New Max</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{90a78017-db0c-47c2-9234-790652b8ec2a}</uuidString>
         <position Type="QPointF">-2484.08,-1031.5</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="5" map0="oMin:0,0,-100,-20" Type="QString" map1="Input:0,0,0,-50" map2="oMax:0,0,-100,20" map3="nMin:0,0,100,-20" ContainerType="QHash" map4="nMax:0,0,100,20"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{bea5975f-117a-461a-be23-21c41d882b2b}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                // Initializing Sliders, do not remove commment line:
                //  $oMin, $oMax, $nMin, $nMax, $sMult

                vec4 old = (#Input.rgba - vec4(#oMin)) / (vec4(#oMax) - vec4(#oMin));
                vec4 new = ( ((vec4(#nMax) - vec4(#nMin)) * old.rgba) + vec4(#nMin) ) * vec4($sMult) ;

                if ($useClamp == true)
                    {
                    Output = vec4(
                                  $Red   ? clamp(new.r,0.0,1.0) : #Input.r,
                                  $Green ? clamp(new.g,0.0,1.0) : #Input.g,
                                  $Blue  ? clamp(new.b,0.0,1.0) : #Input.b,
                                  $Alpha ? clamp(new.a,0.0,1.0) : #Input.a
                                  );

                }

                else
                    {
                    Output = vec4(
                                  $Red   ? new.r : #Input.r,
                                  $Green ? new.g : #Input.g,
                                  $Blue  ? new.b : #Input.b,
                                  $Alpha ? new.a : #Input.a
                                 );
                    }

                </Expression>
        <m_defaultInputMap Size="5" map0="Input:0:vec4(1,1,1,1)" Type="QString" map1="nMax:0:vec4($nMax,$nMax,$nMax,1.0)" map2="nMin:0:vec4($nMin,$nMin,$nMin,1.0)" map3="oMax:0:vec4($oMax,$oMax,$oMax,1.0)" ContainerType="QHash" map4="oMin:0:vec4($oMin,$oMin,$oMin,1.0)"/>
       </GLSL>
       <m_input2node Size="5" map0="Input:{e33a9fe6-77c1-4a8a-9728-ed84a85de140}:Output" Type="QString" map1="oMin::Output" map2="oMax::Output" map3="nMin::Output" ContainerType="QHash" map4="nMax:{8eb2b7e2-bd8a-47d4-990b-60d83c6cc7c6}:Output"/>
       <m_PrettyInputNameMap Size="7" oMin="Old Min" nMin="New Min" oMax="Old Max" nMax="New Max" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 31</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{f1c24d6f-d37d-4158-a528-ea27c2a07202}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 31</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{928101d8-b118-4f39-b344-90b5e0952e44}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{2ff71175-197c-4ada-aef2-addf9f52d378}</uuidString>
         <position Type="QPointF">-2696.68,-1390.99</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{51563673-989f-4002-a9f7-3ebe67cba594}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{a2f53318-df90-4c04-9db4-223736014241}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Dot 32</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{1465915e-58be-4c43-b1ea-a8146b9c2a73}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Dot</defaultName>
       <name Type="QString">Dot 32</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList"/>
       <tags Type="QStringList">_dot</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/Dot</pathKey>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{e7f7d6b2-5cfe-441b-bbba-e5136639f745}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">Dot</guiNodeClass>
        <m_GuiNode Type="MriNgDotNode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{243d207a-ee3d-4e3f-992e-3ce9a1de6743}</uuidString>
         <position Type="QPointF">-2695.27,-1389.58</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ec7bbaf5-78ec-43df-80dd-99653dd87ed0}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
                    Output = #Input;
                    </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(0,0,0,0)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{a2f53318-df90-4c04-9db4-223736014241}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input="" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnUINode Type="MriSnUINode">
       <objectName Type="QString">StickyNote</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{4fa5f697-95c5-478f-9d41-912931063359}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">StickyNote</defaultName>
       <name Type="QString">StickyNote</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/TitleText,/BackgroundColor,/Label</nodeAttributes>
       <tags Type="QStringList">_nop</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Misc/StickyNote</pathKey>
       <BackgroundColor TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="BackgroundColor" GroupHints="1" PrettyName="Background Color" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="(1,1,1,1)" Max="">(0.883238,1,0,1)</BackgroundColor>
       <Label TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Label" GroupHints="1" PrettyName="Label" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">PUT IN GRUNGE MAP HERE</Label>
       <TitleText TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="TitleText" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="" Max="">StickyNote</TitleText>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f04c47ba-fd14-4864-a96c-7f5c533eac56}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">StickyNote</guiNodeClass>
        <m_GuiNode Type="MriNgUINode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{954b832e-413e-4ded-af00-21f7087902dd}</uuidString>
         <position Type="QPointF">-2769.25,-1096.12</position>
         <nodeBackgroundColour Type="QColor">#e2ff00</nodeBackgroundColour>
         <label Type="QString">PUT IN GRUNGE MAP HERE</label>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnUINode>
      <MriSnUINode Type="MriSnUINode">
       <objectName Type="QString">StickyNote 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{781f7cba-5053-4216-b65a-d2d6dd8c5ec2}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">StickyNote</defaultName>
       <name Type="QString">StickyNote 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/TitleText,/BackgroundColor,/Label</nodeAttributes>
       <tags Type="QStringList">_nop</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <BackgroundColor TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="BackgroundColor" GroupHints="1" PrettyName="Background Color" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="(1,1,1,1)" Max="">(0.883238,1,0,1)</BackgroundColor>
       <Label TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Label" GroupHints="1" PrettyName="Label" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">PUT IN GRUNGE MAP HERE</Label>
       <TitleText TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="TitleText" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="" Max="">StickyNote 2</TitleText>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8a038c28-efae-4ecf-b17e-fecd79dd17d6}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">StickyNote</guiNodeClass>
        <m_GuiNode Type="MriNgUINode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{215b9882-4f92-4058-8d88-5da670e79c7e}</uuidString>
         <position Type="QPointF">-1743.17,-1118.05</position>
         <nodeBackgroundColour Type="QColor">#e2ff00</nodeBackgroundColour>
         <label Type="QString">PUT IN GRUNGE MAP HERE</label>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnUINode>
      <MriSnUINode Type="MriSnUINode">
       <objectName Type="QString">StickyNote 3</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{8991170c-b926-4fdd-9659-c1e132d1b109}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">StickyNote</defaultName>
       <name Type="QString">StickyNote 3</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/TitleText,/BackgroundColor,/Label</nodeAttributes>
       <tags Type="QStringList">_nop</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <BackgroundColor TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="BackgroundColor" GroupHints="1" PrettyName="Background Color" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="(1,1,1,1)" Max="">(0.883238,1,0,1)</BackgroundColor>
       <Label TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Label" GroupHints="1" PrettyName="Label" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">PUT IN GRUNGE MAP HERE</Label>
       <TitleText TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="TitleText" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="" Max="">StickyNote 3</TitleText>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8a038c28-efae-4ecf-b17e-fecd79dd17d6}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">StickyNote</guiNodeClass>
        <m_GuiNode Type="MriNgUINode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{215b9882-4f92-4058-8d88-5da670e79c7e}</uuidString>
         <position Type="QPointF">-1500.46,-1119.22</position>
         <nodeBackgroundColour Type="QColor">#e2ff00</nodeBackgroundColour>
         <label Type="QString">PUT IN GRUNGE MAP HERE</label>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnUINode>
      <MriSnUINode Type="MriSnUINode">
       <objectName Type="QString">StickyNote 4</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{054db2c0-5ba7-45b9-81ce-8ef3c97ebb5c}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">StickyNote</defaultName>
       <name Type="QString">StickyNote 4</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/TitleText,/BackgroundColor,/Label</nodeAttributes>
       <tags Type="QStringList">_nop</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0</cost>
       <costDescription Type="QString"/>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString"/>
       <versionDate Type="QString"/>
       <versionHashCreated Type="QString"/>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString"/>
       <BackgroundColor TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="MriColor" Reset="(1,1,1,1)" AttribName="BackgroundColor" GroupHints="1" PrettyName="Background Color" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="(1,1,1,1)" Max="">(0.883238,1,0,1)</BackgroundColor>
       <Label TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Label" GroupHints="1" PrettyName="Label" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">PUT IN GRUNGE MAP HERE</Label>
       <TitleText TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="TitleText" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="" Max="">StickyNote 4</TitleText>
       <NodeGraphView Type="MriSnUINodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{75e3fcc1-5129-4255-aa83-825911f5b4aa}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <guiNodeClass Type="QString">StickyNote</guiNodeClass>
        <m_GuiNode Type="MriNgUINode">
         <objectName Type="QString"/>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{79a55fd5-6a21-4a39-887a-bebb67432154}</uuidString>
         <position Type="QPointF">-465.816,-1115.65</position>
         <nodeBackgroundColour Type="QColor">#e2ff00</nodeBackgroundColour>
         <label Type="QString">PUT IN GRUNGE MAP HERE</label>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnUINode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Surface Spill</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{8eb2b7e2-bd8a-47d4-990b-60d83c6cc7c6}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Surface Spill</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Basic/Extension Pack/Float</pathKey>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.784000037238002</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d1737214-1c74-44de-8ffa-e5c3772b3260}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Surface Spill</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{dd6e1d0c-f883-48b0-b055-64030afc54e7}</uuidString>
         <position Type="QPointF">-2433.56,-1147.8</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{f429d1bb-c721-4b33-9cf8-fc0d729c213a}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Surface Spill Fine</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{7c194181-fa98-4a63-ab3e-984fbd5c36a8}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Surface Spill Fine</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Basic/Extension Pack/Float</pathKey>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.884000041987747</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{97b02d91-4422-4112-91a6-ce6cde58b830}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Surface Spill Fine</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{4cd22353-affb-49b4-a7a0-56cb9cea3398}</uuidString>
         <position Type="QPointF">-1122.9,-1002.9</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{9f73ae9c-73c5-4b52-b895-2f1d71372ab1}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Invert</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{13564147-2e04-4a6a-bf49-bd331592450c}</uuidString>
       <prefferedInput Type="QString">Input</prefferedInput>
       <preferredInput Type="QString">Input</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Invert</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Red,/Green,/Blue,/Alpha</nodeAttributes>
       <tags Type="QStringList">_adjustment</tags>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Filter_Invert</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0b133a8a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Filter/Invert</pathKey>
       <Alpha TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="Alpha" GroupHints="1" PrettyName="Alpha" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="false">false</Alpha>
       <Blue TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Blue" GroupHints="1" PrettyName="Blue" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Blue>
       <Green TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Green" GroupHints="1" PrettyName="Green" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Green>
       <Red TypeFlags="0" Enabled="true" Visible="true" Min="true" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="Red" GroupHints="1" PrettyName="Red" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="false">true</Red>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{936f575b-db09-45e0-a317-d6724b8923c2}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Invert</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{750abe5a-2d4c-4f7d-8505-a5aace8fe4d6}</uuidString>
         <position Type="QPointF">-1147,-850</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{7e1008a4-d752-4aee-86a0-def8b031e885}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    Output   = #Input;
    Output.r = $Red   ? clamp(1.0 - Output.r, 0.0, 1.0) : Output.r;
    Output.g = $Green ? clamp(1.0 - Output.g, 0.0, 1.0) : Output.g;
    Output.b = $Blue  ? clamp(1.0 - Output.b, 0.0, 1.0) : Output.b;
    Output.a = $Alpha ? clamp(1.0 - Output.a, 0.0, 1.0) : Output.a;
            </Expression>
        <m_defaultInputMap Size="1" map0="Input:0:vec4(1,1,1,1)" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="1" map0="Input:{7c194181-fa98-4a63-ab3e-984fbd5c36a8}:Output" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="4" Input=" " Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Float</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{2f68028c-c617-424c-be82-b865fd14cd1e}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Float</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Basic/Extension Pack/Float</pathKey>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">4</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{94e6be0e-0992-4aa8-9337-57dc8859b8ca}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Float</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{a71751ba-391c-453d-a345-f1763ad8ce47}</uuidString>
         <position Type="QPointF">-1272.15,-1097.75</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8128a395-fad2-4521-b374-291a86979bf2}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Multiply</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{73b66ad6-a106-4c63-9fa4-481feb60d973}</uuidString>
       <prefferedInput Type="QString">A</prefferedInput>
       <preferredInput Type="QString">A</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Multiply</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Components/R,Components/G,Components/B,Components/A</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Math_Multiply</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0d50b86a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Math/Multiply</pathKey>
       <A TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="A" GroupHints="1" PrettyName="A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="">false</A>
       <B TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="B" GroupHints="1" PrettyName="B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="">true</B>
       <G TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="G" GroupHints="1" PrettyName="G" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="">true</G>
       <R TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="R" GroupHints="1" PrettyName="R" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="">true</R>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{b1a62dfe-b8b7-4ba3-80ec-5b5f3a523b19}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Multiply</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{96e72a6f-988f-45fe-89d3-c05c40290188}</uuidString>
         <position Type="QPointF">-1271,-1023</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{8fa6e3ba-a4cb-42ac-8d82-9239d7fa3bdd}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    vec4 Gate = vec4(float($R),float($G),float($B),float($A)); 
    Output = (#A*#B)*Gate + #A * (vec4(1.0)-Gate);
                </Expression>
        <m_defaultInputMap Size="2" map0="A:0:vec4(1,1,1,1)" Type="QString" map1="B:0:vec4(1,1,1,1)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="2" map0="A:{2f68028c-c617-424c-be82-b865fd14cd1e}:Output" Type="QString" map1="B:{7c194181-fa98-4a63-ab3e-984fbd5c36a8}:Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Fine Detail</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{6d7b4f70-87ff-4647-a04f-11b2f976127a}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Fine Detail</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Basic/Extension Pack/Float</pathKey>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.629000029875897</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">0</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{a9ae7f8f-4dc0-44ab-8a35-bd7b801a6b91}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Fine Detail</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{19f0daaa-1b0c-41c4-ad38-5a4768a92076}</uuidString>
         <position Type="QPointF">-156.874,-918.252</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{d6e29b3e-0009-4a6d-996b-f3563d2c2fc8}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Multiply 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{684575a7-e115-4200-b904-9d740123a871}</uuidString>
       <prefferedInput Type="QString">A</prefferedInput>
       <preferredInput Type="QString">A</preferredInput>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Multiply 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">Components/R,Components/G,Components/B,Components/A</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">MRI_Math_Multiply</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0d50b86a</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Math/Multiply</pathKey>
       <A TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="false" AttribName="A" GroupHints="1" PrettyName="A" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="false" Max="">false</A>
       <B TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="B" GroupHints="1" PrettyName="B" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="">true</B>
       <G TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="G" GroupHints="1" PrettyName="G" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="">true</G>
       <R TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="bool" Reset="true" AttribName="R" GroupHints="1" PrettyName="R" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="true" Max="">true</R>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{ddcf9a36-6b30-4644-9668-76f040960c8c}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Multiply 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{dfa75f0c-6d06-4f91-bfe1-0c60ba564774}</uuidString>
         <position Type="QPointF">-429.114,-1249.79</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{bac88b1d-17be-43d8-a9cb-c21acc8d299f}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">
    vec4 Gate = vec4(float($R),float($G),float($B),float($A)); 
    Output = (#A*#B)*Gate + #A * (vec4(1.0)-Gate);
                </Expression>
        <m_defaultInputMap Size="2" map0="A:0:vec4(1,1,1,1)" Type="QString" map1="B:0:vec4(1,1,1,1)" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="2" map0="A:{53d26a40-3936-457e-959a-d5931a211edc}:Output" Type="QString" map1="B:{c29d67cc-23ea-460b-9bbf-cee1e693eb68}:Output" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
      <MriSnBaseNode Type="MriSnBaseNode">
       <objectName Type="QString">Float 2</objectName>
       <selected Type="bool">false</selected>
       <uuidString Type="QString">{c29d67cc-23ea-460b-9bbf-cee1e693eb68}</uuidString>
       <prefferedInput Type="QString"/>
       <preferredInput Type="QString"/>
       <preferredInputSetAtLoadTime Type="bool">false</preferredInputSetAtLoadTime>
       <defaultName Type="QString">Unnamed</defaultName>
       <name Type="QString">Float 2</name>
       <defaultDescription Type="QString"/>
       <description Type="QString"/>
       <nodeAttributes Type="QStringList">/Float_Field,/Integer,/Float_0to1,/Float_0to10,/Float_0to100,/Float_0to1000</nodeAttributes>
       <tags Type="QStringList"/>
       <enabled Type="int">-1</enabled>
       <locked Type="bool">false</locked>
       <hash Type="QString"/>
       <cachePoints Type="QStringList"/>
       <cost Type="float">0.001</cost>
       <costDescription Type="QString">Trivial operation</costDescription>
       <disabledInputs Type="QStringList"/>
       <cacheEnabled Type="bool">false</cacheEnabled>
       <versionUUID Type="QString">JK_Float</versionUUID>
       <versionDate Type="QString">3.0.2015.1106</versionDate>
       <versionHashCreated Type="QString">0ed6b1aa</versionHashCreated>
       <containerNodeUUID Type="QString"/>
       <isContainerNode Type="bool">false</isContainerNode>
       <stackContainerNodeUUID Type="QString"/>
       <isStackContainerNode Type="bool">false</isStackContainerNode>
       <adjustmentStackContainerNodeUUID Type="QString"/>
       <isAdjustmentStackContainerNode Type="bool">false</isAdjustmentStackContainerNode>
       <sharedEdges Type="QStringList"/>
       <pathKey Type="QString">Basic/Extension Pack/Float</pathKey>
       <Float_0to1 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1" GroupHints="1" PrettyName="0 - 1" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1">0.935000044410117</Float_0to1>
       <Float_0to10 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to10" GroupHints="1" PrettyName="0 - 10" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="10">3.32400015788153</Float_0to10>
       <Float_0to100 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to100" GroupHints="1" PrettyName="0 - 100" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="100">0</Float_0to100>
       <Float_0to1000 TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="true" Type="double" Reset="0" AttribName="Float_0to1000" GroupHints="1" PrettyName="0 - 1000" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="1000">0</Float_0to1000>
       <Float_Field TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="float" Reset="0" AttribName="Float_Field" GroupHints="1" PrettyName="Float" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Float_Field>
       <Integer TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="int" Reset="0" AttribName="Integer" GroupHints="1" PrettyName="Integer" ItemList="" Step="" Description="" Flags="31" Removeable="true" Default="0" Max="">0</Integer>
       <NodeGraphView Type="MriSnNodeGraphViewContext">
        <objectName Type="QString">NodeGraphView</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{fa616487-c551-4ff9-a4ab-03e20e2b7eea}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shapeType Type="int">0</shapeType>
        <nodeColorTop Type="QString"/>
        <nodeColorBottom Type="QString"/>
        <m_GuiNode Type="MriNgTextNode">
         <objectName Type="QString">Float 2</objectName>
         <selected Type="bool">false</selected>
         <uuidString Type="QString">{5841eaaf-2375-4913-b476-d1d248aa8293}</uuidString>
         <position Type="QPointF">-326.896,-1350.79</position>
        </m_GuiNode>
        <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
        <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
       </NodeGraphView>
       <GLSL Type="MriSnBaseGlslContext">
        <objectName Type="QString">GLSL</objectName>
        <selected Type="bool">false</selected>
        <uuidString Type="QString">{6e167ae1-2d5d-4198-b87a-a33adbcc4469}</uuidString>
        <tags Type="QStringList"/>
        <inputTags Type="QStringList"/>
        <shaderType Type="uint">0</shaderType>
        <Expression TypeFlags="0" Enabled="true" Visible="true" Min="" Saved="true" Tweakable="true" Undoable="true" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="27" Removeable="false" Default="" Max="">

                float OutValue = ($Float_Field + $Float_0to1 + $Float_0to10 + $Float_0to100 + $Float_0to1000 + float($Integer));
                Output = vec4(OutValue,OutValue,OutValue,1.0);
           
           </Expression>
        <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
       </GLSL>
       <m_input2node Size="0" Type="QString" ContainerType="QHash"/>
       <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
       <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
       <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
       <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
      </MriSnBaseNode>
     </m_nodes>
     <m_CustomHeaderHistory Size="10" Type="QString" ContainerType="QHash">
      <JK_TexScatterUV Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslh</JK_TexScatterUV>
      <ID_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslh</ID_ProceduralLib>
      <NB_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslh</NB_ProceduralLib>
      <JK_ColorRangeToMask Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslh</JK_ColorRangeToMask>
      <JK_VoronoiSuite Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslh</JK_VoronoiSuite>
      <BS_GpuNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslh</BS_GpuNoiseLib>
      <AL_GaborNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslh</AL_GaborNoiseLib>
      <DT3D_CellularNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslh</DT3D_CellularNoiseLib>
      <DT3D_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslh</DT3D_ProceduralLib>
      <NB_BrdfLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslh</NB_BrdfLib>
     </m_CustomHeaderHistory>
     <m_CustomCodeHistory Size="10" Type="QString" ContainerType="QHash">
      <JK_TexScatterUV Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslc</JK_TexScatterUV>
      <NB_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslc</NB_ProceduralLib>
      <ID_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslc</ID_ProceduralLib>
      <JK_VoronoiSuite Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslc</JK_VoronoiSuite>
      <JK_ColorRangeToMask Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslc</JK_ColorRangeToMask>
      <BS_GpuNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslc</BS_GpuNoiseLib>
      <AL_GaborNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslc</AL_GaborNoiseLib>
      <DT3D_CellularNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslc</DT3D_CellularNoiseLib>
      <DT3D_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslc</DT3D_ProceduralLib>
      <NB_BrdfLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslc</NB_BrdfLib>
     </m_CustomCodeHistory>
    </m_groupNetwork>
    <NodeGraphView Type="MriSnGroupNodeGraphViewContext">
     <objectName Type="QString">NodeGraphView</objectName>
     <selected Type="bool">false</selected>
     <uuidString Type="QString">{60b4a887-1e7e-4e16-bc40-7f19122e9579}</uuidString>
     <tags Type="QStringList"/>
     <inputTags Type="QStringList"/>
     <shapeType Type="int">4</shapeType>
     <nodeColorTop Type="QString"/>
     <nodeColorBottom Type="QString"/>
     <m_GuiNode Type="MriNgTextNode">
      <objectName Type="QString">EdgeGrunge_Projections</objectName>
      <selected Type="bool">true</selected>
      <uuidString Type="QString">{4aa3d531-ee32-4263-82b0-f1513a6f83f9}</uuidString>
      <position Type="QPointF">1139.43,348.782</position>
     </m_GuiNode>
     <m_inputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
     <m_outputNodeInitialPos Size="0" Type="QString" ContainerType="QHash"/>
    </NodeGraphView>
    <GLSL Type="MriSnGroupGlslContext">
     <objectName Type="QString">GLSL</objectName>
     <selected Type="bool">false</selected>
     <uuidString Type="QString">{81023a77-0536-435d-ab11-deedab596ba9}</uuidString>
     <tags Type="QStringList"/>
     <inputTags Type="QStringList"/>
     <shaderType Type="uint">35632</shaderType>
     <Expression TypeFlags="0" Enabled="true" Visible="true" Min="0" Saved="true" Tweakable="true" Undoable="false" Type="QString" Reset="" AttribName="Expression" GroupHints="1" PrettyName="" ItemList="" Step="" Description="" Flags="19" Removeable="false" Default="" Max="0"/>
     <m_defaultInputMap Size="0" Type="QString" ContainerType="QHash"/>
    </GLSL>
    <m_input2node Size="2" map0="Curvature Map::Output" Type="QString" map1="Ambient Occlusion Map::Output" ContainerType="QHash"/>
    <m_PrettyInputNameMap Size="3" Type="QString" ContainerType="QHash"/>
    <m_PrettyOutputNameMap Size="4" Type="QString" ContainerType="QHash" Output=""/>
    <m_outputPoints Size="1" Type="QString" outputPoint0="Output" ContainerType="QVector"/>
    <m_Snapshots Size="0" Type="MriSnapshot" ContainerType="QVector"/>
   </MriSnGroupNode>
  </m_nodes>
  <m_CustomHeaderHistory Size="10" Type="QString" ContainerType="QHash">
   <JK_TexScatterUV Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslh</JK_TexScatterUV>
   <ID_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslh</ID_ProceduralLib>
   <NB_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslh</NB_ProceduralLib>
   <JK_ColorRangeToMask Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslh</JK_ColorRangeToMask>
   <JK_VoronoiSuite Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslh</JK_VoronoiSuite>
   <BS_GpuNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslh</BS_GpuNoiseLib>
   <AL_GaborNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslh</AL_GaborNoiseLib>
   <DT3D_CellularNoiseLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslh</DT3D_CellularNoiseLib>
   <DT3D_ProceduralLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslh</DT3D_ProceduralLib>
   <NB_BrdfLib Type="Header">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslh</NB_BrdfLib>
  </m_CustomHeaderHistory>
  <m_CustomCodeHistory Size="10" Type="QString" ContainerType="QHash">
   <JK_TexScatterUV Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_TexScatterUV.glslc</JK_TexScatterUV>
   <NB_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_ProceduralLib.glslc</NB_ProceduralLib>
   <ID_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/ID_ProceduralLib.glslc</ID_ProceduralLib>
   <JK_VoronoiSuite Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_VoronoiSuite.glslc</JK_VoronoiSuite>
   <JK_ColorRangeToMask Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/JK_FunctionLibrary/JK_ColorRangeToMask.glslc</JK_ColorRangeToMask>
   <BS_GpuNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/BS_GpuNoiseLib.glslc</BS_GpuNoiseLib>
   <AL_GaborNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/AL_GaborNoiseLib.glslc</AL_GaborNoiseLib>
   <DT3D_CellularNoiseLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_CellularNoiseLib.glslc</DT3D_CellularNoiseLib>
   <DT3D_ProceduralLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/DT3D_FunctionLibrary/DT3D_ProceduralLib.glslc</DT3D_ProceduralLib>
   <NB_BrdfLib Type="Code">C:/Users/JensK/Documents/Mari/Scripts/ExtensionPack_3v01/Shaders/FunctionLibrary/NB_FunctionLibrary/NB_BrdfLib.glslc</NB_BrdfLib>
  </m_CustomCodeHistory>
 </MriShaderNetwork>
</Mari>
